"use strict";var yB=Object.defineProperty,_B=Object.defineProperties,vB=Object.getOwnPropertyDescriptors,RP=Object.getOwnPropertySymbols,EB=Object.prototype.hasOwnProperty,wB=Object.prototype.propertyIsEnumerable,OP=(tt,be,P)=>be in tt?yB(tt,be,{enumerable:!0,configurable:!0,writable:!0,value:P}):tt[be]=P,PP=(tt,be)=>{for(var P in be||(be={}))EB.call(be,P)&&OP(tt,P,be[P]);if(RP)for(var P of RP(be))wB.call(be,P)&&OP(tt,P,be[P]);return tt},NP=(tt,be)=>_B(tt,vB(be));(self.webpackChunkangular_tour_of_heroes=self.webpackChunkangular_tour_of_heroes||[]).push([[179],{2011:(tt,be,P)=>{P.d(be,{hO:()=>He,xv:()=>ge,Dh:()=>ue,GT:()=>pe,cc:()=>Te,on:()=>H,pX:()=>oe});var m=P(5e3),ee=P(127),k=P(5813);tt=P.hmd(tt);const ce=["ngOnDestroy"],oe=(Ie,Ke,et,xe={})=>new Proxy(Ie,{get:(ve,Ce)=>et.runOutsideAngular(()=>{var Ue;if(Ie[Ce])return(null===(Ue=null==xe?void 0:xe.spy)||void 0===Ue?void 0:Ue.get)&&xe.spy.get(Ce,Ie[Ce]),Ie[Ce];if(ce.indexOf(Ce)>-1)return()=>{};const je=Ke.toPromise().then(K=>{const we=K&&K[Ce];return"function"==typeof we?we.bind(K):we&&we.then?we.then(Q=>et.run(()=>Q)):et.run(()=>we)});return new Proxy(()=>{},{get:(K,we)=>je[we],apply:(K,we,Q)=>je.then(ie=>{var te;const ye=ie&&ie(...Q);return(null===(te=null==xe?void 0:xe.spy)||void 0===te?void 0:te.apply)&&xe.spy.apply(Ce,Q,ye),ye})})})}),pe=(Ie,Ke)=>{Ke.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(xe=>{Object.defineProperty(Ie.prototype,xe,Object.getOwnPropertyDescriptor(et.prototype||et,xe))})})};class de{constructor(Ke){return Ke}}const ue=new m.OlP("angularfire2.app.options"),ge=new m.OlP("angularfire2.app.name");function H(Ie,Ke,et){const ve="object"==typeof et&&et||{};ve.name=ve.name||"string"==typeof et&&et||"[DEFAULT]";const Ue=ee.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ke.runOutsideAngular(()=>ee.Z.initializeApp(Ie,ve));try{JSON.stringify(Ie)!==JSON.stringify(Ue.options)&&q("error",`${Ue.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new de(Ue)}const q=(Ie,...Ke)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Ke)},ne={provide:de,useFactory:H,deps:[ue,m.R0b,[new m.FiY,ge]]};let He=(()=>{class Ie{constructor(et){ee.Z.registerVersion("angularfire",k.q4.full,"core"),ee.Z.registerVersion("angularfire",k.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,et.toString())}static initializeApp(et,xe){return{ngModule:Ie,providers:[{provide:ue,useValue:et},{provide:ge,useValue:xe}]}}}return Ie.\u0275fac=function(et){return new(et||Ie)(m.LFG(m.Lbi))},Ie.\u0275mod=m.oAB({type:Ie}),Ie.\u0275inj=m.cJS({providers:[ne]}),Ie})();function Te(Ie,Ke,et,xe,ve){const[,Ce,Ue]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ie)||[];if(Ce)return function Oe(Ie,Ke){try{return Ie.toString()===Ke.toString()}catch(et){return Ie===Ke}}(ve,Ue)||(fe("error",`${Ke} was already initialized on the ${et} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:ve,was:Ue})),Ce;{const je=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ie,je,ve]),je}}const Be=!!tt.hot,fe=(Ie,...Ke)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[Ie](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(tt,be,P)=>{P.d(be,{q4:()=>ug,iC:()=>ou,fc:()=>Rd,HU:()=>No,vb:()=>su,JM:()=>Wu});var m=P(5e3),ee=P(5867),k=P(5861),ce=P(9681),oe=P(2090),pe=P(4859),de=P(1877),ue=P(8766);const ge="@firebase/installations",H="0.5.12",ne=`w:${H}`,He="FIS_v2",Ke=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(C){return C instanceof oe.ZR&&C.code.includes("request-failed")}function xe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function ve(C){return{token:C.token,requestStatus:2,expiresIn:ie(C.expiresIn),creationTime:Date.now()}}function Ce(C,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(C,D){const V=(yield D.json()).error;return Ke.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function je({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function K(C,{refreshToken:D}){const R=je(C);return R.append("Authorization",function te(C){return`${He} ${C}`}(D)),R}function we(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ie(C){return Number(C.replace("s","000"))}function ye(C,D){return ae.apply(this,arguments)}function ae(){return(ae=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:R}){const V=xe(C),Y=je(C),X=D.getImmediate({optional:!0});if(X){const bt=yield X.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const $e={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:He,appId:C.appId,sdkVersion:ne})},pt=yield we(()=>fetch(V,$e));if(pt.ok){const bt=yield pt.json();return{fid:bt.fid||R,registrationStatus:2,refreshToken:bt.refreshToken,authToken:ve(bt.authToken)}}throw yield Ce("Create Installation",pt)})).apply(this,arguments)}function Ne(C){return new Promise(D=>{setTimeout(D,C)})}const $t=/^[cdef][\w-]{21}$/;function Je(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function rn(C){return function ht(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return $t.test(R)?R:""}catch(C){return""}}function Nn(C){return`${C.appName}!${C.appId}`}const ln=new Map;function tn(C,D){const R=Nn(C);Ut(R,D),function hs(C,D){const R=function fr(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=C=>{Ut(C.data.key,C.data.fid)}),ii}();R&&R.postMessage({key:C,fid:D}),function Hr(){0===ln.size&&ii&&(ii.close(),ii=null)}()}(R,D)}function Ut(C,D){const R=ln.get(C);if(R)for(const V of R)V(D)}let ii=null;const $r="firebase-installations-store";let Mi=null;function Et(){return Mi||(Mi=(0,ue.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore($r)}})),Mi}function Gr(C,D){return kn.apply(this,arguments)}function kn(){return(kn=(0,k.Z)(function*(C,D){const R=Nn(C),Y=(yield Et()).transaction($r,"readwrite"),X=Y.objectStore($r),De=yield X.get(R);return yield X.put(D,R),yield Y.done,(!De||De.fid!==D.fid)&&tn(C,D.fid),D})).apply(this,arguments)}function Kn(C){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,k.Z)(function*(C){const D=Nn(C),V=(yield Et()).transaction($r,"readwrite");yield V.objectStore($r).delete(D),yield V.done})).apply(this,arguments)}function fs(C,D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(C,D){const R=Nn(C),Y=(yield Et()).transaction($r,"readwrite"),X=Y.objectStore($r),De=yield X.get(R),$e=D(De);return void 0===$e?yield X.delete(R):yield X.put($e,R),yield Y.done,$e&&(!De||De.fid!==$e.fid)&&tn(C,$e.fid),$e})).apply(this,arguments)}function Gn(C){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,k.Z)(function*(C){let D;const R=yield fs(C.appConfig,V=>{const Y=Xo(V),X=Gt(C,Y);return D=X.registrationPromise,X.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Xo(C){return Us(C||{fid:Je(),registrationStatus:0})}function Gt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ke.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function ot(C,D){return It.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:pr(C)}:{installationEntry:D}}function It(){return(It=(0,k.Z)(function*(C,D){try{const R=yield ye(C,D);return Gr(C.appConfig,R)}catch(R){throw et(R)&&409===R.customData.serverCode?yield Kn(C.appConfig):yield Gr(C.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function pr(C){return si.apply(this,arguments)}function si(){return(si=(0,k.Z)(function*(C){let D=yield jt(C.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield jt(C.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield Gn(C);return V||R}return D})).apply(this,arguments)}function jt(C){return fs(C,D=>{if(!D)throw Ke.create("installation-not-found");return Us(D)})}function Us(C){return function gr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Ar(C,D){return ft.apply(this,arguments)}function ft(){return(ft=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},R){const V=Bs(C,R),Y=K(C,R),X=D.getImmediate({optional:!0});if(X){const bt=yield X.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const $e={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ne,appId:C.appId}})},pt=yield we(()=>fetch(V,$e));if(pt.ok)return ve(yield pt.json());throw yield Ce("Generate Auth Token",pt)})).apply(this,arguments)}function Bs(C,{fid:D}){return`${xe(C)}/${D}/authTokens:generate`}function j(C){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(C,D=!1){let R;const V=yield fs(C.appConfig,X=>{if(!ut(X))throw Ke.create("not-registered");const De=X.authToken;if(!D&&sn(De))return X;if(1===De.requestStatus)return R=U(C,D),X;{if(!navigator.onLine)throw Ke.create("app-offline");const $e=Xn(X);return R=Ae(C,$e),$e}});return R?yield R:V.authToken})).apply(this,arguments)}function U(C,D){return $.apply(this,arguments)}function $(){return($=(0,k.Z)(function*(C,D){let R=yield z(C.appConfig);for(;1===R.authToken.requestStatus;)yield Ne(100),R=yield z(C.appConfig);const V=R.authToken;return 0===V.requestStatus?j(C,D):V})).apply(this,arguments)}function z(C){return fs(C,D=>{if(!ut(D))throw Ke.create("not-registered");return function Ft(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ae(C,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*(C,D){try{const R=yield Ar(C,D),V=Object.assign(Object.assign({},D),{authToken:R});return yield Gr(C.appConfig,V),R}catch(R){if(!et(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Gr(C.appConfig,V)}else yield Kn(C.appConfig);throw R}})).apply(this,arguments)}function ut(C){return void 0!==C&&2===C.registrationStatus}function sn(C){return 2===C.requestStatus&&!function qt(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function Xn(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function Oi(){return(Oi=(0,k.Z)(function*(C){const D=C,{installationEntry:R,registrationPromise:V}=yield Gn(D);return V?V.catch(console.error):j(D).catch(console.error),R.fid})).apply(this,arguments)}function Na(){return(Na=(0,k.Z)(function*(C,D=!1){const R=C;return yield Zn(R),(yield j(R,D)).token})).apply(this,arguments)}function Zn(C){return xr.apply(this,arguments)}function xr(){return(xr=(0,k.Z)(function*(C){const{registrationPromise:D}=yield Gn(C);D&&(yield D)})).apply(this,arguments)}function ta(C){return Ke.create("missing-app-config-values",{valueName:C})}const zr="installations",lt=C=>{const D=C.getProvider("app").getImmediate(),R=function or(C){if(!C||!C.options)throw ta("App Configuration");if(!C.name)throw ta("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!C.options[R])throw ta(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,ce._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},on=C=>{const D=C.getProvider("app").getImmediate(),R=(0,ce._getProvider)(D,zr).getImmediate();return{getId:()=>function oi(C){return Oi.apply(this,arguments)}(R),getToken:Y=>function ea(C){return Na.apply(this,arguments)}(R,Y)}};(function Wr(){(0,ce._registerComponent)(new pe.wA(zr,lt,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("installations-internal",on,"PRIVATE"))})(),(0,ce.registerVersion)(ge,H),(0,ce.registerVersion)(ge,H,"esm2017");const Pi="@firebase/remote-config",Ln=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qp{constructor(D,R,V,Y){this.client=D,this.storage=R,this.storageCache=V,this.logger=Y}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,Y=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var R=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Y;D.eTag=Y&&Y.eTag;const X=yield R.client.fetch(D),De=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&De.push(R.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(De),X})()}}function ud(C=navigator){return C.languages&&C.languages[0]||C.language}class mr{constructor(D,R,V,Y,X,De){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=V,this.projectId=Y,this.apiKey=X,this.appId=De}fetch(D){var R=this;return(0,k.Z)(function*(){var V,Y,X;const[De,$e]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},gt={sdk_version:R.sdkVersion,app_instance_id:De,app_instance_id_token:$e,app_id:R.appId,language_code:ud()},An={method:"POST",headers:At,body:JSON.stringify(gt)},Nr=fetch(bt,An),no=new Promise((kr,hi)=>{D.signal.addEventListener(()=>{const sc=new Error("The operation was aborted.");sc.name="AbortError",hi(sc)})});let ro;try{yield Promise.race([Nr,no]),ro=yield Nr}catch(kr){let hi="fetch-client-network";throw"AbortError"===(null===(V=kr)||void 0===V?void 0:V.name)&&(hi="fetch-timeout"),Ln.create(hi,{originalErrorMessage:null===(Y=kr)||void 0===Y?void 0:Y.message})}let di=ro.status;const ic=ro.headers.get("ETag")||void 0;let Ku,Ji;if(200===ro.status){let kr;try{kr=yield ro.json()}catch(hi){throw Ln.create("fetch-client-parse",{originalErrorMessage:null===(X=hi)||void 0===X?void 0:X.message})}Ku=kr.entries,Ji=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ji?di=500:"NO_CHANGE"===Ji?di=304:("NO_TEMPLATE"===Ji||"EMPTY_CONFIG"===Ji)&&(Ku={}),304!==di&&200!==di)throw Ln.create("fetch-status",{httpStatus:di});return{status:di,eTag:ic,config:Ku}})()}}class Jp{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,k.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:V}){var Y=this;return(0,k.Z)(function*(){yield function Gs(C,D){return new Promise((R,V)=>{const Y=Math.max(D-Date.now(),0),X=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(X),V(Ln.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const X=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),X}catch(X){if(!function ld(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const De={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(De),Y.attemptFetch(D,De)}})()}}class cd{constructor(D,R,V,Y,X){this.app=D,this._client=R,this._storageCache=V,this._storage=Y,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hl(C,D){var R;const V=C.target.error||void 0;return Ln.create(D,{originalErrorMessage:V&&(null===(R=V)||void 0===R?void 0:R.message)})}const qs="app_namespace_store";class ng{constructor(D,R,V,Y=function tg(){return new Promise((C,D)=>{var R;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Y=>{D(Hl(Y,"storage-open"))},V.onsuccess=Y=>{C(Y.target.result)},V.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(qs,{keyPath:"compositeKey"})}}catch(V){D(Ln.create("storage-open",{originalErrorMessage:null===(R=V)||void 0===R?void 0:R.message}))}})}()){this.appId=D,this.appName=R,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,k.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,X)=>{var De;const pt=V.transaction([qs],"readonly").objectStore(qs),bt=R.createCompositeKey(D);try{const At=pt.get(bt);At.onerror=gt=>{X(Hl(gt,"storage-get"))},At.onsuccess=gt=>{const An=gt.target.result;Y(An?An.value:void 0)}}catch(At){X(Ln.create("storage-get",{originalErrorMessage:null===(De=At)||void 0===De?void 0:De.message}))}})})()}set(D,R){var V=this;return(0,k.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((X,De)=>{var $e;const bt=Y.transaction([qs],"readwrite").objectStore(qs),At=V.createCompositeKey(D);try{const gt=bt.put({compositeKey:At,value:R});gt.onerror=An=>{De(Hl(An,"storage-set"))},gt.onsuccess=()=>{X()}}catch(gt){De(Ln.create("storage-set",{originalErrorMessage:null===($e=gt)||void 0===$e?void 0:$e.message}))}})})()}delete(D){var R=this;return(0,k.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,X)=>{var De;const pt=V.transaction([qs],"readwrite").objectStore(qs),bt=R.createCompositeKey(D);try{const At=pt.delete(bt);At.onerror=gt=>{X(Hl(gt,"storage-delete"))},At.onsuccess=()=>{Y()}}catch(At){X(Ln.create("storage-delete",{originalErrorMessage:null===(De=At)||void 0===De?void 0:De.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class hd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const R=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),X=yield R;X&&(D.lastFetchStatus=X);const De=yield V;De&&(D.lastSuccessfulFetchTimestampMillis=De);const $e=yield Y;$e&&(D.activeConfig=$e)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ou(){return fd.apply(this,arguments)}function fd(){return(fd=(0,k.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(C){return!1}})).apply(this,arguments)}!function ra(){(0,ce._registerComponent)(new pe.wA("remote-config",function C(D,{instanceIdentifier:R}){const V=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,oe.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:X,apiKey:De,appId:$e}=V.options;if(!X)throw Ln.create("registration-project-id");if(!De)throw Ln.create("registration-api-key");if(!$e)throw Ln.create("registration-app-id");const pt=new ng($e,V.name,R=R||"firebase"),bt=new hd(pt),At=new de.Yd(Pi);At.logLevel=de.in.ERROR;const gt=new mr(Y,ce.SDK_VERSION,R,X,De,$e),An=new Jp(gt,pt),Nr=new Qp(An,pt,bt,At),no=new cd(V,Nr,bt,pt,At);return function cn(C){const D=(0,oe.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(no),no},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Pi,"0.3.11"),(0,ce.registerVersion)(Pi,"0.3.11","esm2017")}();const pd="/firebase-messaging-sw.js",yr="/firebase-cloud-messaging-push-scope",vo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",gd="google.c.a.c_l",ff="google.c.a.ts",md="google.c.a.e";var sa=(()=>{return(C=sa||(sa={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",sa;var C})();function Mr(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yd(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),Y=new Uint8Array(V.length);for(let X=0;X<V.length;++X)Y[X]=V.charCodeAt(X);return Y}const Rr="fcm_token_details_db",ai="fcm_token_object_Store";function $l(C){return _d.apply(this,arguments)}function _d(){return _d=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Rr))return null;let D=null;return(yield(0,ue.X3)(Rr,5,{upgrade:(V=(0,k.Z)(function*(Y,X,De,$e){var pt;if(X<2||!Y.objectStoreNames.contains(ai))return;const bt=$e.objectStore(ai),At=yield bt.index("fcmSenderId").get(C);if(yield bt.clear(),At)if(2===X){const gt=At;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;D={token:gt.fcmToken,createTime:null!==(pt=gt.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:Mr(gt.vapidKey)}}}else if(3===X){const gt=At;D={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Mr(gt.auth),p256dh:Mr(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Mr(gt.vapidKey)}}}else if(4===X){const gt=At;D={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:Mr(gt.auth),p256dh:Mr(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:Mr(gt.vapidKey)}}}}),function(X,De,$e,pt){return V.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Rr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Gl(D)?D:null;var V}),_d.apply(this,arguments)}function Gl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ui="firebase-messaging-store";let pf=null;function an(){return pf||(pf=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ui)}})),pf}function Va(C){return wo.apply(this,arguments)}function wo(){return(wo=(0,k.Z)(function*(C){const D=ur(C),V=yield(yield an()).transaction(Ui).objectStore(Ui).get(D);if(V)return V;{const Y=yield $l(C.appConfig.senderId);if(Y)return yield nn(C,Y),Y}})).apply(this,arguments)}function nn(C,D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(C,D){const R=ur(C),Y=(yield an()).transaction(Ui,"readwrite");return yield Y.objectStore(Ui).put(D,R),yield Y.done,D})).apply(this,arguments)}function Pu(C){return zs.apply(this,arguments)}function zs(){return(zs=(0,k.Z)(function*(C){const D=ur(C),V=(yield an()).transaction(Ui,"readwrite");yield V.objectStore(Ui).delete(D),yield V.done})).apply(this,arguments)}function ur({appConfig:C}){return C.appId}const Cn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bi(C,D){return lr.apply(this,arguments)}function lr(){return(lr=(0,k.Z)(function*(C,D){var R;const V=yield ua(C),Y=la(D),X={method:"POST",headers:V,body:JSON.stringify(Y)};let De;try{De=yield(yield fetch(ji(C.appConfig),X)).json()}catch($e){throw Cn.create("token-subscribe-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(De.error)throw Cn.create("token-subscribe-failed",{errorInfo:De.error.message});if(!De.token)throw Cn.create("token-subscribe-no-token");return De.token})).apply(this,arguments)}function bo(C,D){return ys.apply(this,arguments)}function ys(){return(ys=(0,k.Z)(function*(C,D){var R;const V=yield ua(C),Y=la(D.subscriptionOptions),X={method:"PATCH",headers:V,body:JSON.stringify(Y)};let De;try{De=yield(yield fetch(`${ji(C.appConfig)}/${D.token}`,X)).json()}catch($e){throw Cn.create("token-update-failed",{errorInfo:null===(R=$e)||void 0===R?void 0:R.toString()})}if(De.error)throw Cn.create("token-update-failed",{errorInfo:De.error.message});if(!De.token)throw Cn.create("token-update-no-token");return De.token})).apply(this,arguments)}function Ba(C,D){return bi.apply(this,arguments)}function bi(){return(bi=(0,k.Z)(function*(C,D){var R;const Y={method:"DELETE",headers:yield ua(C)};try{const De=yield(yield fetch(`${ji(C.appConfig)}/${D}`,Y)).json();if(De.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:De.error.message})}catch(X){throw Cn.create("token-unsubscribe-failed",{errorInfo:null===(R=X)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function ji({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function ua(C){return yt.apply(this,arguments)}function yt(){return(yt=(0,k.Z)(function*({appConfig:C,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function la({p256dh:C,auth:D,endpoint:R,vapidKey:V}){const Y={web:{endpoint:R,auth:D,p256dh:C}};return V!==vo&&(Y.web.applicationPubKey=V),Y}const Nu=6048e5;function ja(C){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,k.Z)(function*(C){const D=yield mn(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Mr(D.getKey("auth")),p256dh:Mr(D.getKey("p256dh"))},V=yield Va(C.firebaseDependencies);if(V){if(Io(V.subscriptionOptions,R))return Date.now()>=V.createTime+Nu?Zl(C,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield Ba(C.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Lt(C.firebaseDependencies,R)}return Lt(C.firebaseDependencies,R)})).apply(this,arguments)}function Ha(C){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(C){const D=yield Va(C.firebaseDependencies);D&&(yield Ba(C.firebaseDependencies,D.token),yield Pu(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Zl(C,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(C,D){try{const R=yield bo(C.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield nn(C.firebaseDependencies,V),R}catch(R){throw yield Ha(C),R}})).apply(this,arguments)}function Lt(C,D){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,k.Z)(function*(C,D){const V={token:yield Bi(C,D),createTime:Date.now(),subscriptionOptions:D};return yield nn(C,V),V.token})).apply(this,arguments)}function mn(C,D){return ca.apply(this,arguments)}function ca(){return(ca=(0,k.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yd(D)})})).apply(this,arguments)}function Io(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ui(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function $a(C,D){if(!D.notification)return;C.notification={};const R=D.notification.title;R&&(C.notification.title=R);const V=D.notification.body;V&&(C.notification.body=V);const Y=D.notification.image;Y&&(C.notification.image=Y)}(D,C),function Ql(C,D){!D.data||(C.data=D.data)}(D,C),function rg(C,D){var R,V,Y,X,De;if(!D.fcmOptions&&!(null===(R=D.notification)||void 0===R?void 0:R.click_action))return;C.fcmOptions={};const $e=null!==(Y=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(X=D.notification)||void 0===X?void 0:X.click_action;$e&&(C.fcmOptions.link=$e);const pt=null===(De=D.fcmOptions)||void 0===De?void 0:De.analytics_label;pt&&(C.fcmOptions.analyticsLabel=pt)}(D,C),D}function ku(C){return"object"==typeof C&&!!C&&ia in C}function Ga(C,D){const R=[];for(let V=0;V<C.length;V++)R.push(C.charAt(V)),V<D.length&&R.push(D.charAt(V));return R.join("")}function Vn(C){return Cn.create("missing-app-config-values",{valueName:C})}Ga("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ga("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _s{constructor(D,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Fu(C){if(!C||!C.options)throw Vn("App Configuration Object");if(!C.name)throw Vn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const V of D)if(!R[V])throw Vn(V);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function qa(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(pd,{scope:yr}),C.swRegistration.update().catch(()=>{})}catch(R){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=R)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function Ii(C,D){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,k.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield qa(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Lu(C,D){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,k.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=vo)})).apply(this,arguments)}function za(){return(za=(0,k.Z)(function*(C,D){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield Lu(C,null==D?void 0:D.vapidKey),yield Ii(C,null==D?void 0:D.serviceWorkerRegistration),ja(C)})).apply(this,arguments)}function da(C,D,R){return ec.apply(this,arguments)}function ec(){return(ec=(0,k.Z)(function*(C,D,R){const V=Wa(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[ia],message_name:R[gd],message_time:R[ff],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wa(C){switch(C){case sa.NOTIFICATION_CLICKED:return"notification_open";case sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tc(){return(tc=(0,k.Z)(function*(C,D){const R=D.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===sa.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ui(R)):C.onMessageHandler.next(ui(R)));const V=R.data;ku(V)&&"1"===V[md]&&(yield da(C,R.messageType,V))})).apply(this,arguments)}const ha="@firebase/messaging",vd=C=>{const D=new _s(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ig(C,D){return tc.apply(this,arguments)}(D,R)),D},fa=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:V=>function Vu(C,D){return za.apply(this,arguments)}(D,V)}};function pa(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(){try{yield(0,oe.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ed(){(0,ce._registerComponent)(new pe.wA("messaging",vd,"PUBLIC")),(0,ce._registerComponent)(new pe.wA("messaging-internal",fa,"PRIVATE")),(0,ce.registerVersion)(ha,"0.9.16"),(0,ce.registerVersion)(ha,"0.9.16","esm2017")}();const wd="analytics",sg="firebase_id",vs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ga="https://www.googletagmanager.com/gtag/js",nr=new de.Yd("@firebase/analytics");function yf(C){return Promise.all(C.map(D=>D.catch(R=>R)))}function Co(C,D){const R=document.createElement("script");R.src=`${ga}?l=${C}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Id(C,D,R,V,Y,X){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,k.Z)(function*(C,D,R,V,Y,X){const De=V[Y];try{if(De)yield D[De];else{const pt=(yield yf(R)).find(bt=>bt.measurementId===Y);pt&&(yield D[pt.appId])}}catch($e){nr.error($e)}C("config",Y,X)})).apply(this,arguments)}function ju(C,D,R,V,Y){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(C,D,R,V,Y){try{let X=[];if(Y&&Y.send_to){let De=Y.send_to;Array.isArray(De)||(De=[De]);const $e=yield yf(R);for(const pt of De){const bt=$e.find(gt=>gt.measurementId===pt),At=bt&&D[bt.appId];if(!At){X=[];break}X.push(At)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),C("event",V,Y||{})}catch(X){nr.error(X)}})).apply(this,arguments)}function me(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(ga))return D;return null}const fn=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pn=new class st{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ya(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Gi(C){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,k.Z)(function*(C){var D;const{appId:R,apiKey:V}=C,Y={method:"GET",headers:Ya(V)},X=vs.replace("{app-id}",R),De=yield fetch(X,Y);if(200!==De.status&&304!==De.status){let $e="";try{const pt=yield De.json();(null===(D=pt.error)||void 0===D?void 0:D.message)&&($e=pt.error.message)}catch(pt){}throw fn.create("config-fetch-failed",{httpStatus:De.status,responseMessage:$e})}return De.json()})).apply(this,arguments)}function Vt(C){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,k.Z)(function*(C,D=pn,R){const{appId:V,apiKey:Y,measurementId:X}=C.options;if(!V)throw fn.create("no-app-id");if(!Y){if(X)return{measurementId:X,appId:V};throw fn.create("no-api-key")}const De=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new Ja;return setTimeout((0,k.Z)(function*(){$e.abort()}),void 0!==R?R:6e4),Dn({appId:V,apiKey:Y,measurementId:X},De,$e,D)})).apply(this,arguments)}function Dn(C,D,R){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,k.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:R},V,Y=pn){var X,De;const{appId:$e,measurementId:pt}=C;try{yield Tt(V,D)}catch(bt){if(pt)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null===(X=bt)||void 0===X?void 0:X.message}]`),{appId:$e,measurementId:pt};throw bt}try{const bt=yield Gi(C);return Y.deleteThrottleMetadata($e),bt}catch(bt){const At=bt;if(!Dd(At)){if(Y.deleteThrottleMetadata($e),pt)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${pt} provided in the "measurementId" field in the local Firebase config. [${null==At?void 0:At.message}]`),{appId:$e,measurementId:pt};throw bt}const gt=503===Number(null===(De=null==At?void 0:At.customData)||void 0===De?void 0:De.httpStatus)?(0,oe.$s)(R,Y.intervalMillis,30):(0,oe.$s)(R,Y.intervalMillis),An={throttleEndTimeMillis:Date.now()+gt,backoffCount:R+1};return Y.setThrottleMetadata($e,An),nr.debug(`Calling attemptFetch again in ${gt} millis`),Dn(C,An,V,Y)}})).apply(this,arguments)}function Tt(C,D){return new Promise((R,V)=>{const Y=Math.max(D-Date.now(),0),X=setTimeout(R,Y);C.addEventListener(()=>{clearTimeout(X),V(fn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Dd(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ja{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Zs,eu;function Ys(){return(Ys=(0,k.Z)(function*(C,D,R,V,Y){if(Y&&Y.global)C("event",R,V);else{const X=yield D;C("event",R,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function Di(C){eu=C}function rt(C){Zs=C}function So(){return St.apply(this,arguments)}function St(){return(St=(0,k.Z)(function*(){var C;if(!(0,oe.hl)())return nr.warn(fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return nr.warn(fn.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(C,D,R,V,Y,X,De){var $e;const pt=Vt(C);pt.then(Nr=>{R[Nr.measurementId]=Nr.appId,C.options.measurementId&&Nr.measurementId!==C.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nr=>nr.error(Nr)),D.push(pt);const bt=So().then(Nr=>{if(Nr)return V.getId()}),[At,gt]=yield Promise.all([pt,bt]);me()||Co(X,At.measurementId),eu&&(Y("consent","default",eu),Di(void 0)),Y("js",new Date);const An=null!==($e=null==De?void 0:De.config)&&void 0!==$e?$e:{};return An.origin="firebase",An.update=!0,null!=gt&&(An[sg]=gt),Y("config",At.measurementId,An),Zs&&(Y("set",Zs),rt(void 0)),At.measurementId})).apply(this,arguments)}class Wi{constructor(D){this.app=D}_delete(){return delete Ki[this.app.options.appId],Promise.resolve()}}let Ki={},Qs=[];const Gu={};let Tn,Yr,Zi="dataLayer",_n=!1;function vf(C,D,R){!function ag(){const C=[];if((0,oe.ru)()&&C.push("This is a browser extension environment."),(0,oe.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),R=fn.create("invalid-analytics-context",{errorInfo:D});nr.warn(R.message)}}();const V=C.options.appId;if(!V)throw fn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw fn.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ki[V])throw fn.create("already-exists",{id:V});if(!_n){!function Uu(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Zi);const{wrappedGtag:X,gtagCore:De}=function og(C,D,R,V,Y){let X=function(...De){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(X=window[Y]),window[Y]=function Cd(C,D,R,V){function X(){return(X=(0,k.Z)(function*(De,$e,pt){try{"event"===De?yield ju(C,D,R,$e,pt):"config"===De?yield Id(C,D,R,V,$e,pt):"consent"===De?C("consent","update",pt):C("set",$e)}catch(bt){nr.error(bt)}})).apply(this,arguments)}return function Y(De,$e,pt){return X.apply(this,arguments)}}(X,C,D,R),{gtagCore:X,wrappedGtag:window[Y]}}(Ki,Qs,Gu,Zi,"gtag");Yr=X,Tn=De,_n=!0}return Ki[V]=function zi(C,D,R,V,Y,X,De){return Ao.apply(this,arguments)}(C,Qs,Gu,D,Tn,Zi,R),new Wi(C)}function Ef(){return rr.apply(this,arguments)}function rr(){return(rr=(0,k.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(C){return!1}})).apply(this,arguments)}const qu="@firebase/analytics";!function tu(){(0,ce._registerComponent)(new pe.wA(wd,(D,{options:R})=>vf(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new pe.wA("analytics-internal",function C(D){try{const R=D.getProvider(wd).getImmediate();return{logEvent:(V,Y,X)=>function Es(C,D,R,V){C=(0,oe.m9)(C),function Xa(C,D,R,V,Y){return Ys.apply(this,arguments)}(Yr,Ki[C.app.options.appId],D,R,V).catch(Y=>nr.error(Y))}(R,V,Y,X)}}catch(R){throw fn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(qu,"0.8.0"),(0,ce.registerVersion)(qu,"0.8.0","esm2017")}();var zu=P(4408),Qr=P(7565);const Mo=new class nu extends Qr.v{}(class Pr extends zu.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,R,V):D.flush(this)}});var ya=P(4986),Oo=P(8505),Yi=P(5363),Sd=P(9468);const ug=new m.GfV("7.4.1"),_a="__angularfire_symbol__analyticsIsSupportedValue",cr="__angularfire_symbol__analyticsIsSupported",Po="__angularfire_symbol__remoteConfigIsSupportedValue",Jr="__angularfire_symbol__remoteConfigIsSupported",Ad="__angularfire_symbol__messagingIsSupportedValue",eo="__angularfire_symbol__messagingIsSupported";function Wu(C,D,R){if(D){if(1===D.length)return D[0];const X=D.filter(De=>De.app===R);if(1===X.length)return X[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[cr]||(globalThis[cr]=Ef().then(C=>globalThis[_a]=C).catch(()=>globalThis[_a]=!1)),globalThis[eo]||(globalThis[eo]=pa().then(C=>globalThis[Ad]=C).catch(()=>globalThis[Ad]=!1)),globalThis[Jr]||(globalThis[Jr]=Ou().then(C=>globalThis[Po]=C).catch(()=>globalThis[Po]=!1));const su=(C,D)=>{const R=D?[D]:(0,ee.C6)(),V=[];return R.forEach(Y=>{Y.container.getProvider(C).instances.forEach(De=>{V.includes(De)||V.push(De)})}),V};function ws(){}class ci{constructor(D,R=Mo){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,V){const Y=this.zone;return this.delegate.schedule(function(De){Y.runGuarded(()=>{D.apply(this,[De])})},R,V)}}class Md{constructor(D){this.zone=D,this.task=null}call(D,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ws,{},ws,ws)),R.pipe((0,Oo.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let No=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new ci(Zone.current)),this.insideAngular=R.run(()=>new ci(Zone.current,ya.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Xr(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Rd(C){return C.pipe((0,Yi.Q)(Xr().outsideAngular))}function ou(C){return Xr(),function rc(C){return function(R){return(R=R.lift(new Md(C.ngZone))).pipe((0,Sd.R)(C.outsideAngular),(0,Yi.Q)(C.insideAngular))}}(Xr())(C)}},2090:(tt,be,P)=>{P.d(be,{BH:()=>He,LL:()=>ae,ZR:()=>ye,zI:()=>Q,US:()=>pe,tV:()=>ge,L:()=>ue,$s:()=>gr,r3:()=>Sr,Sg:()=>Te,ne:()=>Et,vZ:()=>ii,ZB:()=>q,pd:()=>$r,m9:()=>Bs,z$:()=>Oe,jU:()=>Ie,ru:()=>Ke,xb:()=>Ut,w1:()=>ve,hl:()=>K,uI:()=>Be,UG:()=>fe,b$:()=>et,G6:()=>je,xO:()=>xi,zd:()=>Vs,eu:()=>we});const ce=function(j){const W=[];let U=0;for(let $=0;$<j.length;$++){let z=j.charCodeAt($);z<128?W[U++]=z:z<2048?(W[U++]=z>>6|192,W[U++]=63&z|128):55296==(64512&z)&&$+1<j.length&&56320==(64512&j.charCodeAt($+1))?(z=65536+((1023&z)<<10)+(1023&j.charCodeAt(++$)),W[U++]=z>>18|240,W[U++]=z>>12&63|128,W[U++]=z>>6&63|128,W[U++]=63&z|128):(W[U++]=z>>12|224,W[U++]=z>>6&63|128,W[U++]=63&z|128)}return W},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,W){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let z=0;z<j.length;z+=3){const Ae=j[z],Ve=z+1<j.length,ut=Ve?j[z+1]:0,sn=z+2<j.length,qt=sn?j[z+2]:0;let oi=(15&ut)<<2|qt>>6,Oi=63&qt;sn||(Oi=64,Ve||(oi=64)),$.push(U[Ae>>2],U[(3&Ae)<<4|ut>>4],U[oi],U[Oi])}return $.join("")},encodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(j):this.encodeByteArray(ce(j),W)},decodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(j):function(j){const W=[];let U=0,$=0;for(;U<j.length;){const z=j[U++];if(z<128)W[$++]=String.fromCharCode(z);else if(z>191&&z<224){const Ae=j[U++];W[$++]=String.fromCharCode((31&z)<<6|63&Ae)}else if(z>239&&z<365){const sn=((7&z)<<18|(63&j[U++])<<12|(63&j[U++])<<6|63&j[U++])-65536;W[$++]=String.fromCharCode(55296+(sn>>10)),W[$++]=String.fromCharCode(56320+(1023&sn))}else{const Ae=j[U++],Ve=j[U++];W[$++]=String.fromCharCode((15&z)<<12|(63&Ae)<<6|63&Ve)}}return W.join("")}(this.decodeStringToByteArray(j,W))},decodeStringToByteArray(j,W){this.init_();const U=W?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let z=0;z<j.length;){const Ae=U[j.charAt(z++)],ut=z<j.length?U[j.charAt(z)]:0;++z;const qt=z<j.length?U[j.charAt(z)]:64;++z;const Ft=z<j.length?U[j.charAt(z)]:64;if(++z,null==Ae||null==ut||null==qt||null==Ft)throw Error();$.push(Ae<<2|ut>>4),64!==qt&&($.push(ut<<4&240|qt>>2),64!==Ft&&$.push(qt<<6&192|Ft))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ue=function(j){return function(j){const W=ce(j);return pe.encodeByteArray(W,!0)}(j).replace(/\./g,"")},ge=function(j){try{return pe.decodeString(j,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function q(j,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return W}for(const U in W)!W.hasOwnProperty(U)||!ne(U)||(j[U]=q(j[U],W[U]));return j}function ne(j){return"__proto__"!==j}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,U)=>{this.resolve=W,this.reject=U})}wrapCallback(W){return(U,$)=>{U?this.reject(U):this.resolve($),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(U):W(U,$))}}}function Te(j,W){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=W||"demo-project",z=j.iat||0,Ae=j.sub||j.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:z,exp:z+3600,auth_time:z,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Ve)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function Ke(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){const j=Oe();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function je(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return"object"==typeof indexedDB}function we(){return new Promise((j,W)=>{try{let U=!0;const $="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open($);z.onsuccess=()=>{z.result.close(),U||self.indexedDB.deleteDatabase($),j(!0)},z.onupgradeneeded=()=>{U=!1},z.onerror=()=>{var Ae;W((null===(Ae=z.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(U){W(U)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(W,U,$){super(U),this.code=W,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(W,U,$){this.service=W,this.serviceName=U,this.errors=$}create(W,...U){const $=U[0]||{},z=`${this.service}/${W}`,Ae=this.errors[W],Ve=Ae?function Ne(j,W){return j.replace(ht,(U,$)=>{const z=W[$];return null!=z?String(z):`<${$}?>`})}(Ae,$):"Error";return new ye(z,`${this.serviceName}: ${Ve} (${z}).`,$)}}const ht=/\{\$([^}]+)}/g;function Sr(j,W){return Object.prototype.hasOwnProperty.call(j,W)}function Ut(j){for(const W in j)if(Object.prototype.hasOwnProperty.call(j,W))return!1;return!0}function ii(j,W){if(j===W)return!0;const U=Object.keys(j),$=Object.keys(W);for(const z of U){if(!$.includes(z))return!1;const Ae=j[z],Ve=W[z];if(fr(Ae)&&fr(Ve)){if(!ii(Ae,Ve))return!1}else if(Ae!==Ve)return!1}for(const z of $)if(!U.includes(z))return!1;return!0}function fr(j){return null!==j&&"object"==typeof j}function xi(j){const W=[];for(const[U,$]of Object.entries(j))Array.isArray($)?$.forEach(z=>{W.push(encodeURIComponent(U)+"="+encodeURIComponent(z))}):W.push(encodeURIComponent(U)+"="+encodeURIComponent($));return W.length?"&"+W.join("&"):""}function Vs(j){const W={};return j.replace(/^\?/,"").split("&").forEach($=>{if($){const[z,Ae]=$.split("=");W[decodeURIComponent(z)]=decodeURIComponent(Ae)}}),W}function $r(j){const W=j.indexOf("?");if(!W)return"";const U=j.indexOf("#",W);return j.substring(W,U>0?U:void 0)}function Et(j,W){const U=new Gr(j,W);return U.subscribe.bind(U)}class Gr{constructor(W,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{W(this)}).catch($=>{this.error($)})}next(W){this.forEachObserver(U=>{U.next(W)})}error(W){this.forEachObserver(U=>{U.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,U,$){let z;if(void 0===W&&void 0===U&&void 0===$)throw new Error("Missing Observer.");z=function Kn(j,W){if("object"!=typeof j||null===j)return!1;for(const U of W)if(U in j&&"function"==typeof j[U])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:U,complete:$},void 0===z.next&&(z.next=Ri),void 0===z.error&&(z.error=Ri),void 0===z.complete&&(z.complete=Ri);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch(Ve){}}),this.observers.push(z),Ae}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,W)}sendOne(W,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{U(this.observers[W])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ri(){}function gr(j,W=1e3,U=2){const $=W*Math.pow(U,j),z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+z)}function Bs(j){return j&&j._delegate?j._delegate:j}},4525:(tt,be,P)=>{var m=P(5e3);let ee=null;function k(){return ee}const de=new m.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ge(){return(0,m.LFG)(q)}()},providedIn:"platform"}),n})();const H=new m.OlP("Location Initialized");let q=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function He(){return new q((0,m.LFG)(de))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,m.LFG)(de).location;return new et((0,m.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new m.OlP("appBaseHref");let et=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Be(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ue),m.LFG(Ke,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ue),m.LFG(Ke,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(je(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Te,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(ue))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ce(){return new ve((0,m.LFG)(fe),(0,m.LFG)(ue))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}function na(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}let gs=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Hs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let er=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),_o(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{_o(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function _o(n,e){n.context.$implicit=e.item}let ar=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class cn{constructor(){this.$implicit=null,this.ngIf=null}}function Mu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let md=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function oa(n){return"server"===n}let Gl=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new aa((0,m.LFG)(de),window)}),n})();class aa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ql(this.window.history)||ql(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ql(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class an{}class wo extends class Va extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){ee||(ee=n)}(new wo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ua(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function zs(n){Pu=Pu||document.createElement("a"),Pu.setAttribute("href",n);const e=Pu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return na(document.cookie,e)}}let Pu,nn=null;const ur=new m.OlP("TRANSITION_ID"),Cn=[{provide:m.ip1,useFactory:function zl(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[ur,de,m.zs3],multi:!0}];class Bi{static init(){(0,m.VLi)(new Bi)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let lr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const bo=new m.OlP("EventManagerPlugins");let ys=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bo),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ba{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let bi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ji=(()=>{class n extends bi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ua),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ua))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ua(n){k().remove(n)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},la=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(la,n),t.push(i))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ca(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new $a(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ys),m.LFG(ji),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ca{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=yt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=yt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(r)):this.eventManager.addEventListener(e,t,Lt(r))}}class $a extends ca{constructor(e,t,r,i){super(e),this.component=r;const u=Se(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Kl(n){return"_ngcontent-%COMP%".replace(la,n)}(i+"-"+r.id),this.hostAttr=function Zl(n){return"_nghost-%COMP%".replace(la,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ql extends ca{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Se(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rg=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ku=["alt","control","meta","shift"],Fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_s={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qa=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(ku.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Ws(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vn.hasOwnProperty(e)&&(e=Vn[e]))}return Fu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ku.forEach(u=>{u!=i&&_s[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Ii(){wo.makeCurrent(),Bi.init()},multi:!0},{provide:de,useFactory:function Lu(){return(0,m.RDi)(document),document},deps:[]}]),za=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Jl(){return new m.qLn},deps:[]},{provide:bo,useClass:rg,multi:!0,deps:[de,m.R0b,m.Lbi]},{provide:bo,useClass:qa,multi:!0,deps:[de]},{provide:mn,useClass:mn,deps:[ys,ji,m.AFp]},{provide:m.FYo,useExisting:mn},{provide:bi,useExisting:ji},{provide:ji,useClass:ji,deps:[de]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ys,useClass:ys,deps:[bo,m.R0b]},{provide:an,useClass:lr,deps:[]}];let da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:ur,useExisting:m.AFp},Cn]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:za,imports:[md,m.hGG]}),n})();"undefined"!=typeof window&&window;var me=P(5861),_f=P(4986),fn=P(8306),Yt=P(8996),To=P(7669);function st(...n){const e=(0,To.yG)(n);return(0,Yt.D)(n,e)}var pn=P(5813),Ya=P(8189);function Qa(...n){return function Gi(){return(0,Ya.J)(1)}()((0,Yt.D)(n,(0,To.yG)(n)))}var Vt=P(4482);function Ks(...n){const e=(0,To.yG)(n);return(0,Vt.e)((t,r)=>{(e?Qa(n,t,e):Qa(n,t)).subscribe(r)})}var Dn=P(5403);function Hu(){return(0,Vt.e)((n,e)=>{let t,r=!1;n.subscribe((0,Dn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var Tt=P(4004);function Dd(n,e,t,r,i){return(u,c)=>{let f=t,y=e,w=0;u.subscribe((0,Dn.x)(c,T=>{const x=w++;y=f?n(y,T,x):(f=!0,T),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function Ja(n,e){return(0,Vt.e)(Dd(n,e,arguments.length>=2,!0))}var Zs=P(4671);function Ys(n,e){return n===e}function Zr(n,e){return(0,Vt.e)((t,r)=>{let i=0;t.subscribe((0,Dn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var rt,yn=P(2011),$u=(P(2476),P(3942)),Or=P(9681),qi=P(4859),Ci=P(1877),xt=P(2090),eu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Di={},So=So||{},St=eu||self;function zi(){}function Ao(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qs="closure_uid_"+(1e9*Math.random()>>>0),Gu=0;function Zi(n,e,t){return n.call.apply(n.bind,arguments)}function Js(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Tn(n,e,t){return(Tn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zi:Js).apply(null,arguments)}function Yr(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _n(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function li(){this.s=this.s,this.o=this.o}var vf={};li.prototype.s=!1,li.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ki(n){return Object.prototype.hasOwnProperty.call(n,Qs)&&n[Qs]||(n[Qs]=++Gu)}(this);delete vf[n]}},li.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const En=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ef(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ao(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function rr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}rr.prototype.h=function(){this.defaultPrevented=!0};var zy=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",zi,e),St.removeEventListener("test",zi,e)}catch(t){}return n}();function Td(n){return/^[\s\xa0]*$/.test(n)}var wf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bf(n,e){return n<e?-1:n>e?1:0}function xo(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function Es(n){return-1!=xo().indexOf(n)}function Sn(n){return Sn[" "](n),n}Sn[" "]=zi;var Ro,n,Xs=Es("Opera"),tu=Es("Trident")||Es("MSIE"),zu=Es("Edge"),Pr=zu||tu,Qr=Es("Gecko")&&!(-1!=xo().toLowerCase().indexOf("webkit")&&!Es("Edge"))&&!(Es("Trident")||Es("MSIE"))&&!Es("Edge"),nu=-1!=xo().toLowerCase().indexOf("webkit")&&!Es("Edge");function Mo(){var n=St.document;return n?n.documentMode:void 0}e:{var ya="",Oo=(n=xo(),Qr?/rv:([^\);]+)(\)|;)/.exec(n):zu?/Edge\/([\d\.]+)/.exec(n):tu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nu?/WebKit\/(\S+)/.exec(n):Xs?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Oo&&(ya=Oo?Oo[1]:""),tu){var Yi=Mo();if(null!=Yi&&Yi>parseFloat(ya)){Ro=String(Yi);break e}}Ro=ya}var Sd={};var Po=St.document&&tu&&(Mo()||parseInt(Ro,10))||void 0;function Jr(n,e){if(rr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qr){e:{try{Sn(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ad[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jr.X.h.call(this)}}_n(Jr,rr);var Ad={2:"touch",3:"pen",4:"mouse"};Jr.prototype.h=function(){Jr.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var eo="closure_listenable_"+(1e6*Math.random()|0),ru=0;function lg(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++ru,this.ba=this.ea=!1}function iu(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Wu(n){const e={};for(const t in n)e[t]=n[t];return e}const su="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ws(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<su.length;u++)t=su[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ci(n){this.src=n,this.g={},this.h=0}function Md(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=En(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(iu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function No(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}ci.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=No(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new lg(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var Xr="closure_lm_"+(1e6*Math.random()|0),to={};function Qi(n,e,t,r,i){if(r&&r.once)return ou(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Qi(n,e[u],t,r,i);return null}return t=V(t),n&&n[eo]?n.N(e,t,Wi(r)?!!r.capture:!!r,i):Rd(n,e,t,!1,r,i)}function Rd(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Wi(i)?!!i.capture:!!i,f=D(n);if(f||(n[Xr]=f=new ci(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function Od(){const e=C;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zy||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Pd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ou(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ou(n,e[u],t,r,i);return null}return t=V(t),n&&n[eo]?n.O(e,t,Wi(r)?!!r.capture:!!r,i):Rd(n,e,t,!0,r,i)}function rc(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)rc(n,e[u],t,r,i);else r=Wi(r)?!!r.capture:!!r,t=V(t),n&&n[eo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=No(u=n.g[e],t,r,i))&&(iu(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=D(n))&&(e=n.g[e.toString()],n=-1,e&&(n=No(e,t,r,i)),(t=-1<n?e[n]:null)&&ko(t))}function ko(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[eo])Md(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=D(e))?(Md(t,n),0==t.h&&(t.src=null,e[Xr]=null)):iu(n)}}}function Pd(n){return n in to?to[n]:to[n]="on"+n}function C(n,e){if(n.ba)n=!0;else{e=new Jr(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ko(n),n=t.call(r,e)}return n}function D(n){return(n=n[Xr])instanceof ci?n:null}var R="__closure_events_fn_"+(1e9*Math.random()>>>0);function V(n){return"function"==typeof n?n:(n[R]||(n[R]=function(e){return n.handleEvent(e)}),n[R])}function Y(){li.call(this),this.i=new ci(this),this.P=this,this.I=null}function X(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new rr(e,n);else if(e instanceof rr)e.target=e.target||n;else{var i=e;ws(e=new rr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=De(c,r,!0,e)&&i}if(i=De(c=e.g=n,r,!0,e)&&i,i=De(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=De(c=e.g=t[u],r,!1,e)&&i}function De(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var f=c.listener,y=c.ha||c.src;c.ea&&Md(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}_n(Y,li),Y.prototype[eo]=!0,Y.prototype.removeEventListener=function(n,e,t,r){rc(this,n,e,t,r)},Y.prototype.M=function(){if(Y.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)iu(t[r]);delete n.g[e],n.h--}}this.I=null},Y.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Y.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $e=St.JSON.stringify;function pt(){var n=ic;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var no,At=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gt,n=>n.reset());class gt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function An(n){St.setTimeout(()=>{throw n},0)}function Nr(n,e){no||function ro(){var n=St.Promise.resolve(void 0);no=function(){n.then(Ku)}}(),di||(no(),di=!0),ic.add(n,e)}var di=!1,ic=new class bt{constructor(){this.h=this.g=null}add(e,t){const r=At.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ku(){for(var n;n=pt();){try{n.h.call(n.g)}catch(t){An(t)}var e=At;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}di=!1}function Ji(n,e){Y.call(this),this.h=n||1,this.g=e||St,this.j=Tn(this.kb,this),this.l=Date.now()}function kr(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function hi(n,e,t){if("function"==typeof n)t&&(n=Tn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Tn(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function sc(n){n.g=hi(()=>{n.g=null,n.i&&(n.i=!1,sc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_n(Ji,Y),(rt=Ji.prototype).ca=!1,rt.R=null,rt.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),X(this,"tick"),this.ca&&(kr(this),this.start()))}},rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Ji.X.M.call(this),kr(this),delete this.g};class cg extends li{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sc(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zu(n){li.call(this),this.h=n,this.g={}}_n(Zu,li);var dg=[];function hg(n,e,t,r){Array.isArray(t)||(t&&(dg[0]=t.toString()),t=dg);for(var i=0;i<t.length;i++){var u=Qi(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function fg(n){xd(n.g,function(e,t){this.g.hasOwnProperty(t)&&ko(e)},n),n.g={}}function au(){this.g=!0}function va(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ky(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return $e(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Zu.prototype.M=function(){Zu.X.M.call(this),fg(this)},Zu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},au.prototype.Aa=function(){this.g=!1},au.prototype.info=function(){};var uu={},Zy=null;function lu(){return Zy=Zy||new Y}function Qu(n){rr.call(this,uu.Oa,n)}function Ju(n){const e=lu();X(e,new Qu(e,n))}function If(n,e){rr.call(this,uu.STAT_EVENT,n),this.stat=e}function Fr(n){const e=lu();X(e,new If(e,n))}function Cf(n,e){rr.call(this,uu.Pa,n),this.size=e}function oc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}uu.Oa="serverreachability",_n(Qu,rr),uu.STAT_EVENT="statevent",_n(If,rr),uu.Pa="timingevent",_n(Cf,rr);var ac={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},pg={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Df(){}function Fo(){}Df.prototype.h=null;var mg,bs={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Tf(){rr.call(this,"d")}function kd(){rr.call(this,"c")}function Fd(){}function Ld(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Zu(this),this.O=yg,this.T=new Ji(n=Pr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Sf}function Sf(){this.i=null,this.g="",this.h=!1}_n(Tf,rr),_n(kd,rr),_n(Fd,Df),Fd.prototype.g=function(){return new XMLHttpRequest},Fd.prototype.i=function(){return{}},mg=new Fd;var yg=45e3,Vd={},uc={};function Af(n,e,t){n.K=1,n.v=tl(Ea(e)),n.s=t,n.P=!0,_g(n,null)}function _g(n,e){n.F=Date.now(),Xu(n),n.A=Ea(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),bg(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Sf,n.g=Un(n.l,t?e:null,!n.s),0<n.N&&(n.L=new cg(Tn(n.Ka,n,n.g),n.N)),hg(n.S,n.g,"readystatechange",n.hb),e=n.H?Wu(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ju(1),function Wy(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var w=f[y].split("=");if(1<w.length){var T=w[0];w=w[1];var x=T.split("_");c=2<=x.length&&"type"==x[1]?c+(T+"=")+w+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Yy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Qy(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=io(n,t),i==uc){4==e&&(n.o=4,Fr(14),r=!1),va(n.j,n.m,null,"[Incomplete Response]");break}if(i==Vd){n.o=4,Fr(15),va(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}va(n.j,n.m,i,null),Ud(n,i)}Yy(n)&&i!=uc&&i!=Vd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),S(e),e.K=!0,Fr(11))):(va(n.j,n.m,t,"[Invalid Chunked Response]"),oo(n),el(n))}function io(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uc:(t=Number(e.substring(t,r)),isNaN(t)?Vd:(r+=1)+t>e.length?uc:(e=e.substr(r,t),n.C=r+t,e))}function Xu(n){n.V=Date.now()+n.O,Is(n,n.O)}function Is(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=oc(Tn(n.fb,n),e)}function so(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function el(n){0==n.l.G||n.I||le(n.l,n)}function oo(n){so(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,kr(n.T),fg(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ud(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pc(t.h,n)))if(!n.J&&pc(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=oc(Tn(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Z(t),al(t)}E(t),Fr(18)}if(1>=Lr(t.h)&&t.ja){try{t.ja()}catch(w){}t.ja=void 0}}else qe(t,11)}else if((n.J||t.g==n)&&Z(t),!Td(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const T=w[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const x=w[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.J=r=1.5*N,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const B=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var u=r.h;u.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&($d(u,u.h),u.h=null))}if(r.D){const re=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;re&&(r.za=re,wn(r.F,r.D,re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=ct(r,r.H?r.ka:null,r.V),c.J){Gd(r.h,c);var f=c,y=r.J;y&&f.setTimeout(y),f.B&&(so(f),Xu(f)),r.g=c}else p(r);0<t.i.length&&Kd(t)}else"stop"!=w[0]&&"close"!=w[0]||qe(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?qe(t,7):Lf(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Ju(4)}catch(w){}}function Jy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ao(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function vg(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Ao(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hE(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ao(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(rt=Ld.prototype).setTimeout=function(n){this.O=n},rt.hb=function(n){n=n.target;const e=this.L;e&&3==Cs(n)?e.l():this.Ka(n)},rt.Ka=function(n){try{if(n==this.g)e:{const T=Cs(this.g);var e=this.g.Ea();const x=this.g.aa();if(!(3>T)&&(3!=T||Pr||this.g&&(this.h.h||this.g.fa()||kf(this.g)))){this.I||4!=T||7==e||Ju(8==e||0>=x?3:2),so(this);var t=this.g.aa();this.Y=t;t:if(Yy(this)){var r=kf(this.g);n="";var i=r.length,u=4==Cs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oo(this),el(this);var c="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function Nd(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Td(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Fr(12),oo(this),el(this);break e}va(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ud(this,t)}this.P?(Qy(this,T,c),Pr&&this.i&&3==T&&(hg(this.S,this.T,"tick",this.gb),this.T.start())):(va(this.j,this.m,c,null),Ud(this,c)),4==T&&oo(this),this.i&&!this.I&&(4==T?le(this.l,this):(this.i=!1,Xu(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),oo(this),el(this)}}}catch(T){}},rt.gb=function(){if(this.g){var n=Cs(this.g),e=this.g.fa();this.C<e.length&&(so(this),Qy(this,n,e),this.i&&4!=n&&Xu(this))}},rt.cancel=function(){this.I=!0,oo(this)},rt.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Yu(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ju(3),Fr(17)),oo(this),this.o=2,el(this)):Is(this,this.V-n)};var Bd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Lo){this.h=void 0!==e?e:n.h,xf(this,n.j),this.s=n.s,this.g=n.g,cc(this,n.m),this.l=n.l,e=n.i;var t=new hc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Eg(this,t),this.o=n.o}else n&&(t=String(n).match(Bd))?(this.h=!!e,xf(this,t[1]||"",!0),this.s=dc(t[2]||""),this.g=dc(t[3]||"",!0),cc(this,t[4]),this.l=dc(t[5]||"",!0),Eg(this,t[6]||"",!0),this.o=dc(t[7]||"")):(this.h=!!e,this.i=new hc(null,this.h))}function Ea(n){return new Lo(n)}function xf(n,e,t){n.j=t?dc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Eg(n,e,t){e instanceof hc?(n.i=e,function t_(n,e){e&&!n.j&&(ao(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Hd(this,r),bg(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nl(e,Rn)),n.i=new hc(e,n.h))}function wn(n,e,t){n.i.set(e,t)}function tl(n){return wn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,rl),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function rl(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Lo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nl(e,jd,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nl(e,jd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nl(t,"/"==t.charAt(0)?Xy:Mf,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nl(t,e_)),n.join("")};var jd=/[#\/\?@]/g,Mf=/[#\?:]/g,Xy=/[#\?]/g,Rn=/[#\?@]/g,e_=/#/g;function hc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ao(n){n.g||(n.g=new Map,n.h=0,n.i&&function lc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Hd(n,e){ao(n),e=il(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function wg(n,e){return ao(n),e=il(n,e),n.g.has(e)}function bg(n,e,t){Hd(n,e),0<t.length&&(n.i=null,n.g.set(il(n,e),nc(t)),n.h+=t.length)}function il(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function n_(n){this.l=n||r_,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ga&&St.g.Ga()&&St.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=hc.prototype).add=function(n,e){ao(this),this.i=null,n=il(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){ao(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},rt.oa=function(){ao(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},rt.W=function(n){ao(this);let e=[];if("string"==typeof n)wg(this,n)&&(e=e.concat(this.g.get(il(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return ao(this),this.i=null,wg(this,n=il(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var r_=10;function sl(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Lr(n){return n.h?1:n.g?n.g.size:0}function pc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $d(n,e){n.g?n.g.add(e):n.h=e}function Gd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ir(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nc(n.i)}function Vo(){}function qd(){this.g=new Vo}function i_(n,e,t){const r=t||"";try{Jy(n,function(i,u){let c=i;Wi(i)&&(c=$e(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gc(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function _r(n){this.l=n.$b||null,this.j=n.ib||!1}function Uo(n,e){Y.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=zd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}n_.prototype.cancel=function(){if(this.i=ir(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vo.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},Vo.prototype.parse=function(n){return St.JSON.parse(n,void 0)},_n(_r,Df),_r.prototype.g=function(){return new Uo(this.l,this.j)},_r.prototype.i=function(n){return function(){return n}}({}),_n(Uo,Y);var zd=0;function Of(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function cu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,du(n)}function du(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Uo.prototype).open=function(n,e){if(this.readyState!=zd)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,du(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cu(this)),this.readyState=zd},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,du(this)),this.g&&(this.readyState=3,du(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Of(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cu(this):du(this),3==this.readyState&&Of(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,cu(this))},rt.Ta=function(n){this.g&&(this.response=n,cu(this))},rt.ga=function(){this.g&&cu(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pf=St.JSON.parse;function zn(n){Y.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ig,this.K=this.L=!1}_n(zn,Y);var Ig="",uo=/^https?$/i,Cg=["POST","PUT"];function mc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Dg(n),vr(n)}function Dg(n){n.D||(n.D=!0,X(n,"complete"),X(n,"error"))}function Nf(n){if(n.h&&void 0!==So&&(!n.C[1]||4!=Cs(n)||2!=n.aa()))if(n.v&&4==Cs(n))hi(n.Ha,0,n);else if(X(n,"readystatechange"),4==Cs(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Bd)[1]||null;if(!i&&St.self&&St.self.location){var u=St.self.location.protocol;i=u.substr(0,u.length-1)}r=!uo.test(i?i.toLowerCase():"")}t=r}if(t)X(n,"complete"),X(n,"success");else{n.m=6;try{var c=2<Cs(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.aa()+"]",Dg(n)}}finally{vr(n)}}}function vr(n,e){if(n.g){Wd(n);const t=n.g,r=n.C[0]?zi:null;n.g=null,n.C=null,e||X(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Wd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function Cs(n){return n.g?n.g.readyState:0}function kf(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ig:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function lo(n){let e="";return xd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function hu(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lo(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wn(n,e,t))}function ol(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ff(n){this.Ca=0,this.i=[],this.j=new au,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=ol("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=ol("baseRetryDelayMs",5e3,n),this.ab=ol("retryDelaySeedMs",1e4,n),this.Za=ol("forwardChannelMaxRetries",2,n),this.ta=ol("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new n_(n&&n.concurrentRequestLimit),this.Fa=new qd,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Lf(n){if(Tg(n),3==n.G){var e=n.U++,t=Ea(n.F);wn(t,"SID",n.I),wn(t,"RID",e),wn(t,"TYPE","terminate"),_(n,t),(e=new Ld(n,n.j,e,void 0)).K=2,e.v=tl(Ea(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=Un(e.l,null),e.g.da(e.v)),e.F=Date.now(),Xu(e)}_t(n)}function al(n){n.g&&(S(n),n.g.cancel(),n.g=null)}function Tg(n){al(n),n.u&&(St.clearTimeout(n.u),n.u=null),Z(n),n.h.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function Kd(n){sl(n.h)||n.m||(n.m=!0,Nr(n.Ja,n),n.C=0)}function Ds(n,e){var t;t=e?e.m:n.U++;const r=Ea(n.F);wn(r,"SID",n.I),wn(r,"RID",t),wn(r,"AID",n.T),_(n,r),n.o&&n.s&&hu(r,n.o,n.s),t=new Ld(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=h(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),$d(n.h,t),Af(t,r,e)}function _(n,e){n.ia&&xd(n.ia,function(t,r){wn(e,r,t)}),n.l&&Jy({},function(t,r){wn(e,r,t)})}function h(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Tn(n.l.Qa,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let w=i[y].h;const T=i[y].g;if(w-=u,0>w)u=Math.max(0,i[y].h-100),f=!1;else try{i_(T,c,"req"+w+"_")}catch(x){r&&r(T)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function p(n){n.g||n.u||(n.Z=1,Nr(n.Ia,n),n.A=0)}function E(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=oc(Tn(n.Ia,n),Fe(n,n.A)),n.A++,0))}function S(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function O(n){n.g=new Ld(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ea(n.sa);wn(e,"RID","rpc"),wn(e,"SID",n.I),wn(e,"CI",n.L?"0":"1"),wn(e,"AID",n.T),wn(e,"TYPE","xmlhttp"),_(n,e),n.o&&n.s&&hu(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=tl(Ea(e)),t.s=null,t.P=!0,_g(t,n)}function Z(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function le(n,e){var t=null;if(n.g==e){Z(n),S(n),n.g=null;var r=2}else{if(!pc(n.h,e))return;t=e.D,Gd(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;X(r=lu(),new Cf(r,t,e,i)),Kd(n)}else p(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function ul(n,e){return!(Lr(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=oc(Tn(n.Ja,n,e),Fe(n,n.C)),n.C++,0)))}(n,e)||2==r&&E(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:qe(n,5);break;case 4:qe(n,10);break;case 3:qe(n,6);break;default:qe(n,2)}}function Fe(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function qe(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Tn(n.jb,n);t||(t=new Lo("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||xf(t,"https"),tl(t)),function Rf(n,e){const t=new au;if(St.Image){const r=new Image;r.onload=Yr(gc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yr(gc,t,r,"TestLoadImage: error",!1,e),r.onabort=Yr(gc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yr(gc,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fr(2);n.G=0,n.l&&n.l.va(e),_t(n),Tg(n)}function _t(n){if(n.G=0,n.la=[],n.l){const e=ir(n.h);(0!=e.length||0!=n.i.length)&&(Ef(n.la,e),Ef(n.la,n.i),n.h.i.length=0,nc(n.i),n.i.length=0),n.l.ua()}}function ct(n,e,t){var r=t instanceof Lo?Ea(t):new Lo(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),cc(r,r.m);else{var i=St.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Lo(null,void 0);r&&xf(u,r),e&&(u.g=e),i&&cc(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&wn(r,t,e),wn(r,"VER",n.ma),_(n,r),r}function Un(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new zn(t&&n.Da&&!n.ra?new _r({ib:!0}):n.ra)).L=n.H,e}function fi(){}function wa(){if(tu&&!(10<=Number(Po)))throw Error("Environmental error: no available transport.")}function Ti(n,e){Y.call(this),this.g=new Ff(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Td(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Td(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ba(this)}function Bo(n){Tf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function yc(){kd.call(this),this.status=1}function ba(n){this.g=n}(rt=zn.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mg.g(),this.C=function gg(n){return n.h||(n.h=n.i())}(this.u?this.u:mg),this.g.onreadystatechange=Tn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void mc(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=St.FormData&&n instanceof St.FormData,!(0<=En(Cg,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wd(this),0<this.B&&((this.K=function s_(n){return tu&&function ug(){return function qu(n){var e=Sd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wf(String(Ro)).split("."),t=wf("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=bf(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||bf(0==i[2].length,0==u[2].length)||bf(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.qa,this)):this.A=hi(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){mc(this,u)}},rt.qa=function(){void 0!==So&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,X(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,X(this,"complete"),X(this,"abort"),vr(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vr(this,!0)),zn.X.M.call(this)},rt.Ha=function(){this.s||(this.F||this.v||this.l?Nf(this):this.eb())},rt.eb=function(){Nf(this)},rt.aa=function(){try{return 2<Cs(this)?this.g.status:-1}catch(n){return-1}},rt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pf(e)}},rt.Ea=function(){return this.m},rt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Ff.prototype).ma=8,rt.G=1,rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ld(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Wu(u),ws(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=h(this,i,e),wn(t=Ea(this.F),"RID",n),wn(t,"CVER",22),this.D&&wn(t,"X-HTTP-Session-Id",this.D),_(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(lo(u)))+"&"+e:this.o&&hu(t,this.o,u)),$d(this.h,i),this.Xa&&wn(t,"TYPE","init"),this.O?(wn(t,"$req",e),wn(t,"SID","null"),i.Z=!0,Af(i,t,null)):Af(i,t,e),this.G=2}}else 3==this.G&&(n?Ds(this,n):0==this.i.length||sl(this.h)||Ds(this))},rt.Ia=function(){if(this.u=null,O(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=oc(Tn(this.cb,this),n)}},rt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fr(10),al(this),O(this))},rt.bb=function(){null!=this.v&&(this.v=null,al(this),E(this),Fr(19))},rt.jb=function(n){n?(this.j.info("Successfully pinged google.com"),Fr(2)):(this.j.info("Failed to ping google.com"),Fr(1))},(rt=fi.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Qa=function(){},wa.prototype.g=function(n,e){return new Ti(n,e)},_n(Ti,Y),Ti.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Fr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ct(n,null,n.V),Kd(n)},Ti.prototype.close=function(){Lf(this.g)},Ti.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$e(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Kd(e)},Ti.prototype.M=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,Ti.X.M.call(this)},_n(Bo,Tf),_n(yc,kd),_n(ba,fi),ba.prototype.xa=function(){X(this.g,"a")},ba.prototype.wa=function(n){X(this.g,new Bo(n))},ba.prototype.va=function(n){X(this.g,new yc(n))},ba.prototype.ua=function(){X(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,Ti.prototype.send=Ti.prototype.u,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,ac.NO_ERROR=0,ac.TIMEOUT=8,ac.HTTP_ERROR=6,pg.COMPLETE="complete",Fo.EventType=bs,bs.OPEN="a",bs.CLOSE="b",bs.ERROR="c",bs.MESSAGE="d",Y.prototype.listen=Y.prototype.N,zn.prototype.listenOnce=zn.prototype.O,zn.prototype.getLastError=zn.prototype.Na,zn.prototype.getLastErrorCode=zn.prototype.Ea,zn.prototype.getStatus=zn.prototype.aa,zn.prototype.getResponseJson=zn.prototype.Ra,zn.prototype.getResponseText=zn.prototype.fa,zn.prototype.send=zn.prototype.da;var Vf=Di.createWebChannelTransport=function(){return new wa},Zd=Di.getStatEventTarget=function(){return lu()},Yd=Di.ErrorCode=ac,Uf=Di.EventType=pg,Sg=Di.Event=uu,Ag=Di.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bf=Di.FetchXmlHttpFactory=_r,Qd=Di.WebChannel=Fo,fE=Di.XhrIo=zn;const xg="@firebase/firestore";class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let ll="9.10.0";const cl=new Ci.Yd("@firebase/firestore");function o_(){return cl.logLevel}function Pe(n,...e){if(cl.logLevel<=Ci.in.DEBUG){const t=e.map(Mg);cl.debug(`Firestore (${ll}): ${n}`,...t)}}function bn(n,...e){if(cl.logLevel<=Ci.in.ERROR){const t=e.map(Mg);cl.error(`Firestore (${ll}): ${n}`,...t)}}function dl(n,...e){if(cl.logLevel<=Ci.in.WARN){const t=e.map(Mg);cl.warn(`Firestore (${ll}): ${n}`,...t)}}function Mg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+n;throw bn(e),new Error(e)}function Ct(n,e){n||it()}function Ye(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class a_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Er.UNAUTHENTICATED))}shutdown(){}}class Og{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gE{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new dr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const w=c;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield u(r.currentUser)}))},y=w=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new dr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new a_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Er(e)}}class u_{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class mE{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new u_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jf{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new Pg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class _E{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yE(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function _c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ng(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new On(0,0))}static max(){return new Mt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jd{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Jd{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const vE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Jd{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return vE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Qt.fromString(e))}static fromName(e){return new ze(Qt.fromString(e).popFirst(5))}static empty(){return new ze(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Qt(e.slice()))}}class Xi{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function l_(n){return n.fields.find(e=>2===e.kind)}function hl(n){return n.fields.filter(e=>2!==e.kind)}Xi.UNKNOWN_ID=-1;class kg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hf(0,Ts.min())}}function c_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Ts(i,ze.empty(),e)}function EE(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(Mt.min(),ze.empty(),-1)}static max(){return new Ts(Mt.max(),ze.empty(),-1)}}function d_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const kt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fu(n){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,me.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==kt)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Fg.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const u=e.length,c=new Array(u);let f=0;for(let y=0;y<u;y++){const w=y;t(e[w]).next(T=>{c[w]=T,++f,f===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new se((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class es{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new dr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new vc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=wE(r.target.error);this.P.reject(new vc(e,i))}}static open(e,t,r,i){try{return new es(t,e.transaction(i,r))}catch(u){throw new vc(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new f_(t)}}class co{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===co.D((0,xt.z$)())&&bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),fl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,xt.hl)())return!1;if(co.N())return!0;const e=(0,xt.z$)(),t=co.D(e),r=0<t&&t<10,i=co.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new vc(e,f))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.F(e);const y=es.open(u.db,e,c?"readonly":"readwrite",r),w=i(y).next(T=>(y.V(),T)).catch(T=>(y.abort(T),se.reject(T))).toPromise();return w.catch(()=>{}),yield y.v,w}catch(y){const w=y,T="FirebaseError"!==w.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),u.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return fl(this.U.delete())}}class vc extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function pi(n){return"IndexedDbTransactionError"===n.name}class f_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fl(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),fl(this.store.add(e))}get(e){return fl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),fl(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),fl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new se((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=u=>{const c=wE(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}H(e,t){const r=[];return new se((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new bC(f),w=t(f.primaryKey,f.value,y);if(w instanceof se){const T=w.catch(x=>(y.done(),se.reject(x)));r.push(T)}y.isDone?i():null===y.G?f.continue():f.continue(y.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fl(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wE(r.target.error);t(i)}})}let Lg=!1;function wE(n){const e=co.D((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lg||(Lg=!0,setTimeout(()=>{throw r},0)),r}}return n}class bE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){pi(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fu(r)}yield t.nt(6e4)}))}}class _A{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return se.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(f=>{i-=f,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(f=>(Pe("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=EE(u);d_(c,r)>0&&(r=c)}),new Ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function $f(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ei.at=-1;class Bn{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new p_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new p_(this.root,e,this.comparator,!1)}getReverseIterator(){return new p_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new p_(this.root,e,this.comparator,!0)}}class p_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:ti.RED,this.left=null!=i?i:ti.EMPTY,this.right=null!=u?u:ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xd(n){return n.hasNext()?n.getNext():void 0}class ts{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new ts([])}unionWith(e){let t=new vn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const EA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gu(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=EA.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ec(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function Gf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IC(n){const e=n.mapValue.fields.__previous_value__;return Gf(e)?IC(e):e}function Ug(n){const e=gu(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class wA{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class wc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}function Bg(n){return null==n}function jg(n){return 0===n&&1/n==-1/0}function CC(n){return"number"==typeof n&&Number.isInteger(n)&&!jg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const bc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},g_={nullValue:"NULL_VALUE"};function eh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gf(n)?4:v_(n)?9007199254740991:10:it()}function ni(n,e){if(n===e)return!0;const t=eh(n);if(t!==eh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ug(n).isEqual(Ug(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=gu(r.timestampValue),c=gu(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ec(n.bytesValue).isEqual(Ec(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Wn(r.geoPointValue.latitude)===Wn(i.geoPointValue.latitude)&&Wn(r.geoPointValue.longitude)===Wn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Wn(r.integerValue)===Wn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Wn(r.doubleValue),c=Wn(i.doubleValue);return u===c?jg(u)===jg(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if($f(u)!==$f(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!ni(u[f],c[f])))return!1;return!0}(n,e);default:return it()}var i}function Ic(n,e){return void 0!==(n.values||[]).find(t=>ni(t,e))}function pl(n,e){if(n===e)return 0;const t=eh(n),r=eh(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Wn(i.integerValue||i.doubleValue),f=Wn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return m_(n.timestampValue,e.timestampValue);case 4:return m_(Ug(n),Ug(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Ec(i),f=Ec(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const w=Nt(c[y],f[y]);if(0!==w)return w}return Nt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Nt(Wn(i.latitude),Wn(u.latitude));return 0!==c?c:Nt(Wn(i.longitude),Wn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const w=pl(c[y],f[y]);if(w)return w}return Nt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===bc.mapValue&&u===bc.mapValue)return 0;if(i===bc.mapValue)return 1;if(u===bc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=u.fields||{},w=Object.keys(y);f.sort(),w.sort();for(let T=0;T<f.length&&T<w.length;++T){const x=Nt(f[T],w[T]);if(0!==x)return x;const N=pl(c[f[T]],y[w[T]]);if(0!==N)return N}return Nt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw it()}}function m_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=gu(n),r=gu(e),i=Nt(t.seconds,r.seconds);return 0!==i?i:Nt(t.nanos,r.nanos)}function gl(n){return Hg(n)}function Hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=gu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ec(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Hg(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${Hg(r.fields[f])}`;return u+"}"}(n.mapValue):it();var e}function mu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function y_(n){return!!n&&"integerValue"in n}function ho(n){return!!n&&"arrayValue"in n}function __(n){return!!n&&"nullValue"in n}function CE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function th(n){return!!n&&"mapValue"in n}function qf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DC(n){return"nullValue"in n?g_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mu(wc.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function TC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mu(wc.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bc:it()}function nh(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cc(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qf(t)}setAll(e){let t=Qn.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=qf(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];th(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pu(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new br(qf(this.value))}}function Dc(n){const e=[];return pu(n.fields,(t,r)=>{const i=new Qn([t]);if(th(r)){const u=Dc(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new ts(e)}class dn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new dn(e,0,Mt.min(),Mt.min(),br.empty(),0)}static newFoundDocument(e,t,r){return new dn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new dn(e,2,t,Mt.min(),br.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Mt.min(),br.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rh{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.ht=null}}function DE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new rh(n,e,t,r,i,u,c)}function ml(n){const e=Ye(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+gl(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Bg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gl(r)).join(",")),e.ht=t}return e.ht}function Tc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!IA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ni(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E_(n.startAt,e.startAt)&&E_(n.endAt,e.endAt)}function ih(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zf(n,e){return n.filters.filter(t=>t instanceof Vr&&t.field.isEqual(e))}function Wf(n,e,t){let r=g_,i=!0;for(const u of zf(n,e)){let c=g_,f=!0;switch(u.op){case"<":case"<=":c=DC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=g_}nh({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];nh({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function SE(n,e,t){let r=bc,i=!0;for(const u of zf(n,e)){let c=bc,f=!0;switch(u.op){case">=":case">":c=TC(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=bc}Cc({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Cc({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Vr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new bA(e,t,r):"array-contains"===t?new RE(e,r):"in"===t?new SC(e,r):"not-in"===t?new AC(e,r):"array-contains-any"===t?new Ss(e,r):new Vr(e,t,r)}static lt(e,t,r){return"in"===t?new AE(e,r):new xE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(pl(t,this.value)):null!==t&&eh(this.value)===eh(t)&&this.ft(pl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bA extends Vr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class AE extends Vr{constructor(e,t){super(e,"in",t),this.keys=ME(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xE extends Vr{constructor(e,t){super(e,"not-in",t),this.keys=ME(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ME(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class RE extends Vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ho(t)&&Ic(t.arrayValue,this.value)}}class SC extends Vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ic(this.value.arrayValue,t)}}class AC extends Vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ic(this.value.arrayValue,t)}}class Ss extends Vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ho(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ic(this.value.arrayValue,r))}}class yl{constructor(e,t){this.position=e,this.inclusive=t}}class sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function IA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):pl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function E_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ni(n.position[t],e.position[t]))return!1;return!0}class _l{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this._t=null,this.wt=null}}function OE(n,e,t,r,i,u,c,f){return new _l(n,e,t,r,i,u,c,f)}function vl(n){return new _l(n)}function w_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function b_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function I_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function C_(n){return null!==n.collectionGroup}function Sc(n){const e=Ye(n);if(null===e._t){e._t=[];const t=I_(e),r=b_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new sh(t)),e._t.push(new sh(Qn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new sh(Qn.keyField(),u))}}}return e._t}function ns(n){const e=Ye(n);if(!e.wt)if("F"===e.limitType)e.wt=DE(e.path,e.collectionGroup,Sc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Sc(e))t.push(new sh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new yl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new yl(e.startAt.position,e.startAt.inclusive):null;e.wt=DE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Kf(n,e,t){return new _l(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zf(n,e){return Tc(ns(n),ns(e))&&n.limitType===e.limitType}function PE(n){return`${ml(ns(n))}|lt:${n.limitType}`}function $g(n){return`Query(target=${function TE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gl(r.value)}`;var r}).join(", ")}]`),Bg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gl(t)).join(",")),`Target(${e})`}(ns(n))}; limitType=${n.limitType})`}function Gg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=xC(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Sc(t),r)||t.endAt&&!function(i,u,c){const f=xC(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Sc(t),r)));var t,r}function NE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jo(n){return(e,t)=>{let r=!1;for(const i of Sc(n)){const u=D_(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function D_(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?pl(f,y):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function kE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jg(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function MC(n,e){return CC(e)?FE(e):kE(n,e)}class Yf{constructor(){this._=void 0}}function RC(n,e,t){return n instanceof El?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Ac?VE(n,e):n instanceof Ia?qg(n,e):function(r,i){const u=LE(r,i),c=zg(u)+zg(r.yt);return y_(u)&&y_(r.yt)?FE(c):kE(r.It,c)}(n,e)}function OC(n,e,t){return n instanceof Ac?VE(n,e):n instanceof Ia?qg(n,e):t}function LE(n,e){return n instanceof oh?y_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class El extends Yf{}class Ac extends Yf{constructor(e){super(),this.elements=e}}function VE(n,e){const t=Wg(e);for(const r of n.elements)t.some(i=>ni(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ia extends Yf{constructor(e){super(),this.elements=e}}function qg(n,e){let t=Wg(e);for(const r of n.elements)t=t.filter(i=>!ni(i,r));return{arrayValue:{values:t}}}class oh extends Yf{constructor(e,t){super(),this.It=e,this.yt=t}}function zg(n){return Wn(n.integerValue||n.doubleValue)}function Wg(n){return ho(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ah{constructor(e,t){this.field=e,this.transform=t}}class NC{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function T_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Kg{}function S_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new wl(n.key,xn.none()):new rs(n.key,n.data,xn.none());{const t=n.data,r=br.empty();let i=new vn(Qn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new fo(n.key,r,new ts(i.toArray()),xn.none())}}function UE(n,e,t){n instanceof rs?function(r,i,u){const c=r.value.clone(),f=HE(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof fo?function(r,i,u){if(!T_(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=HE(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(jE(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uh(n,e,t,r){return n instanceof rs?function(i,u,c,f){if(!T_(i.precondition,u))return c;const y=i.value.clone(),w=kC(i.fieldTransforms,f,u);return y.setAll(w),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof fo?function(i,u,c,f){if(!T_(i.precondition,u))return c;const y=kC(i.fieldTransforms,f,u),w=u.data;return w.setAll(jE(i)),w.setAll(y),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,T_(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function BE(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=LE(r.transform,i||null);null!=u&&(null===t&&(t=br.empty()),t.set(r.field,u))}return t||null}function A_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&_c(t,r,(i,u)=>function PC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ac&&r instanceof Ac||t instanceof Ia&&r instanceof Ia?_c(t.elements,r.elements,ni):t instanceof oh&&r instanceof oh?ni(t.yt,r.yt):t instanceof El&&r instanceof El);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rs extends Kg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fo extends Kg{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HE(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,OC(c,f,t[i]))}return r}function kC(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,RC(u,c,e))}return r}class wl extends Kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zg extends Kg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class x_{constructor(e){this.count=e}}var jn,Jt;function Yg(n){switch(n){default:return it();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function M_(n){if(void 0===n)return bn("GRPC error has no .code"),he.UNKNOWN;switch(n){case jn.OK:return he.OK;case jn.CANCELLED:return he.CANCELLED;case jn.UNKNOWN:return he.UNKNOWN;case jn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case jn.INTERNAL:return he.INTERNAL;case jn.UNAVAILABLE:return he.UNAVAILABLE;case jn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case jn.NOT_FOUND:return he.NOT_FOUND;case jn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case jn.ABORTED:return he.ABORTED;case jn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case jn.DATA_LOSS:return he.DATA_LOSS;default:return it()}}(Jt=jn||(jn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";class yu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return Vg(this.inner)}size(){return this.innerSize}}const $E=new Bn(ze.comparator);function is(){return $E}const Qg=new Bn(ze.comparator);function Qf(...n){let e=Qg;for(const t of n)e=e.insert(t.key,t);return e}function GE(n){let e=Qg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ho(){return lh()}function xc(){return lh()}function lh(){return new yu(n=>n.toString(),(n,e)=>n.isEqual(e))}const FC=new Bn(ze.comparator),LC=new vn(ze.comparator);function Rt(...n){let e=LC;for(const t of n)e=e.add(t);return e}const VC=new vn(Nt);function Jg(){return VC}class Jf{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Jf(Mt.min(),r,Jg(),is(),Rt())}}class Xf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Xf(wr.EMPTY_BYTE_STRING,t,Rt(),Rt(),Rt())}}class ss{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Xg{constructor(e,t){this.targetId=e,this.At=t}}class R_{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class O_{constructor(){this.Rt=0,this.bt=zE(),this.Pt=wr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Rt(),t=Rt(),r=Rt();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Xf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=zE()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class qE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=is(),this.qt=P_(),this.Kt=new vn(Nt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(ih(u))if(0===r){const c=new ze(u.path);this.jt(t,c,dn.newNoDocument(c,Mt.min()))}else Ct(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const f=this.Xt(c);if(f){if(u.current&&ih(f.target)){const y=new ze(f.target.path);null!==this.Ut.get(y)||this.ee(c,y)||this.jt(c,y,dn.newNoDocument(y,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Rt();this.qt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const w=this.Xt(y);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Jf(e,t,this.Kt,this.Ut,r);return this.Ut=is(),this.qt=P_(),this.Kt=new vn(Nt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new O_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new vn(Nt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new O_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function P_(){return new Bn(ze.comparator)}function zE(){return new Bn(ze.comparator)}const UC={asc:"ASCENDING",desc:"DESCENDING"},BC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class jC{constructor(e,t){this.databaseId=e,this.gt=t}}function ch(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HC(n,e){return n.gt?e.toBase64():e.toUint8Array()}function WE(n,e){return ch(n,e.toTimestamp())}function Ur(n){return Ct(!!n),Mt.fromTimestamp(function(e){const t=gu(e);return new On(t.seconds,t.nanos)}(n))}function N_(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $C(n){const e=Qt.fromString(n);return Ct(Mc(e)),e}function em(n,e){return N_(n.databaseId,e.path)}function po(n,e){const t=$C(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(GC(t))}function k_(n,e){return N_(n.databaseId,e)}function F_(n){const e=$C(n);return 4===e.length?Qt.emptyPath():GC(e)}function dh(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GC(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function go(n,e,t){return{name:em(n,e),fields:t.value.mapValue.fields}}function qC(n,e,t){const r=po(n,e.name),i=Ur(e.updateTime),u=new br({mapValue:{fields:e.fields}}),c=dn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function hh(n,e){let t;if(e instanceof rs)t={update:go(n,e.key,e.value)};else if(e instanceof wl)t={delete:em(n,e.key)};else if(e instanceof fo)t={update:go(n,e.key,e.data),updateMask:im(e.fieldMask)};else{if(!(e instanceof Zg))return it();t={verify:em(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof El)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ac)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ia)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof oh)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:WE(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function tm(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?xn.updateTime(Ur(i.updateTime)):void 0!==i.exists?xn.exists(i.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),f=new El):"appendMissingElements"in c?f=new Ac(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Ia(c.removeAllFromArray.values||[]):"increment"in c?f=new oh(u,c.increment):it();const y=Qn.fromServerFormat(c.fieldPath);return new ah(y,f)}(n,i)):[];var i;if(e.update){const i=po(n,e.update.name),u=new br({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ts((e.updateMask.fieldPaths||[]).map(w=>Qn.fromServerFormat(w)));return new fo(i,u,c,t,r)}return new rs(i,u,t,r)}if(e.delete){const i=po(n,e.delete);return new wl(i,t)}if(e.verify){const i=po(n,e.verify);return new Zg(i,t)}return it()}function WC(n,e){return{documents:[k_(n,e.path)]}}function L_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=k_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=k_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(T=>function(x){if("=="===x.op){if(CE(x.value))return{unaryFilter:{field:fh(x.field),op:"IS_NAN"}};if(__(x.value))return{unaryFilter:{field:fh(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(CE(x.value))return{unaryFilter:{field:fh(x.field),op:"IS_NOT_NAN"}};if(__(x.value))return{unaryFilter:{field:fh(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fh(x.field),op:YC(x.op),value:x.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(w=>{return{field:fh((T=w).field),direction:ZC(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(w=e.limit,n.gt||Bg(w)?w:{value:w});var w,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function nm(n){let e=F_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=rm(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new sh(ph((x=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(T){let x;return x="object"==typeof T?T.value:T,Bg(x)?null:x}(t.limit));let y=null;var T;t.startAt&&(y=new yl((T=t.startAt).values||[],!!T.before));let w=null;return t.endAt&&(w=function(T){return new yl(T.values||[],!T.before)}(t.endAt)),OE(e,i,c,u,f,"F",y,w)}function rm(n){return n?void 0!==n.unaryFilter?[JC(n)]:void 0!==n.fieldFilter?[QC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>rm(e)).reduce((e,t)=>e.concat(t)):it():[]}function ZC(n){return UC[n]}function YC(n){return BC[n]}function fh(n){return{fieldPath:n.canonicalString()}}function ph(n){return Qn.fromServerFormat(n.fieldPath)}function QC(n){return Vr.create(ph(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function JC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ph(n.unaryFilter.field);return Vr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ph(n.unaryFilter.field);return Vr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ph(n.unaryFilter.field);return Vr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ph(n.unaryFilter.field);return Vr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function im(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mc(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZE(e)),e=ep(n.get(t),e);return ZE(e)}function ep(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ZE(n){return n+"\x01\x01"}function Ca(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&it(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:it()}u=c+2}return new Qt(r)}const sm=["userId","batchId"];function As(n,e){return[n,Si(e)]}function gh(n,e,t){return[n,Si(e),t]}const gi={},Rc=["prefixPath","collectionGroup","readTime","documentId"],om=["prefixPath","collectionGroup","documentId"],mo=["collectionGroup","readTime","prefixPath","documentId"],V_=["canonicalId","targetId"],mh=["targetId","path"],yh=["path","targetId"],_h=["collectionId","parent"],vh=["indexId","uid"],Eh=["uid","sequenceNumber"],wh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bh=["indexId","uid","orderedDocumentKey"],Ih=["userId","collectionPath","documentId"],Ch=["userId","collectionPath","largestBatchId"],YE=["userId","collectionGroup","largestBatchId"],U_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QE=[...U_,"documentOverlays"],B_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],j_=B_,JE=[...j_,"indexConfiguration","indexState","indexEntries"];class am extends h_{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ir(n,e){const t=Ye(n);return co.O(t.ie,e)}class um{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&UE(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xc();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(i.key)?null:f;const y=S_(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rt())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(t,r)=>A_(t,r))&&_c(this.baseMutations,e.baseMutations,(t,r)=>A_(t,r))}}class H_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=FC;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new H_(e,t,r,i)}}class lm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bl{constructor(e,t,r,i,u=Mt.min(),c=Mt.min(),f=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class XE{constructor(e){this.re=e}}function tw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:em(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ch(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Il(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Il(e.version)}}var i,u;return r}function cm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oc(n){const e=new On(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Cl(n,e){const t=(e.baseMutations||[]).map(u=>tm(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>tm(n.re,u)),i=On.fromMillis(e.localWriteTimeMs);return new um(e.batchId,i,t,r)}function tp(n){const e=Oc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Oc(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=ns(vl(F_(i.documents[0])))):r=ns(nm(n.query)),new bl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function nw(n,e){const t=Il(e.snapshotVersion),r=Il(e.lastLimboFreeSnapshotVersion);let i;i=ih(e.target)?WC(n.re,e.target):L_(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ml(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rw(n){const e=nm({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Kf(e,e.limit,"L"):e}function $_(n,e){return new lm(e.largestBatchId,tm(n.re,e.overlayMutation))}function dm(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function hm(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Il(r.readTime),documentKey:Si(r.documentKey.path),largestBatchId:r.largestBatchId}}class XC{getBundleMetadata(e,t){return eD(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Oc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return eD(e).put({bundleId:(r=t).id,createTime:Il(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tD(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:rw(i.bundledQuery),readTime:Oc(i.readTime)};var i})}saveNamedQuery(e,t){return tD(e).put({name:(r=t).name,readTime:Il(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eD(n){return Ir(n,"bundles")}function tD(n){return Ir(n,"namedQueries")}class G_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new G_(e,t.uid||"")}getOverlay(e,t){return np(e).get(dm(this.userId,t)).next(r=>r?$_(this.It,r):null)}getOverlays(e,t){const r=Ho();return se.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new lm(t,c);i.push(this.ue(e,f))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Si(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(np(e).Y("collectionPathOverlayIndex",f))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Ho(),u=Si(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return np(e).W("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const w=$_(this.It,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Ho();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return np(e).Z({index:"collectionGroupOverlayIndex",range:f},(y,w,T)=>{const x=$_(this.It,w);u.size()<i||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return np(e).put(function(r,i,u){const[c,f,y]=dm(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:hh(r.re,u.mutation)}}(this.It,this.userId,t))}}function np(n){return Ir(n,"documentOverlays")}class Dl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),jg(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ec(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?v_(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):it()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function DA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function iw(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=DA(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Dl.Te=new Dl;class Dh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=iw(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=iw(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nD{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class sw{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class rp{constructor(){this.Be=new Dh,this.Le=new nD(this.Be),this.Ue=new sw(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Tl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tl(this.indexId,this.documentKey,this.arrayValue,r)}}function Da(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ow(n.arrayValue,e.arrayValue),0!==t?t:(t=ow(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function ow(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class aw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=l_(e);if(void 0!==t&&!this.ze(t))return!1;const r=hl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rD{constructor(){this.Ye=new q_}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ts.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class q_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Qt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Qt.comparator)).toArray()}}const fm=new Uint8Array(0);class iD{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new q_,this.Ze=new yu(r=>ml(r),(r,i)=>Tc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Si(i)};return uw(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ng(t),""],!1,!0);return uw(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ca(c.parent))}return r})}addFieldIndex(e,t){const r=pm(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Sh(e);return u.next(f=>{c.put(hm(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=pm(e),i=Sh(e),u=Th(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Th(e);let i=!0;const u=new Map;return se.forEach(this.tn(t),c=>this.en(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=Rt();const f=[];return se.forEach(u,(y,w)=>{var T;Pe("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${ml(t)}`);const x=function(Xe,Ge){const mt=l_(Ge);if(void 0===mt)return null;for(const wt of zf(Xe,mt.fieldPath))switch(wt.op){case"array-contains-any":return wt.value.arrayValue.values||[];case"array-contains":return[wt.value]}return null}(w,y),N=function(Xe,Ge){const mt=new Map;for(const wt of hl(Ge))for(const Ht of zf(Xe,wt.fieldPath))switch(Ht.op){case"==":case"in":mt.set(wt.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return mt.set(wt.fieldPath.canonicalString(),Ht.value),Array.from(mt.values())}return null}(w,y),L=function(Xe,Ge){const mt=[];let wt=!0;for(const Ht of hl(Ge)){const Tr=0===Ht.kind?Wf(Xe,Ht.fieldPath,Xe.startAt):SE(Xe,Ht.fieldPath,Xe.startAt);mt.push(Tr.value),wt&&(wt=Tr.inclusive)}return new yl(mt,wt)}(w,y),B=function(Xe,Ge){const mt=[];let wt=!0;for(const Ht of hl(Ge)){const Tr=0===Ht.kind?SE(Xe,Ht.fieldPath,Xe.endAt):Wf(Xe,Ht.fieldPath,Xe.endAt);mt.push(Tr.value),wt&&(wt=Tr.inclusive)}return new yl(mt,wt)}(w,y),re=this.nn(y,w,L),_e=this.nn(y,w,B),Le=this.sn(y,w,N),Qe=this.rn(y.indexId,x,re,L.inclusive,_e,B.inclusive,Le);return se.forEach(Qe,Xe=>r.J(Xe,t.limit).next(Ge=>{Ge.forEach(mt=>{const wt=ze.fromSegments(mt.documentKey);c.has(wt)||(c=c.add(wt),f.push(wt))})}))}).next(()=>f)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,u.length),w=y/(null!=t?t.length:1),T=[];for(let x=0;x<y;++x){const N=t?this.on(t[x/w]):fm,L=this.un(e,N,r[x%w],i),B=this.cn(e,N,u[x%w],c),re=f.map(_e=>this.un(e,N,_e,!0));T.push(...this.createRange(L,B,re))}return T}un(e,t,r,i){const u=new Tl(e,ze.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new Tl(e,ze.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new aw(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.We(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new vn(Qn.comparator),y=!1;for(const w of c.filters){const T=w;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:f=f.add(T.field))}for(const w of c.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new rp;for(const i of hl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);Dl.Te.ce(u,c)}return r.$e()}on(e){const t=new rp;return Dl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new rp;return Dl.Te.ce(mu(this.databaseId,t),r.qe(function(i){const u=hl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new rp);let u=0;for(const c of hl(e)){const f=r[u++];for(const y of i)if(this.ln(t,c.fieldPath)&&ho(f))i=this.fn(i,c,f);else{const w=y.qe(c.kind);Dl.Te.ce(f,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new rp;y.seed(f.$e()),Dl.Te.ce(c,y.qe(t.kind)),u.push(y)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Vr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pm(e),i=Sh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return se.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(w,T){const x=T?new Hf(T.sequenceNumber,new Ts(Oc(T.readTime),new ze(Ca(T.documentKey)),T.largestBatchId)):Hf.empty(),N=w.fields.map(([L,B])=>new kg(Qn.fromServerFormat(L),B));return new Xi(w.indexId,w.collectionGroup,N,x)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=pm(e),u=Sh(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>se.forEach(f,y=>u.put(hm(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),se.forEach(f,y=>this.wn(e,i,y).next(w=>{const T=this.mn(u,y);return w.isEqual(T)?se.resolve():this.gn(e,u,y,w,T)}))))})}yn(e,t,r,i){return Th(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Th(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Th(e);let u=new vn(Da);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,f)=>{u=u.add(new Tl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}mn(e,t){let r=new vn(Da);const i=this.an(t,e);if(null==i)return r;const u=l_(t);if(null!=u){const c=e.data.field(u.fieldPath);if(ho(c))for(const f of c.arrayValue.values||[])r=r.add(new Tl(t.indexId,e.key,this.on(f),i))}else r=r.add(new Tl(t.indexId,e.key,fm,i));return r}gn(e,t,r,i,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,w,T,x){const N=f.getIterator(),L=y.getIterator();let B=Xd(N),re=Xd(L);for(;B||re;){let _e=!1,Le=!1;if(B&&re){const Qe=w(B,re);Qe<0?Le=!0:Qe>0&&(_e=!0)}else null!=B?Le=!0:_e=!0;_e?(T(re),re=Xd(L)):Le?(x(B),B=Xd(N)):(B=Xd(N),re=Xd(L))}}(i,u,Da,f=>{c.push(this.yn(e,t,r,f))},f=>{c.push(this.pn(e,t,r,f))}),se.waitFor(c)}_n(e){let t=1;return Sh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Da(c,f)).filter((c,f,y)=>!f||0!==Da(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Da(c,e),y=Da(c,t);if(0===f)i[0]=e.Ke();else if(f>0&&y<0)i.push(c),i.push(c.Ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,fm,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,fm,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(z_)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||it())).next(z_)}}function uw(n){return Ir(n,"collectionParents")}function Th(n){return Ir(n,"indexEntries")}function pm(n){return Ir(n,"indexConfiguration")}function Sh(n){return Ir(n,"indexState")}function z_(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;d_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ts(e.readTime,e.documentKey,t)}const gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xs(e,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mm(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Z({range:c},(T,x,N)=>(f++,N.delete()));u.push(y.next(()=>{Ct(1===f)}));const w=[];for(const T of t.mutations){const x=gh(e,T.key.path,t.batchId);u.push(i.delete(x)),w.push(T.key)}return se.waitFor(u).next(()=>w)}function ym(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}xs.DEFAULT_COLLECTION_PERCENTILE=10,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xs.DEFAULT=new xs(41943040,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xs.DISABLED=new xs(-1,0,0);class W_{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new W_(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Sl(e),c=_u(e);return c.add({}).next(f=>{Ct("number"==typeof f);const y=new um(f,t,r,i),w=function(N,L,B){const re=B.baseMutations.map(Le=>hh(N.re,Le)),_e=B.mutations.map(Le=>hh(N.re,Le));return{userId:L,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:re,mutations:_e}}(this.It,this.userId,y),T=[];let x=new vn((N,L)=>Nt(N.canonicalString(),L.canonicalString()));for(const N of i){const L=gh(this.userId,N.key.path,f);x=x.add(N.key.path.popLast()),T.push(c.put(w)),T.push(u.put(L,gi))}return x.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.In[f]=y.keys()}),se.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return _u(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Cl(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return _u(e).Z({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(Ct(f.batchId>=r),u=Cl(this.It,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _u(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _u(e).W("userMutationsIndex",t).next(r=>r.map(i=>Cl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=As(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Sl(e).Z({range:i},(c,f,y)=>{const[w,T,x]=c,N=Ca(T);if(w===this.userId&&t.path.isEqual(N))return _u(e).get(x).next(L=>{if(!L)throw it();Ct(L.userId===this.userId),u.push(Cl(this.It,L))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Nt);const i=[];return t.forEach(u=>{const c=As(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=Sl(e).Z({range:f},(w,T,x)=>{const[N,L,B]=w,re=Ca(L);N===this.userId&&u.path.isEqual(re)?r=r.add(B):x.done()});i.push(y)}),se.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=As(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new vn(Nt);return Sl(e).Z({range:c},(y,w,T)=>{const[x,N,L]=y,B=Ca(N);x===this.userId&&r.isPrefixOf(B)?B.length===i&&(f=f.add(L)):T.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(_u(e).get(u).next(c=>{if(null===c)throw it();Ct(c.userId===this.userId),r.push(Cl(this.It,c))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mm(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Sl(e).Z({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Ca(u[1]);i.push(y)}else f.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return Ah(e,this.userId,t)}Rn(e){return _m(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ah(n,e,t){const r=As(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Sl(n).Z({range:u,X:!0},(f,y,w)=>{const[T,x,N]=f;T===e&&x===i&&(c=!0),w.done()}).next(()=>c)}function _u(n){return Ir(n,"mutations")}function Sl(n){return Ir(n,"documentMutations")}function _m(n){return Ir(n,"mutationQueues")}class Pc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Pc(0)}static vn(){return new Pc(-1)}}class vm{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Pc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return vu(e).Z((c,f)=>{const y=tp(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>se.waitFor(u)).next(()=>i)}forEachTarget(e,t){return vu(e).Z((r,i)=>{const u=tp(i);t(u)})}Vn(e){return Em(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Sn(e,t){return Em(e).put("targetGlobalKey",t)}Dn(e,t){return vu(e).put(nw(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ml(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return vu(e).Z({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const w=tp(f);Tc(t,w.target)&&(u=w,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Nc(e);return t.forEach(c=>{const f=Si(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nc(e);return se.forEach(t,u=>{const c=Si(u.path);return se.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Nc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nc(e);let u=Rt();return i.Z({range:r,X:!0},(c,f,y)=>{const w=Ca(c[1]),T=new ze(w);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Si(t.path),i=IDBKeyRange.bound([r],[Ng(r)],!1,!0);let u=0;return Nc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,f],y,w)=>{0!==c&&(u++,w.done())}).next(()=>u>0)}se(e,t){return vu(e).get(t).next(r=>r?tp(r):null)}}function vu(n){return Ir(n,"targets")}function Em(n){return Ir(n,"targetGlobal")}function Nc(n){return Ir(n,"targetDocuments")}function lw([n,e],[t,r]){const i=Nt(n,t);return 0===i?Nt(e,r):i}class K_{constructor(e){this.xn=e,this.buffer=new vn(lw),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Z_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){pi(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fu(r)}yield t.Fn(3e5)}))}}class cw{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(ei.at);const r=new K_(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(gm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gm):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,f,y,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),o_()<=Ci.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${x} documents in `+(w-y)+`ms\nTotal Duration: ${w-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class sD{constructor(e,t){this.db=e,this.garbageCollector=new cw(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return xh(e,r)}removeReference(e,t,r){return xh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xh(e,t)}Gn(e,t){return function(r,i){let u=!1;return _m(r).tt(c=>Ah(r,c,i).next(f=>(f&&(u=!0),se.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,f)=>{if(f<=t){const y=this.Gn(e,c).next(w=>{if(!w)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),Nc(e).delete([0,Si(c.path)])))});i.push(y)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xh(e,t)}Kn(e,t){const r=Nc(e);let i,u=ei.at;return r.Z({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:w})=>{0===c?(u!==ei.at&&t(new ze(Ca(i)),u),u=w,i=y):u=ei.at}).next(()=>{u!==ei.at&&t(new ze(Ca(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xh(n,e){return Nc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:r}));var r}class Y_{constructor(){this.changes=new yu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dw{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Al(e).put(r)}removeEntry(e,t,r){return Al(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cm(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Al(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Al(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(i,u)=>{r={document:this.jn(t,u),size:ym(u)}}).next(()=>r)}getEntries(e,t){let r=is();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=is(),i=new Bn(ze.comparator);return this.zn(e,t,(u,c)=>{const f=this.jn(u,c);r=r.insert(u,f),i=i.insert(u,ym(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let i=new vn(Q_);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(Mh(i.first()),Mh(i.last())),c=i.getIterator();let f=c.getNext();return Al(e).Z({index:"documentKeyIndex",range:u},(y,w,T)=>{const x=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&Q_(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?T.j(Mh(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),cm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Al(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=is();for(const y of c){const w=this.jn(ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=is();const c=bm(t,r),f=bm(t,Ts.max());return Al(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,w,T)=>{const x=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);u=u.insert(x.key,x),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new hw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fw(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Qn(e,t){return fw(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function ew(n,e){let t;if(e.document)t=qC(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Oc(e.noDocument.readTime);t=dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=ze.fromSegments(e.unknownDocument.path),i=Oc(e.unknownDocument.version);t=dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new On(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return dn.newInvalidDocument(e)}}function wm(n){return new dw(n)}class hw extends Y_{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new yu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((u,c)=>Nt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=tw(this.Yn.It,c);i=i.add(u.path.popLast()),r+=ym(y)-f.size,t.push(this.Yn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=tw(this.Yn.It,c.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function fw(n){return Ir(n,"remoteDocumentGlobal")}function Al(n){return Ir(n,"remoteDocumentsV14")}function Mh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bm(n,e){const t=e.documentKey.path.toArray();return[n,cm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Nt(t[u],r[u]),i)return i;return i=Nt(t.length,r.length),i||(i=Nt(t[t.length-2],r[r.length-2]),i||Nt(t[t.length-1],r[r.length-1]))}class oD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pw{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&uh(r.mutation,i,ts.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Rt()){const i=Ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Qf();return u.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Rt()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let u=is();const c=lh(),f=lh();return t.forEach((y,w)=>{const T=r.get(w.key);i.has(w.key)&&(void 0===T||T.mutation instanceof fo)?u=u.insert(w.key,w):void 0!==T&&(c.set(w.key,T.mutation.getFieldMask()),uh(T.mutation,w,T.mutation.getFieldMask(),On.now()))}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((w,T)=>c.set(w,T)),t.forEach((w,T)=>{var x;return f.set(w,new oD(T,null!==(x=c.get(w))&&void 0!==x?x:null))}),f))}recalculateAndSaveOverlays(e,t){const r=lh();let i=new Bn((c,f)=>c-f),u=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let T=r.get(y)||ts.empty();T=f.applyToLocalView(w,T),r.set(y,T);const x=(i.get(f.batchId)||Rt()).add(y);i=i.insert(f.batchId,x)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),w=y.key,T=y.value,x=xc();T.forEach(N=>{if(!u.has(N)){const L=S_(t.get(N),r.get(N));null!==L&&x.set(N,L),u=u.add(N)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,x))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):C_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):se.resolve(Ho());let f=-1,y=u;return c.next(w=>se.forEach(w,(T,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),u.get(T)?se.resolve():this.getBaseDocument(e,T,x).next(N=>{y=y.insert(T,N)}))).next(()=>this.populateOverlays(e,w,u)).next(()=>this.computeViews(e,y,w,Rt())).next(T=>({batchId:f,changes:GE(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Qf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Qf();return this.indexManager.getCollectionParents(e,i).next(c=>se.forEach(c,f=>{const y=(w=t,T=f.child(i),new _l(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((T,x)=>{u=u.insert(T,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((f,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,dn.newInvalidDocument(w)))});let c=Qf();return i.forEach((f,y)=>{const w=u.get(f);void 0!==w&&uh(w.mutation,y,ts.empty(),On.now()),Gg(t,y)&&(c=c.insert(f,y))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(dn.newInvalidDocument(t))}}class aD{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:rw(r.bundledQuery),readTime:Ur(r.readTime)}),se.resolve();var r}}class J_{constructor(){this.overlays=new Bn(ze.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return se.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=Ho(),u=t.length+1,c=new ze(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Bn((w,T)=>w-T);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let T=u.get(w.largestBatchId);null===T&&(T=Ho(),u=u.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const f=Ho(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,T)=>f.set(w,T)),!(f.size()>=i)););return se.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new lm(t,r));let u=this.es.get(t);void 0===u&&(u=Rt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class ip{constructor(){this.ns=new vn(Cr.ss),this.rs=new vn(Cr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Cr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new Qt([])),r=new Cr(t,e),i=new Cr(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new Qt([])),r=new Cr(t,e),i=new Cr(t,e+1);let u=Rt();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Cr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||ze.comparator(e.key,t.key)}}class gw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(Cr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new um(u,t,r,i);this.mutationQueue.push(c);for(const f of i)this.gs=this.gs.add(new Cr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),i=new Cr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const f=this.ys(c._s);u.push(f)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Nt);return t.forEach(i=>{const u=new Cr(i,0),c=new Cr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],f=>{r=r.add(f._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const c=new Cr(new ze(u),0);let f=new vn(Nt);return this.gs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(y._s)),!0)},c),se.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,i=>{const u=new Cr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Cr(t,0),i=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mw{constructor(e){this.Es=e,this.docs=new Bn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=is();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():dn.newInvalidDocument(i))}),se.resolve(r)}getAllFromCollection(e,t,r){let i=is();const u=new ze(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||d_(EE(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return se.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yw(this)}getSize(e){return se.resolve(this.size)}}class yw extends Y_{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class _w{constructor(e){this.persistence=e,this.Rs=new yu(t=>ml(t),Tc),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ip,this.targetCount=0,this.vs=Pc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Pc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),se.waitFor(u).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class X_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ei(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new _w(this),this.indexManager=new rD,this.remoteDocumentCache=new mw(r=>this.referenceDelegate.xs(r)),this.It=new XE(t),this.Ns=new aD(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new gw(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new vw(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Ms(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class vw extends h_{constructor(e){super(),this.currentSequenceNumber=e}}class sp{constructor(e){this.persistence=e,this.Fs=new ip,this.$s=null}static Bs(e){return new sp(e)}get Ls(){if(this.$s)return this.$s;throw it()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const i=ze.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class TA{constructor(e){this.It=e}$(e,t,r,i){const u=new es("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0}),f.createObjectStore("documentMutations"),Ew(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Ew(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").W().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sm,{unique:!0});const T=y.store("mutations"),x=w.map(N=>T.put(N));return se.waitFor(x)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:Ih});y.createIndex("collectionPathOverlayIndex",Ch,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",YE,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:Rc});y.createIndex("documentKeyIndex",om),y.createIndex("collectionGroupIndex",mo)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:vh}).createIndex("sequenceNumberIndex",Eh,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:wh}).createIndex("documentKeyIndex",bh,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=ym(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>se.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(f=>se.forEach(f,y=>{Ct(y.userId===u.userId);const w=Cl(this.It,y);return mm(e,u.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,f)=>{const y=new Qt(c),w=[0,Si(y)];u.push(t.get(w).next(T=>T?se.resolve():t.put({targetId:0,path:Si(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:_h});const r=t.store("collectionParents"),i=new q_,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:Si(y)})}};return t.store("remoteDocuments").Z({X:!0},(c,f)=>{const y=new Qt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,f,y],w)=>{const T=Ca(f);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=tp(i),c=nw(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(w=c,w.document?new ze(Qt.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):it()).path.toArray();var w;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(T))}).next(()=>se.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=wm(this.It),u=new X_(sp.Bs,this.It.re);return r.W().next(c=>{const f=new Map;return c.forEach(y=>{var w;let T=null!==(w=f.get(y.userId))&&void 0!==w?w:Rt();Cl(this.It,y).keys().forEach(x=>T=T.add(x)),f.set(y.userId,T)}),se.forEach(f,(y,w)=>{const T=new Er(w),x=G_.oe(this.It,T),N=u.getIndexManager(T),L=W_.oe(T,this.It,N,u.referenceDelegate);return new pw(i,L,x,N).recalculateAndSaveOverlaysForDocumentKeys(new am(t,ei.at),y).next()})})}}function Ew(n){n.createObjectStore("targetDocuments",{keyPath:mh}).createIndex("documentTargetsIndex",yh,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V_,{unique:!0}),n.createObjectStore("targetGlobal")}const ev="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Im{constructor(e,t,r,i,u,c,f,y,w,T,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=f,this.Js=w,this.Ys=T,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=N=>Promise.resolve(),!Im.C())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sD(this,i),this.ii=t+"main",this.It=new XE(y),this.ri=new co(this.ii,this.Xs,new TA(this.It)),this.Cs=new vm(this.referenceDelegate,this.It),this.remoteDocumentCache=wm(this.It),this.Ns=new XC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&bn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,ev);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ei(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jn(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(pi(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return op(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return Jn(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ir(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return se.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):op(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,ev);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jn(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new am(t,ei.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Jn(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return W_.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iD(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return G_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?JE:14===c?j_:13===c?B_:12===c?QE:11===c?U_:void it();var c;let f;return this.ri.runTransaction(e,i,u,y=>(f=new am(y,this.Ss?this.Ss.next():ei.at),"readwrite-primary"===t?this.fi(f).next(w=>!!w||this.di(f)).next(w=>{if(!w)throw bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Re(he.FAILED_PRECONDITION,kt);return r(f)}).next(w=>this.wi(f).next(()=>w)):this.Vi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Vi(e){return op(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,ev)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return op(e).put("owner",t)}static C(){return co.C()}_i(e){const t=op(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(bn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){bn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function op(n){return Ir(n,"owner")}function Jn(n){return Ir(n,"clientMetadata")}function Cm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Rt(),i=Rt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new tv(e,t.fromCache,r,i)}}class ww{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Mi(e,t,i,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(w_(t))return se.resolve(null);let r=ns(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Kf(t,null,"F"),r=ns(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Rt(...u);return this.Ni.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Fi(t,f);return this.$i(t,w,c,y.readTime)?this.ki(e,Kf(t,null,"F")):this.Bi(e,w,t,y)}))})))}Mi(e,t,r,i){return w_(t)||i.isEqual(Mt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Oi(e,t):(o_()<=Ci.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$g(t)),this.Bi(e,c,t,c_(i,-1)))})}Fi(e,t){let r=new vn(jo(e));return t.forEach((i,u)=>{Gg(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Oi(e,t){return o_()<=Ci.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",$g(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ts.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class bw{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Bn(Nt),this.qi=new yu(u=>ml(u),Tc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Iw(n,e,t,r){return new bw(n,e,t,r)}function nv(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,me.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=Rt();for(const w of i){c.push(w.batchId);for(const T of w.mutations)y=y.add(T.key)}for(const w of u){f.push(w.batchId);for(const T of w.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(w=>({ji:w,removedBatchIds:c,addedBatchIds:f}))})})}),Dm.apply(this,arguments)}function Rh(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,w){const T=y.batch,x=T.keys();let N=se.resolve();return x.forEach(L=>{N=N.next(()=>w.getEntry(f,L)).next(B=>{const re=y.docVersions.get(L);Ct(null!==re),B.version.compareTo(re)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),w.addEntry(B)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(f,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Rt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Cw(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function uD(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((T,x)=>{const N=i.get(x);if(!N)return;f.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,x)));let L=N.withSequenceNumber(u.currentSequenceNumber);var B,re,_e;e.targetMismatches.has(x)?L=L.withResumeToken(wr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,r)),i=i.insert(x,L),re=L,_e=T,(0===(B=N).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(u,L))});let y=is(),w=Rt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),f.push(rv(u,c,e.documentUpdates).next(T=>{y=T.Wi,w=T.zi})),!r.isEqual(Mt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(x=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(T)}return se.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,w)).next(()=>y)}).then(u=>(t.Ui=i,u))}function rv(n,e,t){let r=Rt(),i=Rt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=is();return t.forEach((f,y)=>{const w=u.get(f);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Mt.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Pe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",y.version)}),{Wi:c,zi:i}})}function lD(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kc(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,se.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new bl(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ap(n,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!pi(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Tm.apply(this,arguments)}function Oh(n,e,t){const r=Ye(n);let i=Mt.min(),u=Rt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,w){const T=Ye(f),x=T.qi.get(w);return void 0!==x?se.resolve(T.Ui.get(x)):T.Cs.getTargetData(y,w)}(r,c,ns(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Mt.min(),t?u:Rt())).next(f=>(Tw(r,NE(e),f),{documents:f,Hi:u})))}function $o(n,e){const t=Ye(n),r=Ye(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Dw(n,e){const t=Ye(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,c_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Tw(t,e,i),i))}function Tw(n,e,t){let r=Mt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Ms(){return Ms=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);let u=Rt(),c=is();for(const w of t){const T=e.Ji(w.metadata.name);w.document&&(u=u.add(T));const x=e.Yi(w);x.setReadTime(e.Xi(w.metadata.readTime)),c=c.insert(T,x)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield kc(i,(w=r,ns(vl(Qt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>rv(w,f,c).next(T=>(f.apply(w),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Cs.addMatchingKeys(w,u,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,T.Wi,T.zi)).next(()=>T.Wi)))}),Ms.apply(this,arguments)}function Go(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,me.Z)(function*(n,e,t=Rt()){const r=yield kc(n,ns(rw(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Ur(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const f=r.withResumeToken(wr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(u,f).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),Sm.apply(this,arguments)}function iv(n,e){return`firestore_clients_${n}_${e}`}function Sw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sv(n,e){return`firestore_targets_${n}_${e}`}class Am{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new Am(e,t,i.state,u):(bn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class up{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new up(e,r.state,i):(bn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Jg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=CC(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new Ph(e,u):(bn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fc{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fc(t.clientId,t.onlineState):(bn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ov{constructor(){this.activeTargetIds=Jg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xm{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Bn(Nt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=iv(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ov),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(iv(e.persistenceKey,i));if(u){const c=Ph.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sv(this.persistenceKey,e));if(r){const i=up.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=ei.at;if(null!=u)try{const f=JSON.parse(u);Ct("number"==typeof f),c=f}catch(f){bn("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==ei.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Am(this.currentUser,e,t,r),u=Sw(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=Sw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=sv(this.persistenceKey,e),u=new up(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Ph.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Am.Zi(new Er(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return up.Zi(i,t)}yr(e){return Fc.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Br(c,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Jg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Aw{constructor(){this.Lr=new ov,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ov,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xw{qr(e){}shutdown(){}}class av{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Mm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class cD{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Mw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ao(e,t);Pe("RestConnection","Sending: ",c,r);const f={};return this.ho(f,i,u),this.lo(e,c,f,r).then(y=>(Pe("RestConnection","Received: ",y),y),y=>{throw dl("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}fo(e,t,r,i,u,c){return this.co(e,t,r,i,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ao(e,t){return`${this.oo}/v1/${t}:${Mm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((u,c)=>{const f=new fE;f.listenOnce(Uf.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Yd.NO_ERROR:const w=f.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(w)),u(w);break;case Yd.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case Yd.HTTP_ERROR:const T=f.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const x=f.getResponseJson().error;if(x&&x.status&&x.message){const N=function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(B)>=0?B:he.UNKNOWN}(x.status);c(new Re(N,x.message))}else c(new Re(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Re(he.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Vf(),c=Zd(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Bf({})),this.ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=i.join("");Pe("Connection","Creating WebChannel: "+y,f);const w=u.createWebChannel(y,f);let T=!1,x=!1;const N=new cD({Hr:B=>{x?Pe("Connection","Not sending because WebChannel is closed:",B):(T||(Pe("Connection","Opening WebChannel transport."),w.open(),T=!0),Pe("Connection","WebChannel sending:",B),w.send(B))},Jr:()=>w.close()}),L=(B,re,_e)=>{B.listen(re,Le=>{try{_e(Le)}catch(Qe){setTimeout(()=>{throw Qe},0)}})};return L(w,Qd.EventType.OPEN,()=>{x||Pe("Connection","WebChannel transport opened.")}),L(w,Qd.EventType.CLOSE,()=>{x||(x=!0,Pe("Connection","WebChannel transport closed"),N.io())}),L(w,Qd.EventType.ERROR,B=>{x||(x=!0,dl("Connection","WebChannel transport errored:",B),N.io(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),L(w,Qd.EventType.MESSAGE,B=>{var re;if(!x){const _e=B.data[0];Ct(!!_e);const Le=_e,Qe=Le.error||(null===(re=Le[0])||void 0===re?void 0:re.error);if(Qe){Pe("Connection","WebChannel received error:",Qe);const Xe=Qe.status;let Ge=function(wt){const Ht=jn[wt];if(void 0!==Ht)return M_(Ht)}(Xe),mt=Qe.message;void 0===Ge&&(Ge=he.INTERNAL,mt="Unknown error status: "+Xe+" with message "+Qe.message),x=!0,N.io(new Re(Ge,mt)),w.close()}else Pe("Connection","WebChannel received:",_e),N.ro(_e)}}),L(c,Sg.STAT_EVENT,B=>{B.stat===Ag.PROXY?Pe("Connection","Detected buffering proxy"):B.stat===Ag.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.so()},0),N}}function uv(){return"undefined"!=typeof window?window:null}function Nh(){return"undefined"!=typeof document?document:null}function Lc(n){return new jC(n,!0)}class Rm{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class lv{constructor(e,t,r,i,u,c,f,y){this.Hs=e,this.Po=r,this.vo=i,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Rm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(bn(t.toString()),bn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rw extends lv{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function KE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:it(),i=e.targetChange.targetIds||[],u=function(y,w){return y.gt?(Ct(void 0===w||"string"==typeof w),wr.fromBase64String(w||"")):(Ct(void 0===w||w instanceof Uint8Array),wr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const w=void 0===y.code?he.UNKNOWN:M_(y.code);return new Re(w,y.message||"")}(c);t=new R_(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=po(n,r.document.name),u=Ur(r.document.updateTime),c=new br({mapValue:{fields:r.document.fields}}),f=dn.newFoundDocument(i,u,c);t=new ss(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=po(n,r.document),u=r.readTime?Ur(r.readTime):Mt.min(),c=dn.newNoDocument(i,u);t=new ss([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=po(n,r.document);t=new ss([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,u=new x_(r.count||0);t=new Xg(r.targetId,u)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Ur(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=dh(this.It),t.addTarget=function(i,u){let c;const f=u.target;return c=ih(f)?{documents:WC(i,f)}:{query:L_(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=HC(i,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=ch(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function KC(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=dh(this.It),t.removeTarget=e,this.Bo(t)}}class Ow extends lv{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zC(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let u=Ur(r.updateTime?r.updateTime:i);return u.isEqual(Mt.min())&&(u=Ur(i)),new NC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=dh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>hh(this.It,r))};this.Bo(t)}}class Pw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.Vo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(he.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Nw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(bn(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class kw{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(f=>{r.enqueueAndForget((0,me.Z)(function*(){var y;xl(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,me.Z)(function*(w){const T=Ye(w);T._u.add(4),yield Fh(T),T.gu.set("Unknown"),T._u.delete(4),yield kh(T)}),function(w){return y.apply(this,arguments)})(c))}))}),this.gu=new Nw(r,i)}}function kh(n){return cv.apply(this,arguments)}function cv(){return cv=(0,me.Z)(function*(n){if(xl(n))for(const e of n.wu)yield e(!0)}),cv.apply(this,arguments)}function Fh(n){return dv.apply(this,arguments)}function dv(){return dv=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),dv.apply(this,arguments)}function Om(n,e){const t=Ye(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),pv(t)?fv(t):cp(t).ko()&&hv(t,e))}function lp(n,e){const t=Ye(n),r=cp(t);t.du.delete(e),r.ko()&&Fw(t,e),0===t.du.size&&(r.ko()?r.Fo():xl(t)&&t.gu.set("Unknown"))}function hv(n,e){n.yu.Ot(e.targetId),cp(n).zo(e)}function Fw(n,e){n.yu.Ot(e),cp(n).Ho(e)}function fv(n){n.yu=new qE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),cp(n).start(),n.gu.uu()}function pv(n){return xl(n)&&!cp(n).No()&&n.du.size>0}function xl(n){return 0===Ye(n)._u.size}function Lw(n){n.yu=void 0}function dD(n){return gv.apply(this,arguments)}function gv(){return gv=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{hv(n,e)})}),gv.apply(this,arguments)}function hD(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,me.Z)(function*(n,e){Lw(n),pv(n)?(n.gu.hu(e),fv(n)):n.gu.set("Unknown")}),mv.apply(this,arguments)}function fD(n,e,t){return yv.apply(this,arguments)}function yv(){return yv=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof R_&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.du.delete(f),i.yu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pm(n,r)}else if(e instanceof ss?n.yu.Gt(e):e instanceof Xg?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield Cw(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.du.get(y);w&&i.du.set(y,w.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.du.get(f);if(!y)return;i.du.set(f,y.withResumeToken(wr.EMPTY_BYTE_STRING,y.snapshotVersion)),Fw(i,f);const w=new bl(y.target,f,1,y.sequenceNumber);hv(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Pm(n,r)}var r}),yv.apply(this,arguments)}function Pm(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,me.Z)(function*(n,e,t){if(!pi(e))throw e;n._u.add(1),yield Fh(n),n.gu.set("Offline"),t||(t=()=>Cw(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield kh(n)}))}),Nm.apply(this,arguments)}function _v(n,e){return e().catch(t=>Pm(n,t,e))}function Vc(n){return km.apply(this,arguments)}function km(){return km=(0,me.Z)(function*(n){const e=Ye(n),t=dt(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Vw(e);)try{const i=yield lD(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,Uw(e,i)}catch(i){yield Pm(e,i)}vv(e)&&Ev(e)}),km.apply(this,arguments)}function Vw(n){return xl(n)&&n.fu.length<10}function Uw(n,e){n.fu.push(e);const t=dt(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function vv(n){return xl(n)&&!dt(n).No()&&n.fu.length>0}function Ev(n){dt(n).start()}function Bw(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,me.Z)(function*(n){dt(n).eu()}),Fm.apply(this,arguments)}function jw(n){return Eu.apply(this,arguments)}function Eu(){return Eu=(0,me.Z)(function*(n){const e=dt(n);for(const t of n.fu)e.Xo(t.mutations)}),Eu.apply(this,arguments)}function pD(n,e,t){return wv.apply(this,arguments)}function wv(){return wv=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),i=H_.from(r,e,t);yield _v(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vc(n)}),wv.apply(this,arguments)}function Lh(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,me.Z)(function*(n,e){var t;e&&dt(n).Yo&&(yield(t=(0,me.Z)(function*(r,i){if(Yg(u=i.code)&&u!==he.ABORTED){const c=r.fu.shift();dt(r).Oo(),yield _v(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Vc(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),vv(n)&&Ev(n)}),Hw.apply(this,arguments)}function Lm(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,me.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=xl(t);t._u.add(3),yield Fh(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield kh(t)}),$w.apply(this,arguments)}function Vm(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,me.Z)(function*(n,e){const t=Ye(n);e?(t._u.delete(2),yield kh(t)):e||(t._u.add(2),yield Fh(t),t.gu.set("Unknown"))}),Um.apply(this,arguments)}function cp(n){return n.pu||(n.pu=function(e,t,r){const i=Ye(e);return i.su(),new Rw(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:dD.bind(null,n),Zr:hD.bind(null,n),Wo:fD.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Oo(),pv(n)?fv(n):n.gu.set("Unknown")):(yield n.pu.stop(),Lw(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function dt(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.su(),new Ow(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Bw.bind(null,n),Zr:Lh.bind(null,n),tu:jw.bind(null,n),Zo:pD.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Oo(),yield Vc(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class bv{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new bv(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vh(n,e){if(bn("AsyncQueue",`${e}: ${n}`),pi(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Uh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Qf(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new Uh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dp{constructor(){this.Tu=new Bn(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):it():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bh{constructor(e,t,r,i,u,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Bh(e,t,Uh.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Bm{constructor(){this.Au=void 0,this.listeners=[]}}class jm{constructor(){this.queries=new yu(e=>PE(e),Zf),this.onlineState="Unknown",this.Ru=new Set}}function Hn(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new Bm),i)try{u.Au=yield t.onListen(r)}catch(c){const f=Vh(c,`Initialization of query '${$g(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&$m(t)}),Gw.apply(this,arguments)}function Hm(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Iv.apply(this,arguments)}function gD(n,e){const t=Ye(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Pu(i)&&(r=!0);c.Au=i}}r&&$m(t)}function qw(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function $m(n){n.Ru.forEach(e=>{e.next()})}class Gm{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Bh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Bh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class zw{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Ww{constructor(e){this.It=e}Ji(e){return po(this.It,e)}Yi(e){return e.metadata.exists?qC(this.It,e.document,!1):dn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class mD{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kw(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new Ww(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Rt()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Ta(n,e,t,r){return Ms.apply(this,arguments)}(e.localStore,new Ww(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield Go(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Kw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jh{constructor(e){this.key=e}}class Zw{constructor(e){this.key=e}}class Yw{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Rt(),this.mutatedKeys=Rt(),this.Ku=jo(e),this.Gu=new Uh(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new dp,i=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,x)=>{const N=i.get(T),L=Gg(this.query,x)?x:null,B=!!N&&this.mutatedKeys.has(N.key),re=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let _e=!1;N&&L?N.data.isEqual(L.data)?B!==re&&(r.track({type:3,doc:L}),_e=!0):this.zu(N,L)||(r.track({type:2,doc:L}),_e=!0,(y&&this.Ku(L,y)>0||w&&this.Ku(L,w)<0)&&(f=!0)):!N&&L?(r.track({type:0,doc:L}),_e=!0):N&&!L&&(r.track({type:1,doc:N}),_e=!0,(y||w)&&(f=!0)),_e&&(L?(c=c.add(L),u=re?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Gu:c,Wu:r,$i:f,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((w,T)=>function(x,N){const L=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return L(x)-L(N)}(w.type,T.type)||this.Ku(w.doc,T.doc)),this.Hu(r);const c=t?this.Ju():[],f=0===this.qu.size&&this.current?1:0,y=f!==this.Uu;return this.Uu=f,0!==u.length||y?{snapshot:new Bh(this.query,e.Gu,i,u,e.mutatedKeys,0===f,y,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new dp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Rt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Zw(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new jh(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Rt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Bh.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class yD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qm{constructor(e){this.key=e,this.ec=!1}}class Qw{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new yu(f=>PE(f),Zf),this.ic=new Map,this.rc=new Set,this.oc=new Bn(ze.comparator),this.uc=new Map,this.cc=new ip,this.ac={},this.hc=new Map,this.lc=Pc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Jw(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,me.Z)(function*(n,e){const t=Bv(n);let r,i;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.tc();else{const c=yield kc(t.localStore,ns(e));t.isPrimaryClient&&Om(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Cv(t,e,r,"current"===f)}return i}),zm.apply(this,arguments)}function Cv(n,e,t,r){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,me.Z)(function*(n,e,t,r){n.dc=(T,x,N)=>{return(L=(0,me.Z)(function*(B,re,_e,Le){let Qe=re.view.ju(_e);Qe.$i&&(Qe=yield Oh(B.localStore,re.query,!1).then(({documents:mt})=>re.view.ju(mt,Qe)));const Xe=Le&&Le.targetChanges.get(re.targetId),Ge=re.view.applyChanges(Qe,B.isPrimaryClient,Xe);return Ym(B,re.targetId,Ge.Yu),Ge.snapshot}),function(B,re,_e,Le){return L.apply(this,arguments)})(n,T,x,N);var L};const i=yield Oh(n.localStore,e,!0),u=new Yw(e,i.Hi),c=u.ju(i.documents),f=Xf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,f);Ym(n,t,y.Yu);const w=new yD(e,t,u);return n.sc.set(e,w),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),y.snapshot}),Uc.apply(this,arguments)}function hp(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,me.Z)(function*(n,e){const t=Ye(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(u=>!Zf(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ap(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lp(t.remoteStore,r.targetId),$h(t,r.targetId)}).catch(fu))):($h(t,r.targetId),yield ap(t.localStore,r.targetId,!0))}),Dv.apply(this,arguments)}function Tv(){return Tv=(0,me.Z)(function*(n,e,t){const r=pp(n);try{const i=yield function(u,c){const f=Ye(u),y=On.now(),w=c.reduce((N,L)=>N.add(L.key),Rt());let T,x;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let L=is(),B=Rt();return f.Gi.getEntries(N,w).next(re=>{L=re,L.forEach((_e,Le)=>{Le.isValidDocument()||(B=B.add(_e))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,L)).next(re=>{T=re;const _e=[];for(const Le of c){const Qe=BE(Le,T.get(Le.key).overlayedDocument);null!=Qe&&_e.push(new fo(Le.key,Qe,Dc(Qe.value.mapValue),xn.exists(!0)))}return f.mutationQueue.addMutationBatch(N,y,_e,c)}).next(re=>{x=re;const _e=re.applyToLocalDocumentSet(T,B);return f.documentOverlayCache.saveOverlays(N,re.batchId,_e)})}).then(()=>({batchId:x.batchId,changes:GE(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.ac[u.currentUser.toKey()];y||(y=new Bn(Nt)),y=y.insert(c,f),u.ac[u.currentUser.toKey()]=y}(r,i.batchId,t),yield wu(r,i.changes),yield Vc(r.remoteStore)}catch(i){const u=Vh(i,"Failed to persist write");t.reject(u)}}),Tv.apply(this,arguments)}function Sv(n,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,me.Z)(function*(n,e){const t=Ye(n);try{const r=yield uD(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.uc.get(u);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?Ct(c.ec):i.removedDocuments.size>0&&(Ct(c.ec),c.ec=!1))}),yield wu(t,r,e)}catch(r){yield fu(r)}}),Wm.apply(this,arguments)}function Av(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((u,c)=>{const f=c.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Ye(u);f.onlineState=c;let y=!1;f.queries.forEach((w,T)=>{for(const x of T.listeners)x.bu(c)&&(y=!0)}),y&&$m(f)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vD(n,e,t){return Km.apply(this,arguments)}function Km(){return Km=(0,me.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),u=i&&i.key;if(u){let c=new Bn(ze.comparator);c=c.insert(u,dn.newNoDocument(u,Mt.min()));const f=Rt().add(u),y=new Jf(Mt.min(),new Map,new vn(Nt),c,f);yield Sv(r,y),r.oc=r.oc.remove(u),r.uc.delete(e),Mv(r)}else yield ap(r.localStore,e,!1).then(()=>$h(r,e,t)).catch(fu)}),Km.apply(this,arguments)}function ED(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,me.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield Rh(t.localStore,e);Hh(t,r,null),Zm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wu(t,i)}catch(i){yield fu(i)}}),xv.apply(this,arguments)}function SA(n,e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,me.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(u,c){const f=Ye(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return f.mutationQueue.lookupMutationBatch(y,c).next(T=>(Ct(null!==T),w=T.keys(),f.mutationQueue.removeMutationBatch(y,T))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,w,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>f.localDocuments.getDocuments(y,w))})}(r.localStore,e);Hh(r,e,t),Zm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wu(r,i)}catch(i){yield fu(i)}}),Xw.apply(this,arguments)}function eb(){return eb=(0,me.Z)(function*(n,e){const t=Ye(n);xl(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ye(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Vh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eb.apply(this,arguments)}function Zm(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Hh(n,e,t){const r=Ye(n);let i=r.ac[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function $h(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||tb(n,r)})}function tb(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(lp(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Mv(n))}function Ym(n,e,t){for(const r of t)r instanceof jh?(n.cc.addReference(r.key,e),fp(n,r)):r instanceof Zw?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||tb(n,r.key)):it()}function fp(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.rc.add(r),Mv(n))}function Mv(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new ze(Qt.fromString(e)),r=n.lc.next();n.uc.set(r,new qm(t)),n.oc=n.oc.insert(t,r),Om(n.remoteStore,new bl(ns(vl(t.path)),r,2,ei.at))}}function wu(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[],c=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,y)=>{c.push(r.dc(y,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w.fromCache?"not-current":"current"),i.push(w);const T=tv.Ci(y.targetId,w);u.push(T)}}))}),yield Promise.all(c),r.nc.Wo(i),yield(f=(0,me.Z)(function*(y,w){const T=Ye(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>se.forEach(w,N=>se.forEach(N.Si,L=>T.persistence.referenceDelegate.addReference(x,N.targetId,L)).next(()=>se.forEach(N.Di,L=>T.persistence.referenceDelegate.removeReference(x,N.targetId,L)))))}catch(x){if(!pi(x))throw x;Pe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const N=x.targetId;if(!x.fromCache){const L=T.Ui.get(N),re=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);T.Ui=T.Ui.insert(N,re)}}}),function(y,w){return f.apply(this,arguments)})(r.localStore,u))}),Rv.apply(this,arguments)}function wD(n,e){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,me.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield nv(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(f=>{f.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wu(t,r.ji)}var i}),Ov.apply(this,arguments)}function nb(n,e){const t=Ye(n),r=t.uc.get(e);if(r&&r.ec)return Rt().add(r.key);{let i=Rt();const u=t.ic.get(e);if(!u)return i;for(const c of u){const f=t.sc.get(c);i=i.unionWith(f.view.Qu)}return i}}function bD(n,e){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,me.Z)(function*(n,e){const t=Ye(n),r=yield Oh(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&Ym(t,e.targetId,i.Yu),i}),Pv.apply(this,arguments)}function Gh(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,me.Z)(function*(n,e){const t=Ye(n);return Dw(t.localStore,e).then(r=>wu(t,r))}),Nv.apply(this,arguments)}function rb(n,e,t,r){return kv.apply(this,arguments)}function kv(){return kv=(0,me.Z)(function*(n,e,t,r){const i=Ye(n),u=yield function(c,f){const y=Ye(c),w=Ye(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.Tn(T,f).next(x=>x?y.localDocuments.getDocuments(T,x):se.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield Vc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Hh(i,e,r||null),Zm(i,e),f=e,Ye(Ye(i.localStore).mutationQueue).An(f)):it(),yield wu(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),kv.apply(this,arguments)}function Fv(){return Fv=(0,me.Z)(function*(n,e){const t=Ye(n);if(Bv(t),pp(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Lv(t,r.toArray());t.fc=!0,yield Vm(t.remoteStore,!0);for(const u of i)Om(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>($h(t,c),ap(t.localStore,c,!0))),lp(t.remoteStore,c)}),yield i,yield Lv(t,r),function(u){const c=Ye(u);c.uc.forEach((f,y)=>{lp(c.remoteStore,y)}),c.cc.fs(),c.uc=new Map,c.oc=new Bn(ze.comparator)}(t),t.fc=!1,yield Vm(t.remoteStore,!1)}}),Fv.apply(this,arguments)}function Lv(n,e,t){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,me.Z)(function*(n,e,t){const r=Ye(n),i=[],u=[];for(const c of e){let f;const y=r.ic.get(c);if(y&&0!==y.length){f=yield kc(r.localStore,ns(y[0]));for(const w of y){const T=r.sc.get(w),x=yield bD(r,T);x.snapshot&&u.push(x.snapshot)}}else{const w=yield $o(r.localStore,c);f=yield kc(r.localStore,w),yield Cv(r,Qm(w),c,!1)}i.push(f)}return r.nc.Wo(u),i}),Vv.apply(this,arguments)}function Qm(n){return OE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ID(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).vi()}function sb(n,e,t,r){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,me.Z)(function*(n,e,t,r){const i=Ye(n);if(i.fc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Dw(i.localStore,NE(u[0])),f=Jf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wu(i,c,f);break}case"rejected":yield ap(i.localStore,e,!0),$h(i,e,r);break;default:it()}}),Jm.apply(this,arguments)}function CD(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,me.Z)(function*(n,e,t){const r=Bv(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield $o(r.localStore,i),c=yield kc(r.localStore,u);yield Cv(r,Qm(u),c.targetId,!1),Om(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield ap(r.localStore,i,!1).then(()=>{lp(r.remoteStore,i),$h(r,i)}).catch(fu))}}),Uv.apply(this,arguments)}function Bv(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vD.bind(null,e),e.nc.Wo=gD.bind(null,e.eventManager),e.nc._c=qw.bind(null,e.eventManager),e}function pp(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class jv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Lc(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Iw(this.persistence,new ww,e.initialUser,this.It)}gc(e){return new X_(sp.Bs,this.It)}mc(e){return new Aw}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ob extends jv{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield pp(r.Ec.syncEngine),yield Vc(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Iw(this.persistence,new ww,e.initialUser,this.It)}Ic(e,t){return new Z_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new _A(t,this.persistence);return new bE(e.asyncQueue,r)}gc(e){const t=Cm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xs.withCacheSize(this.cacheSizeBytes):xs.DEFAULT;return new Im(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uv(),Nh(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Aw}}class TD extends ob{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof xm&&(r.sharedClientState.syncEngine={Fr:rb.bind(null,i),$r:sb.bind(null,i),Br:CD.bind(null,i),vi:ID.bind(null,i),Or:Gh.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(c){yield function ib(n,e){return Fv.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=uv();if(!xm.C(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Cm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hv{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Av(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wD.bind(null,r.syncEngine),yield Vm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jm}createDatastore(e){const t=Lc(e.databaseInfo.databaseId),r=new Mw(e.databaseInfo);return new Pw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>Av(this.syncEngine,f,0),c=av.C()?new av:new xw,new kw(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,w){const T=new Qw(r,i,u,c,f,y);return w&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ye(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Fh(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ab(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Xm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):bn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SD{constructor(e,t){this.bc=e,this.It=t,this.metadata=new dr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(i);return new zw(JSON.parse(u),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,me.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,me.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const f=Ye(u),y=dh(f.It)+"/documents",w={documents:c.map(L=>em(f.It,L))},T=yield f.fo("BatchGetDocuments",y,w,c.length),x=new Map;T.forEach(L=>{const B=function CA(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=po(t,r.found.name),u=Ur(r.found.updateTime),c=new br({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=po(t,r.missing),u=Ur(r.readTime);return dn.newNoDocument(i,u)}(n,e):it()}(f.It,L);x.set(B.key.toString(),B)});const N=[];return c.forEach(L=>{const B=x.get(L.toString());Ct(!!B),N.push(B)}),N}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=ze.fromPath(i);e.mutations.push(new Zg(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=Ye(i),f=dh(c.It)+"/documents",y={writes:u.map(w=>hh(c.It,w))};yield c.co("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xD{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new Rm(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,me.Z)(function*(){const t=new AD(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Oc(u)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Bg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yg(t)}return!1}}class ub{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Er.UNAUTHENTICATED,this.clientId=_E.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function $v(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield nv(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Gv.apply(this,arguments)}function lb(n,e){return ey.apply(this,arguments)}function ey(){return ey=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qv(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Lm(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Lm(e.remoteStore,u)),n.onlineComponents=e}),ey.apply(this,arguments)}function qv(n){return zv.apply(this,arguments)}function zv(){return zv=(0,me.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield $v(n,new jv)),n.offlineComponents}),zv.apply(this,arguments)}function ty(n){return gp.apply(this,arguments)}function gp(){return gp=(0,me.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield lb(n,new Hv)),n.onlineComponents}),gp.apply(this,arguments)}function ny(n){return qv(n).then(e=>e.persistence)}function mp(n){return qv(n).then(e=>e.localStore)}function ry(n){return ty(n).then(e=>e.remoteStore)}function Wv(n){return ty(n).then(e=>e.syncEngine)}function qh(n){return yp.apply(this,arguments)}function yp(){return yp=(0,me.Z)(function*(n){const e=yield ty(n),t=e.eventManager;return t.onListen=Jw.bind(null,e.syncEngine),t.onUnlisten=hp.bind(null,e.syncEngine),t}),yp.apply(this,arguments)}function Kv(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const w=new Xm({next:x=>{u.enqueueAndForget(()=>Hm(i,T));const N=x.docs.has(c);!N&&x.fromCache?y.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&x.fromCache&&f&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new Gm(vl(c.path),w,{includeMetadataChanges:!0,Nu:!0});return Hn(i,T)}(yield qh(n),n.asyncQueue,e,t,r)})),r.promise}function Zv(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,f,y){const w=new Xm({next:x=>{u.enqueueAndForget(()=>Hm(i,T)),x.fromCache&&"server"===f.source?y.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),T=new Gm(c,w,{includeMetadataChanges:!0,Nu:!0});return Hn(i,T)}(yield qh(n),n.asyncQueue,e,t,r)})),r.promise}const Bc=new Map;function jc(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function db(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kD(n){if(!ze.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yv(n){if(ze.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sy(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hb(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fb{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Rg;switch(t.type){case"gapi":return new mE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bc.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),Bc.delete(e),t.terminate())}(this),Promise.resolve()}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Dr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class os extends Dr{constructor(e,t,r){super(e,t,vl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new ze(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function gb(n,e,...t){if(n=(0,xt.m9)(n),jc("collection","path",e),n instanceof zh){const r=Qt.fromString(e,...t);return Yv(r),new os(n,null,r)}{if(!(n instanceof In||n instanceof os))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return Yv(r),new os(n.firestore,null,r)}}function _p(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=_E.R()),jc("doc","path",e),n instanceof zh){const r=Qt.fromString(e,...t);return kD(r),new In(n,null,new ze(r))}{if(!(n instanceof In||n instanceof os))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return kD(r),new In(n.firestore,n instanceof os?n.converter:null,new ze(r))}}function yb(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof In||n instanceof os)&&(e instanceof In||e instanceof os)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _b(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof Dr&&e instanceof Dr&&n.firestore===e.firestore&&Zf(n._query,e._query)&&n.converter===e.converter}class Qv{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Rm(this,"async_queue_retry"),this.jc=()=>{const t=Nh();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Nh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Nh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new dr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!pi(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,bn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=bv.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(i),i}Wc(){this.qc&&it()}verifyOperationInProgress(){}Yc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Jv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class MA{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends zh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qv,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||VD(this),this._firestoreClient.terminate()}}function Pn(n){return n._firestoreClient||VD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VD(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wA(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new ub(n._authCredentials,n._appCheckCredentials,n._queue,r)}function BD(n,e,t){const r=new dr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield $v(n,t),yield lb(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===he.FAILED_PRECONDITION||c.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;dl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function bb(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sa(wr.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sa(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hc{constructor(e){this._methodName=e}}class oy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const $D=/^__.*__$/;class Ep{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new rs(e,this.data,t,this.fieldTransforms)}}class e0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class wp{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new wp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return qc(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(t0(this.na)&&$D.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class Ib{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Lc(e)}fa(e,t,r,i=!1){return new wp({na:e,methodName:t,la:r,path:Qn.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ml(n){const e=n._freezeSettings(),t=Lc(n._databaseId);return new Ib(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ay(n,e,t,r,i,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,i);Gc("Data must be an object, but it was:",c,r);const f=Db(r,c);let y,w;if(u.merge)y=new ts(c.fieldMask),w=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const N=s0(e,x,t);if(!c.contains(N))throw new Re(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Ip(T,N)||T.push(N)}y=new ts(T),w=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,w=c.fieldTransforms;return new Ep(new br(f),y,w)}class bp extends Hc{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bp}}function Cb(n,e,t){return new wp({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class n0 extends Hc{_toFieldTransform(e){return new ah(e.path,new El)}isEqual(e){return e instanceof n0}}class GD extends Hc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Cb(this,e,!0),r=this.da.map(u=>mi(u,t)),i=new Ac(r);return new ah(e.path,i)}isEqual(e){return this===e}}class qD extends Hc{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=Cb(this,e,!0),r=this.da.map(u=>mi(u,t)),i=new Ia(r);return new ah(e.path,i)}isEqual(e){return this===e}}class zD extends Hc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new oh(e.It,MC(e.It,this._a));return new ah(e.path,t)}isEqual(e){return this===e}}function $c(n,e,t,r){const i=n.fa(1,e,t);Gc("Data must be an object, but it was:",i,r);const u=[],c=br.empty();pu(r,(y,w)=>{const T=cy(e,y,t);w=(0,xt.m9)(w);const x=i.ua(T);if(w instanceof bp)u.push(T);else{const N=mi(w,x);null!=N&&(u.push(T),c.set(T,N))}});const f=new ts(u);return new e0(c,f,i.fieldTransforms)}function r0(n,e,t,r,i,u){const c=n.fa(1,e,t),f=[s0(e,r,t)],y=[i];if(u.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)f.push(s0(e,u[N])),y.push(u[N+1]);const w=[],T=br.empty();for(let N=f.length-1;N>=0;--N)if(!Ip(w,f[N])){const L=f[N];let B=y[N];B=(0,xt.m9)(B);const re=c.ua(L);if(B instanceof bp)w.push(L);else{const _e=mi(B,re);null!=_e&&(w.push(L),T.set(L,_e))}}const x=new ts(w);return new e0(T,x,c.fieldTransforms)}function uy(n,e,t,r=!1){return mi(t,n.fa(r?4:3,e))}function mi(n,e){if(ly(n=(0,xt.m9)(n)))return Gc("Unsupported field value:",e,n),Db(n,e);if(n instanceof Hc)return function(t,r){if(!t0(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=mi(c,r.ca(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return MC(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=On.fromDate(t);return{timestampValue:ch(r.It,i)}}if(t instanceof On){const i=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ch(r.It,i)}}if(t instanceof oy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sa)return{bytesValue:HC(r.It,t._byteString)};if(t instanceof In){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:N_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${sy(t)}`)}(n,e)}function Db(n,e){const t={};return Vg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(n,(r,i)=>{const u=mi(i,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ly(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof oy||n instanceof Sa||n instanceof In||n instanceof Hc)}function Gc(n,e,t){if(!ly(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sy(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function s0(n,e,t){if((e=(0,xt.m9)(e))instanceof bu)return e._internalPath;if("string"==typeof e)return cy(n,e);throw qc("Field path arguments must be of type string or ",n,!1,void 0,t)}const WD=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(WD)>=0)throw qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bu(...e.split("."))._internalPath}catch(r){throw qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qc(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Re(he.INVALID_ARGUMENT,f+n+y)}function Ip(n,e){return n.some(t=>t.isEqual(e))}class Cp{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KD extends Cp{data(){return super.data()}}function Dp(n,e){return"string"==typeof e?cy(n,e):e instanceof bu?e._internalPath:e._delegate._internalPath}class Rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends Cp{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wh extends qo{data(e={}){return super.data(e)}}class Ol{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wh(this._firestore,this._userDataWriter,r.key,r,new Rl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Wh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Wh(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Rl(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),w=u.indexOf(c.doc.key)),{type:ZD(c.type),doc:f,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function YD(n,e){return n instanceof qo&&e instanceof qo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ol&&e instanceof Ol&&n._firestore===e._firestore&&_b(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dy(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zc{}function Iu(n,...e){for(const t of e)n=t._apply(n);return n}class o0 extends zc{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Ml(e.firestore),r=function(i,u,c,f,y,w,T){let x;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Mb(T,w);const L=[];for(const B of T)L.push(c0(f,i,B));x={arrayValue:{values:L}}}else x=c0(f,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Mb(T,w),x=uy(c,"where",T,"in"===w||"not-in"===w);const N=Vr.create(y,w,x);return function(L,B){if(B.dt()){const _e=I_(L);if(null!==_e&&!_e.isEqual(B.field))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${B.field.toString()}'`);const Le=b_(L);null!==Le&&d0(0,B.field,Le)}const re=function(_e,Le){for(const Qe of _e.filters)if(Le.indexOf(Qe.op)>=0)return Qe.op;return null}(L,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==re)throw new Re(he.INVALID_ARGUMENT,re===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${re.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Dr(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new _l(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class QD extends zc{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new sh(i,u);return function(f,y){if(null===b_(f)){const w=I_(f);null!==w&&d0(0,w,y.field)}}(r,c),c}(e._query,this.wa,this.ya);return new Dr(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new _l(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Tb extends zc{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Dr(e.firestore,e.converter,Kf(e._query,this.pa,this.Ia))}}class hy extends zc{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=l0(e,this.type,this.Ta,this.Ea);return new Dr(e.firestore,e.converter,(i=t,new _l((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class u0 extends zc{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=l0(e,this.type,this.Ta,this.Ea);return new Dr(e.firestore,e.converter,(i=t,new _l((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function l0(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof Cp)return function(i,u,c,f,y){if(!f)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const T of Sc(i))if(T.field.isKeyField())w.push(mu(u,f.key));else{const x=f.data.field(T.field);if(Gf(x))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const N=T.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(x)}return new yl(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ml(n.firestore);return function(u,c,f,y,w,T){const x=u.explicitOrderBy;if(w.length>x.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let L=0;L<w.length;L++){const B=w[L];if(x[L].field.isKeyField()){if("string"!=typeof B)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof B}`);if(!C_(u)&&-1!==B.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${B}' contains a slash.`);const re=u.path.child(Qt.fromString(B));if(!ze.isDocumentKey(re))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const _e=new ze(re);N.push(mu(c,_e))}else{const re=uy(f,y,B);N.push(re)}}return new yl(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function c0(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C_(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!ze.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mu(n,new ze(r))}if(t instanceof In)return mu(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sy(t)}.`)}function Mb(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function d0(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const nT={maxAttempts:5};class ri{convertValue(e,t="none"){switch(eh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return pu(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new oy(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ug(e));default:return null}}convertTimestamp(e){const t=gu(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Ct(Mc(r));const i=new wc(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return i.isEqual(t)||bn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Cu(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rT extends ri{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}class Rb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ml(e)}set(e,t,r){this._verifyNotCommitted();const i=Wc(e,this._firestore),u=Cu(i.converter,t,r),c=ay(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Wc(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof bu?r0(this._dataReader,"WriteBatch.update",u._key,t,r,i):$c(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wc(e,this._firestore);return this._mutations=this._mutations.concat(new wl(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wc(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Kc extends ri{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function fy(n,e,t){n=Zt(n,In);const r=Zt(n.firestore,$n),i=Cu(n.converter,e,t);return Zc(r,[ay(Ml(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,xn.none())])}function f0(n,e,t,...r){n=Zt(n,In);const i=Zt(n.firestore,$n),u=Ml(i);let c;return c="string"==typeof(e=(0,xt.m9)(e))||e instanceof bu?r0(u,"updateDoc",n._key,e,t,r):$c(u,"updateDoc",n._key,e),Zc(i,[c.toMutation(n._key,xn.exists(!0))])}function gy(n,...e){var t,r,i;n=(0,xt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Jv(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(Jv(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let y,w,T;if(n instanceof In)w=Zt(n.firestore,$n),T=vl(n._key.path),y={next:x=>{e[c]&&e[c](p0(w,n,x))},error:e[c+1],complete:e[c+2]};else{const x=Zt(n,Dr);w=Zt(x.firestore,$n),T=x._query;const N=new Kc(w);y={next:L=>{e[c]&&e[c](new Ol(w,N,x,L))},error:e[c+1],complete:e[c+2]},dy(n._query)}return function(x,N,L,B){const re=new Xm(B),_e=new Gm(N,re,L);return x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Hn(yield qh(x),_e)})),()=>{re.Rc(),x.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Hm(yield qh(x),_e)}))}}(Pn(w),T,f,y)}function Zc(n,e){return function(t,r){const i=new dr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function _D(n,e,t){return Tv.apply(this,arguments)}(yield Wv(t),r,i)})),i.promise}(Pn(n),e)}function p0(n,e,t){const r=t.docs.get(e._key),i=new Kc(n);return new qo(n,i,e._key,r,new Rl(t.hasPendingWrites,t.fromCache),e.converter)}class Nb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ml(e)}get(e){const t=Wc(e,this._firestore),r=new rT(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const u=i[0];if(u.isFoundDocument())return new Cp(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Cp(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=Wc(e,this._firestore),u=Cu(i.converter,t,r),c=ay(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Wc(e,this._firestore);let c;return c="string"==typeof(t=(0,xt.m9)(t))||t instanceof bu?r0(this._dataReader,"Transaction.update",u._key,t,r,i):$c(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Wc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wc(e,this._firestore),r=new Kc(this._firestore);return super.get(e).then(i=>new qo(this._firestore,r,t._key,i._document,new Rl(!1,!1),t.converter))}}function yy(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function _0(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Lb(){if(!function vA(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ll=Or.SDK_VERSION,(0,Or._registerComponent)(new qi.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new $n(new gE(t.getProvider("auth-internal")),new jf(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(f.options.projectId,y)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Or.registerVersion)(xg,"3.5.0",n),(0,Or.registerVersion)(xg,"3.5.0","esm2017")}();class Sp{constructor(e){this._delegate=e}static fromBase64String(e){return Lb(),new Sp(Sa.fromBase64String(e))}static fromUint8Array(e){return _0(),new Sp(Sa.fromUint8Array(e))}toBase64(){return Lb(),this._delegate.toBase64()}toUint8Array(){return _0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _y(n){return function lT(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Vb{enableIndexedDbPersistence(e,t){return function vb(n,e){bb(n=Zt(n,$n));const t=Pn(n),r=n._freezeSettings(),i=new Hv;return BD(t,i,new ob(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function UD(n){bb(n=Zt(n,$n));const e=Pn(n),t=n._freezeSettings(),r=new Hv;return BD(e,r,new TD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Eb(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!co.C())return Promise.resolve();const i=r+"main";yield co.delete(i)}),function(r){return t.apply(this,arguments)})(Cm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class v0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pb(n,e,t,r={}){var i;const u=(n=Zt(n,zh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&dl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Er.MOCK_USER;else{c=(0,xt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Er(y)}n._authCredentials=new Og(new a_(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function wb(n){return function MD(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ny(n),t=yield ry(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i._u.delete(0),kh(i)}(t)}))}(Pn(n=Zt(n,$n)))}(this._delegate)}disableNetwork(){return function Xv(n){return function cb(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ny(n),t=yield ry(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=Ye(i);u._u.add(0),yield Fh(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Pn(n=Zt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,db("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RA(n){return function(e){const t=new dr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function AA(n,e){return eb.apply(this,arguments)}(yield Wv(e),t)})),t.promise}(Pn(n=Zt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function NA(n,e){return function xA(n,e){const t=new Xm(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield qh(n),i=t,Ye(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield qh(n),i=t,void Ye(r).Ru.delete(i);var r,i}))}}(Pn(n=Zt(n,$n)),Jv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Du(this,gb(this._delegate,e))}catch(t){throw as(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rs(this,_p(this._delegate,e))}catch(t){throw as(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new us(this,function mb(n,e){if(n=Zt(n,zh),jc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dr(n,null,(t=e,new _l(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw as(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function my(n,e,t){n=Zt(n,$n);const r=Object.assign(Object.assign({},nT),t);return function(i){if(i.maxAttempts<1)throw new Re(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function PD(n,e,t){const r=new dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(u=n,ty(u).then(c=>c.datastore));var u;new xD(n.asyncQueue,i,t,e,r).run()})),r.promise}(Pn(n),i=>e(new Nb(n,i)),r)}(this._delegate,t=>e(new Bb(this,t)))}batch(){return Pn(this._delegate),new jb(new Rb(this._delegate,e=>Zc(this._delegate,e)))}loadBundle(e){return function jD(n,e){const t=Pn(n=Zt(n,$n)),r=new MA;return function iy(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,w){if(y instanceof Uint8Array)return ab(y,w);if(y instanceof ArrayBuffer)return ab(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new SD(y,c);var y}(t,Lc(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function DD(n,e,t){const r=Ye(n);var i;(i=(0,me.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(N,L){const B=Ye(N),re=Ur(L.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",_e=>B.Ns.getBundleMetadata(_e,L.id)).then(_e=>!!_e&&_e.createTime.compareTo(re)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(N=y).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);f._updateProgress(Kw(y));const w=new mD(y,u.localStore,c.It);let T=yield c.wc();for(;T;){const N=yield w.Ou(T);N&&f._updateProgress(N),T=yield c.wc()}const x=yield w.complete();return yield wu(u,x.Bu,void 0),yield function(N,L){const B=Ye(N);return B.persistence.runTransaction("Save bundle","readwrite",re=>B.Ns.saveBundleMetadata(re,L))}(u.localStore,y),f._completeWith(x.progress),Promise.resolve(x.$u)}catch(y){return dl("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var N}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Wv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function HD(n,e){return function ND(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield mp(n),e)}))}(Pn(n=Zt(n,$n)),e).then(t=>t?new Dr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new us(this,t):null)}}class Ap extends ri{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(new Sa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rs.forKey(t,this.firestore,null)}}class Bb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}get(e){const t=Zh(e);return this._delegate.get(t).then(r=>new vy(this._firestore,new qo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Zh(e);return r?(yy("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zh(e);return this._delegate.delete(t),this}}class jb{constructor(e){this._delegate=e}set(e,t,r){const i=Zh(e);return r?(yy("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Wh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ey(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Kh(e,new Ap(e),t),i.set(t,u)),u}}Kh.INSTANCES=new WeakMap;class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rs(t,new In(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Rs(t,new In(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Du(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Du(this.firestore,gb(this._delegate,e))}catch(t){throw as(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof In&&yb(this._delegate,e)}set(e,t){t=yy("DocumentReference.set",t);try{return t?fy(this._delegate,e,t):fy(this._delegate,e)}catch(r){throw as(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?f0(this._delegate,e):f0(this._delegate,e,t,...r)}catch(i){throw as(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Pb(n){return Zc(Zt(n.firestore,$n),[new wl(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=cT(e),r=dT(e,i=>new vy(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gy(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function h0(n){n=Zt(n,In);const e=Zt(n.firestore,$n),t=Pn(e),r=new Kc(e);return function RD(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield function(y,w){const T=Ye(y);return T.persistence.runTransaction("read document","readonly",x=>T.localDocuments.getDocument(x,w))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Vh(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield mp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qo(e,r,n._key,i,new Rl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function iT(n){n=Zt(n,In);const e=Zt(n.firestore,$n);return Kv(Pn(e),n._key,{source:"server"}).then(t=>p0(e,n,t))}(this._delegate):function Tp(n){n=Zt(n,In);const e=Zt(n.firestore,$n);return Kv(Pn(e),n._key).then(t=>p0(e,n,t))}(this._delegate),t.then(r=>new vy(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function as(n,e,t){return n.message=n.message.replace(e,t),n}function cT(n){for(const e of n)if("object"==typeof e&&!_y(e))return e;return{}}function dT(n,e){var t,r;let i;return i=_y(n[0])?n[0]:_y(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class vy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return YD(this._delegate,e._delegate)}}class Ey extends vy{data(e){const t=this._delegate.data(e);return function vC(n,e){n||it()}(void 0!==t),t}}class us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ap(e)}where(e,t,r){try{return new us(this.firestore,Iu(this._delegate,function a0(n,e,t){const r=e,i=Dp("where",n);return new o0(i,r,t)}(e,t,r)))}catch(i){throw as(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new us(this.firestore,Iu(this._delegate,function JD(n,e="asc"){const t=e,r=Dp("orderBy",n);return new QD(r,t)}(e,t)))}catch(r){throw as(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new us(this.firestore,Iu(this._delegate,function XD(n){return hb("limit",n),new Tb("limit",n,"F")}(e)))}catch(t){throw as(t,"limit()","Query.limit()")}}limitToLast(e){try{return new us(this.firestore,Iu(this._delegate,function Sb(n){return hb("limitToLast",n),new Tb("limitToLast",n,"L")}(e)))}catch(t){throw as(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new us(this.firestore,Iu(this._delegate,function Ab(...n){return new hy("startAt",n,!0)}(...e)))}catch(t){throw as(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new us(this.firestore,Iu(this._delegate,function eT(...n){return new hy("startAfter",n,!1)}(...e)))}catch(t){throw as(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new us(this.firestore,Iu(this._delegate,function xb(...n){return new u0("endBefore",n,!1)}(...e)))}catch(t){throw as(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new us(this.firestore,Iu(this._delegate,function tT(...n){return new u0("endAt",n,!0)}(...e)))}catch(t){throw as(t,"endAt()","Query.endAt()")}}isEqual(e){return _b(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sT(n){n=Zt(n,Dr);const e=Zt(n.firestore,$n),t=Pn(e),r=new Kc(e);return function OD(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const f=yield Oh(i,u,!0),y=new Yw(u,f.Hi),w=y.ju(f.documents),T=y.applyChanges(w,!1);c.resolve(T.snapshot)}catch(f){const y=Vh(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield mp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ol(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function oT(n){n=Zt(n,Dr);const e=Zt(n.firestore,$n),t=Pn(e),r=new Kc(e);return Zv(t,n._query,{source:"server"}).then(i=>new Ol(e,r,n,i))}(this._delegate):function Ob(n){n=Zt(n,Dr);const e=Zt(n.firestore,$n),t=Pn(e),r=new Kc(e);return dy(n._query),Zv(t,n._query).then(i=>new Ol(e,r,n,i))}(this._delegate),t.then(r=>new Hb(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cT(e),r=dT(e,i=>new Hb(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gy(this._delegate,t,r)}withConverter(e){return new us(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}class VA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ey(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ey(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VA(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ey(this._firestore,r))})}isEqual(e){return YD(this._delegate,e._delegate)}}class Du extends us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rs(this.firestore,e):null}doc(e){try{return new Rs(this.firestore,void 0===e?_p(this._delegate):_p(this._delegate,e))}catch(t){throw as(t,"doc()","CollectionReference.doc()")}}add(e){return function py(n,e){const t=Zt(n.firestore,$n),r=_p(n),i=Cu(n.converter,e);return Zc(t,[ay(Ml(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Rs(this.firestore,t))}isEqual(e){return yb(this._delegate,e._delegate)}withConverter(e){return new Du(this.firestore,this._delegate.withConverter(e?Kh.getInstance(this.firestore,e):null))}}function Zh(n){return Zt(n,In)}class wy{constructor(...e){this._delegate=new bu(...e)}static documentId(){return new wy(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof bu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aT(){return new n0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tu(e)}static delete(){const e=function kb(){return new bp("deleteField")}();return e._methodName="FieldValue.delete",new Tu(e)}static arrayUnion(...e){const t=function g0(...n){return new GD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tu(t)}static arrayRemove(...e){const t=function m0(...n){return new qD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tu(t)}static increment(e){const t=function kA(n){return new zD("increment",n)}(e);return t._methodName="FieldValue.increment",new Tu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $b={Firestore:v0,GeoPoint:oy,Timestamp:On,Blob:Sp,Transaction:Bb,WriteBatch:jb,DocumentReference:Rs,DocumentSnapshot:vy,Query:us,QueryDocumentSnapshot:Ey,QuerySnapshot:Hb,CollectionReference:Du,FieldPath:wy,FieldValue:Tu,setLogLevel:function Ub(n){!function pE(n){cl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function UA(n){(function Gb(n,e){n.INTERNAL.registerComponent(new qi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},$b)))})(n,(e,t)=>new v0(e,t,new Vb)),n.registerVersion("@firebase/firestore-compat","0.1.25")}($u.Z);var Aa=P(7579),qb=P(6451),xp=P(5363),Mp=P(8421);function yi(n,e){return(0,Vt.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Dn.x)(r,y=>{null==i||i.unsubscribe();let w=0;const T=u++;(0,Mp.Xf)(n(y,T)).subscribe(i=(0,Dn.x)(r,x=>r.next(e?e(y,x,T,w++):x),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var zb=P(6063);class hT extends Aa.x{constructor(e=1/0,t=1/0,r=zb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var E0=P(3099);function Wb(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,E0.B)({connector:()=>new hT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const w0=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yh=P(515);function b0(n){return n<=0?()=>Yh.E:(0,Vt.e)((e,t)=>{let r=0;e.subscribe((0,Dn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Kb(n){return(0,Vt.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zb(n=jA){return(0,Vt.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jA(){return new w0}function Yc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zr((i,u)=>n(i,u,r)):Zs.y,b0(1),t?Kb(e):Zb(()=>new w0))}var Rp=P(576);function Yb(n,e){return(0,Rp.m)(e)?yi(()=>n,e):yi(()=>n)}var Os=P(9468);P(5867);const tI=new Map,mT={activated:!1,tokenObservers:[]},nI={initialized:!1,enabled:!1};function Br(n){return tI.get(n)||mT}function Ma(n,e){tI.set(n,e)}function Op(){return nI}class iI{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function vT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function oI(n){if(!Br(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function Ty(n,e){return T0.apply(this,arguments)}function T0(){return T0=(0,me.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const L=yield c.getHeartbeatsHeader();L&&(u["X-Firebase-Client"]=L)}const f={method:"POST",body:JSON.stringify(e),headers:u};let y,w;try{y=yield fetch(n,f)}catch(L){throw _i.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==y.status)throw _i.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(L){throw _i.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const T=w.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const x=1e3*Number(T[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+x,issuedAtTimeMillis:N}}),T0.apply(this,arguments)}function KA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Sy="firebase-app-check-store";let Ay=null;function Pp(){return Ay||(Ay=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(_i.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Sy,{keyPath:"compositeKey"})}}catch(r){e(_i.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Ay)}function Np(){return Np=(0,me.Z)(function*(n,e){const r=(yield Pp()).transaction(Sy,"readwrite"),u=r.objectStore(Sy).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var w;f(_i.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),Np.apply(this,arguments)}const Jc=new Ci.Yd("@firebase/app-check");function DT(n,e){return(0,xt.hl)()?function CT(n,e){return function S0(n,e){return Np.apply(this,arguments)}(function My(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function x0(){return Op().enabled}function dI(){return M0.apply(this,arguments)}function M0(){return M0=(0,me.Z)(function*(){const n=Op();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),M0.apply(this,arguments)}const ST={error:"UNKNOWN_ERROR"};function hI(n){return xt.US.encodeString(JSON.stringify(n),!1)}function kp(n){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,me.Z)(function*(n,e=!1){const t=n.app;oI(t);const r=Br(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&Fp(y)&&(i=y)}if(!e&&i&&Fp(i))return{token:i.token};let f,c=!1;if(x0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ty(KA(t,yield dI()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),c=!0);const y=yield r.exchangeTokenPromise;return yield DT(t,y),Ma(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Jc.warn(y.message):Jc.error(y),u=y}return i?(f={token:i.token},Ma(t,Object.assign(Object.assign({},r),{token:i})),yield DT(t,i)):f=k0(u),c&&AT(t,f),f}),Oy.apply(this,arguments)}function O0(n,e){const t=Br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ma(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function P0(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function N0(n){const{app:e}=n;return new iI((0,me.Z)(function*(){let r;if(r=Br(e).token?yield kp(n,!0):yield kp(n),r.error)throw r.error}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ma(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function AT(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Fp(n){return n.expireTimeMillis-Date.now()>0}function k0(n){return{token:hI(ST),error:n}}class xT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)O0(this.app,t.next);return Promise.resolve()}}const F="app-check-internal";!function G(){(0,Or._registerComponent)(new qi.wA("app-check",n=>function MT(n,e){return new xT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(F).initialize()})),(0,Or._registerComponent)(new qi.wA(F,n=>function JA(n){return{getToken:e=>kp(n,e),addTokenListener:e=>function R0(n,e,t,r){const{app:i}=n,u=Br(i),c={next:t,error:r,type:e};if(Ma(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Fp(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),P0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>P0(n))}(n,"INTERNAL",e),removeTokenListener:e=>O0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Or.registerVersion)("@firebase/app-check","0.5.12")}();class ke{constructor(){return(0,pn.vb)("app-check")}}"undefined"!=typeof window&&window;var Py=P(127);const ox=new m.OlP("angularfire2.auth.use-emulator"),ax=new m.OlP("angularfire2.auth.settings"),ux=new m.OlP("angularfire2.auth.tenant-id"),lx=new m.OlP("angularfire2.auth.langugage-code"),cx=new m.OlP("angularfire2.auth.use-device-language"),dx=new m.OlP("angularfire.auth.persistence"),hx=(n,e,t,r,i,u,c,f)=>(0,yn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[w,T]of Object.entries(c))y.settings[w]=T;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let fx=(()=>{class n{constructor(t,r,i,u,c,f,y,w,T,x,N,L){const B=new Aa.x,re=st(void 0).pipe((0,xp.Q)(c.outsideAngular),yi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,2476)))),(0,Tt.U)(()=>(0,yn.on)(t,u,r)),(0,Tt.U)(_e=>hx(_e,u,f,w,T,x,y,N)),Wb({bufferSize:1,refCount:!1}));if(oa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{re.pipe(Yc()).subscribe();const Le=re.pipe(yi(Ge=>Ge.getRedirectResult().then(mt=>mt,()=>null)),pn.iC,Wb({bufferSize:1,refCount:!1})),Qe=re.pipe(yi(Ge=>new fn.y(mt=>({unsubscribe:u.runOutsideAngular(()=>Ge.onAuthStateChanged(wt=>mt.next(wt),wt=>mt.error(wt),()=>mt.complete()))})))),Xe=re.pipe(yi(Ge=>new fn.y(mt=>({unsubscribe:u.runOutsideAngular(()=>Ge.onIdTokenChanged(wt=>mt.next(wt),wt=>mt.error(wt),()=>mt.complete()))}))));this.authState=Le.pipe(Yb(Qe),(0,Os.R)(c.outsideAngular),(0,xp.Q)(c.insideAngular)),this.user=Le.pipe(Yb(Xe),(0,Os.R)(c.outsideAngular),(0,xp.Q)(c.insideAngular)),this.idToken=this.user.pipe(yi(Ge=>Ge?(0,Yt.D)(Ge.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(yi(Ge=>Ge?(0,Yt.D)(Ge.getIdTokenResult()):st(null))),this.credential=(0,qb.T)(Le,B,this.authState.pipe(Zr(Ge=>!Ge))).pipe((0,Tt.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,Os.R)(c.outsideAngular),(0,xp.Q)(c.insideAngular))}return(0,yn.pX)(this,re,u,{spy:{apply:(_e,Le,Qe)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&Qe.then(Xe=>B.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yn.Dh),m.LFG(yn.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(pn.HU),m.LFG(ox,8),m.LFG(ax,8),m.LFG(ux,8),m.LFG(lx,8),m.LFG(cx,8),m.LFG(dx,8),m.LFG(ke,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function px(n,e){return function FP(n,e=_f.z){return new fn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function FT(n,e){return px(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function vI(n,e){return FT(n,e).pipe(Ks(void 0),Hu(),(0,Tt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(T=>T.doc.ref.isEqual(c.ref)),w=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function gx(n,e,t){return vI(n,t).pipe(Ja((r,i)=>function VP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return LT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return LT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function Xa(n,e=Zs.y){return n=null!=n?n:Ys,(0,Vt.e)((t,r)=>{let i,u=!0;t.subscribe((0,Dn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Tt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function LT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function mx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class yx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ks(void 0),Hu(),Zr(([r,i])=>i.length>0||!r),(0,Tt.U)(([r,i])=>i),pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ja((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mx(e);return gx(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return FT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),pn.iC)}get(e){return(0,Yt.D)(this.query.get(e)).pipe(pn.iC)}add(e){return this.ref.add(e)}doc(e){return new _x(this.ref.doc(e),this.afs)}}class _x{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=wx(r,t);return new yx(i,u,this.afs)}snapshotChanges(){return function LP(n,e){return px(n,e).pipe(Ks(void 0),Hu(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yt.D)(this.ref.get(e)).pipe(pn.iC)}}class BP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zr(t=>t.length>0),pn.iC):vI(this.query,this.afs.schedulers.outsideAngular).pipe(pn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ja((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=mx(e);return gx(this.query,t,this.afs.schedulers.outsideAngular).pipe(pn.iC)}valueChanges(e={}){return FT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),pn.iC)}get(e){return(0,Yt.D)(this.query.get(e)).pipe(pn.iC)}}const vx=new m.OlP("angularfire2.enableFirestorePersistence"),Ex=new m.OlP("angularfire2.firestore.persistenceSettings"),jP=new m.OlP("angularfire2.firestore.settings"),HP=new m.OlP("angularfire2.firestore.use-emulator");function wx(n,e=(t=>t)){return{query:e(n),ref:n}}let bx=(()=>{class n{constructor(t,r,i,u,c,f,y,w,T,x,N,L,B,re,_e,Le,Qe){this.schedulers=y;const Xe=(0,yn.on)(t,f,r),Ge=T;x&&hx(Xe,f,N,B,re,_e,L,Le),[this.firestore,this.persistenceEnabled$]=(0,yn.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const mt=f.runOutsideAngular(()=>Xe.firestore());if(u&&mt.settings(u),Ge&&mt.useEmulator(...Ge),i&&!oa(c)){const wt=()=>{try{return(0,Yt.D)(mt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ht){return"undefined"!=typeof console&&console.warn(Ht),st(!1)}};return[mt,f.runOutsideAngular(wt)]}return[mt,st(!1)]},[u,Ge,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=wx(i,r),f=this.schedulers.ngZone.run(()=>u);return new yx(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new BP(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _x(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yn.Dh),m.LFG(yn.xv,8),m.LFG(vx,8),m.LFG(jP,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(pn.HU),m.LFG(Ex,8),m.LFG(HP,8),m.LFG(fx,8),m.LFG(ox,8),m.LFG(ax,8),m.LFG(ux,8),m.LFG(lx,8),m.LFG(cx,8),m.LFG(dx,8),m.LFG(ke,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$P=(()=>{class n{constructor(){Py.Z.registerVersion("angularfire",pn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:vx,useValue:!0},{provide:Ex,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[bx]}),n})();const Ix="firebasestorage.googleapis.com",Cx="storageBucket";class hr extends xt.ZR{constructor(e,t){super(VT(e),`Firebase Storage: ${t} (${VT(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hr.prototype)}_codeEquals(e){return VT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function VT(n){return"storage/"+n}function UT(){return new hr("unknown","An unknown error occurred, please check the error payload for server response.")}function Dx(){return new hr("canceled","User canceled the upload/download.")}function Tx(){return new hr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ny(n){return new hr("invalid-argument",n)}function Sx(){return new hr("app-deleted","The Firebase app was deleted.")}function Ax(n){return new hr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function B0(n,e){return new hr("invalid-format","String does not match format '"+n+"': "+e)}function j0(n){throw new hr("internal-error","Internal error: "+n)}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch(i){return new ls(e,"")}if(""===r.path)return r;throw function eN(n){return new hr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Ge){Ge.path_=decodeURIComponent(Ge.path)}const x=t.replace(/[.]/g,"\\."),Xe=[{regex:f,indices:{bucket:1,path:3},postModify:function u(Ge){"/"===Ge.path.charAt(Ge.path.length-1)&&(Ge.path_=Ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===Ix?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Ge=0;Ge<Xe.length;Ge++){const mt=Xe[Ge],wt=mt.regex.exec(e);if(wt){let Tr=wt[mt.indices.path];Tr||(Tr=""),r=new ls(wt[mt.indices.bucket],Tr),mt.postModify(r);break}}if(null==r)throw function XP(n){return new hr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class iN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function EI(n){return"string"==typeof n||n instanceof String}function xx(n){return BT()&&n instanceof Blob}function BT(){return"undefined"!=typeof Blob}function jT(n,e,t,r){if(r<e)throw Ny(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ny(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Mx(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Xh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Xh||(Xh={})),Xh))();class cN{constructor(e,t,r,i,u,c,f,y,w,T,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=y,this.timeout_=w,this.progressCallback_=T,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,L)=>{this.resolve_=N,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function aN(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==f){const y=UT();y.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,y):y)}else c(i.canceled?this.appDelete_?Sx():Dx():function JP(){return new hr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new wI(!1,null,!0)):this.backoffId_=function sN(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function y(){return 2===f}let w=!1;function T(..._e){w||(w=!0,e.apply(null,_e))}function x(_e){i=setTimeout(()=>{i=null,n(L,y())},_e)}function N(){u&&clearTimeout(u)}function L(_e,...Le){if(w)return void N();if(_e)return N(),void T.call(null,_e,...Le);if(y()||c)return N(),void T.call(null,_e,...Le);let Xe;r<64&&(r*=2),1===f?(f=2,Xe=0):Xe=1e3*(r+Math.random()),x(Xe)}let B=!1;function re(_e){B||(B=!0,N(),!w&&(null!==i?(_e||(f=2),clearTimeout(i),x(0)):_e||(f=1)))}return x(0),u=setTimeout(()=>{c=!0,re(!0)},t),re}((r,i)=>{if(i)return void r(!1,new wI(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===Xh.NO_ERROR,y=u.getStatus();if(!f||this.isRetryStatusCode_(y)){const T=u.getErrorCode()===Xh.ABORT;return void r(!1,new wI(!1,null,T))}const w=-1!==this.successCodes_.indexOf(y);r(!0,new wI(w,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||u}}class wI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function yN(...n){const e=function mN(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(BT())return new Blob(n);throw new hr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HT{constructor(e,t){this.data=e,this.contentType=t||null}}function $T(n,e){switch(n){case zo.RAW:return new HT(Rx(e));case zo.BASE64:case zo.BASE64URL:return new HT(Ox(n,e));case zo.DATA_URL:return new HT(function wN(n){const e=new Px(n);return e.base64?Ox(zo.BASE64,e.rest):function EN(n){let e;try{e=decodeURIComponent(n)}catch(t){throw B0(zo.DATA_URL,"Malformed data URL.")}return Rx(e)}(e.rest)}(e),function bN(n){return new Px(n).contentType}(e))}throw UT()}function Rx(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ox(n,e){switch(n){case zo.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw B0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw B0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function vN(n){return atob(n)}(e)}catch(i){throw B0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Px{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw B0(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function IN(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Pl{constructor(e,t){let r=0,i="";xx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(xx(this.data_)){const i=function _N(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Pl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Pl(r,!0)}}static getBlob(...e){if(BT()){const t=e.map(r=>r instanceof Pl?r.data_:r);return new Pl(yN.apply(null,t))}{const t=e.map(c=>EI(c)?$T(zo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new Pl(i,!0)}}uploadData(){return this.data_}}function GT(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function lN(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Nx(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function TN(n,e){return e}class Ns{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||TN}}let bI=null;function H0(){if(bI)return bI;const n=[];n.push(new Ns("bucket")),n.push(new Ns("generation")),n.push(new Ns("metageneration")),n.push(new Ns("name","fullPath",!0));const t=new Ns("name");t.xform=function e(u,c){return function SN(n){return!EI(n)||n.length<2?n:Nx(n)}(c)},n.push(t);const i=new Ns("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ns("timeCreated")),n.push(new Ns("updated")),n.push(new Ns("md5Hash",null,!0)),n.push(new Ns("cacheControl",null,!0)),n.push(new Ns("contentDisposition",null,!0)),n.push(new Ns("contentEncoding",null,!0)),n.push(new Ns("contentLanguage",null,!0)),n.push(new Ns("contentType",null,!0)),n.push(new Ns("metadata","customMetadata",!0)),bI=n,bI}function kx(n,e,t){const r=GT(e);return null===r?null:function xN(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function AN(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ls(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function qT(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const Fx="prefixes";class Nl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kl(n){if(!n)throw UT()}function II(n,e){return function t(r,i){const u=kx(n,i,e);return kl(null!==u),u}}function ky(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function YP(){return new hr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ZP(){return new hr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function KP(n){return new hr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function QP(n){return new hr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function $0(n){const e=ky(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function WP(n){return new hr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function Vx(n,e,t){const i=Xc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Nl(i,"GET",II(n,t),c);return f.errorHandler=$0(e),f}function kN(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=Xc(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,T=new Nl(f,"GET",function PN(n,e){return function t(r,i){const u=function ON(n,e,t){const r=GT(t);return null===r?null:function RN(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Fx])for(const i of t[Fx]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new ls(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new ls(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return kl(null!==u),u}}(n,e.bucket),w);return T.urlParams=u,T.errorHandler=ky(e),T}function Bx(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function UN(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class CI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function zT(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){kl(!1)}return kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const $N={STATE_CHANGED:"state_changed"},ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WT(n){switch(n){case"running":case"pausing":case"canceling":return ks.RUNNING;case"paused":return ks.PAUSED;case"success":return ks.SUCCESS;case"canceled":return ks.CANCELED;default:return ks.ERROR}}class GN{constructor(e,t,r){if(function uN(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Fy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class zN extends class qN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw j0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw j0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw j0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw j0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw j0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Su(){return new zN}class Gx{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=H0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function BN(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=Bx(e,r,i),f={name:c.fullPath},y=Xc(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=qT(c,t),B=new Nl(y,"POST",function L(re){let _e;zT(re);try{_e=re.getResponseHeader("X-Goog-Upload-URL")}catch(Le){kl(!1)}return kl(EI(_e)),_e},n.maxUploadRetryTime);return B.urlParams=f,B.headers=T,B.body=x,B.errorHandler=ky(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function jN(n,e,t,r){const y=new Nl(t,"POST",function u(w){const T=zT(w,["active","final"]);let x=null;try{x=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){kl(!1)}x||kl(!1);const N=Number(x);return kl(!isNaN(N)),new CI(N,r.size(),"final"===T)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=ky(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,Su,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new CI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function HN(n,e,t,r,i,u,c,f){const y=new CI(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw function nN(){return new hr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=y.total-y.current;let T=w;i>0&&(T=Math.min(T,i));const x=y.current,B={"X-Goog-Upload-Command":T===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},re=r.slice(x,x+T);if(null===re)throw Tx();const Xe=new Nl(t,"POST",function _e(Ge,mt){const wt=zT(Ge,["active","final"]),Ht=y.current+T,Tr=r.size();let Qo;return Qo="final"===wt?II(e,u)(Ge,mt):null,new CI(Ht,Tr,"final"===wt,Qo)},e.maxUploadRetryTime);return Xe.headers=B,Xe.body=re.uploadData(),Xe.progressCallback=f||null,Xe.errorHandler=ky(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const f=this._ref.storage._makeRequest(c,Su,i,u);this._request=f,f.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Vx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jx(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let Xe="";for(let Ge=0;Ge<2;Ge++)Xe+=Math.random().toString().slice(2);return Xe}();c["Content-Type"]="multipart/related; boundary="+y;const w=Bx(e,r,i),T=qT(w,t),L=Pl.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+y+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===L)throw Tx();const B={name:w.fullPath},re=Xc(u,n.host,n._protocol),Le=n.maxUploadRetryTime,Qe=new Nl(re,"POST",II(n,t),Le);return Qe.urlParams=B,Qe.headers=c,Qe.body=L.uploadData(),Qe.errorHandler=ky(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Su,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Dx(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new GN(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WT(this._state)){case ks.SUCCESS:Fy(this._resolve.bind(null,this.snapshot))();break;case ks.CANCELED:case ks.ERROR:Fy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WT(this._state)){case ks.RUNNING:case ks.PAUSED:e.next&&Fy(e.next.bind(e,this.snapshot))();break;case ks.SUCCESS:e.complete&&Fy(e.complete.bind(e))();break;default:e.error&&Fy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nx(this._location.path)}get storage(){return this._service}get parent(){const e=function CN(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ax(e)}}function zx(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,me.Z)(function*(n,e,t){const i=yield Wx(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zx(n,e,i.nextPageToken))}),KT.apply(this,arguments)}function Wx(n,e){null!=e&&"number"==typeof e.maxResults&&jT("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=kN(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Su)}function ik(n){n._throwIfRoot("getDownloadURL");const e=function FN(n,e,t){const i=Xc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Nl(i,"GET",function NN(n,e){return function t(r,i){const u=kx(n,i,e);return kl(null!==u),function MN(n,e,t,r){const i=GT(e);if(null===i||!EI(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(w=>{const x=n.fullPath;return Xc("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+Mx({alt:"media",token:w})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=$0(e),f}(n.storage,n._location,H0());return n.storage.makeRequestWithTokens(e,Su).then(t=>{if(null===t)throw function rN(){return new hr("no-download-url","The given file does not have any download URLs.")}();return t})}function Kx(n,e){const t=function DN(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ls(n._location.bucket,t);return new Lp(n.storage,r)}function Zx(n,e){if(n instanceof ZT){const t=n;if(null==t._bucket)throw function tN(){return new hr("no-default-bucket","No default bucket found. Did you set the '"+Cx+"' property when initializing the app?")}();const r=new Lp(t,t._bucket);return null!=e?Zx(r,e):r}return void 0!==e?Kx(n,e):n}function uk(n,e){if(e&&function ok(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ZT)return function ak(n,e){return new Lp(n,e)}(n,e);throw Ny("To use ref(service, url), the first argument must be a Storage instance.")}return Zx(n,e)}function Yx(n,e){const t=null==e?void 0:e[Cx];return null==t?null:ls.makeFromBucketSpec(t,n)}class ZT{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=Ix,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):Yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):Yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new iN(Sx());{const u=function gN(n,e,t,r,i,u){const c=Mx(n.urlParams),f=n.url+c,y=Object.assign({},n.headers);return function fN(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function dN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function hN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function pN(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new cN(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const Qx="@firebase/storage";function eM(n,e){return uk(n=(0,xt.m9)(n),e)}function vk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ZT(t,r,i,e,Or.SDK_VERSION)}!function Ek(){(0,Or._registerComponent)(new qi.wA("storage",vk,"PUBLIC").setMultipleInstances(!0)),(0,Or.registerVersion)(Qx,"0.9.9",""),(0,Or.registerVersion)(Qx,"0.9.9","esm2017")}();class DI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class tM{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new DI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new DI(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new DI(c,this,this._ref)):{next:t.next?c=>t.next(new DI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class nM{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ed(e,this._service))}get items(){return this._delegate.items.map(e=>new ed(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ed{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function yk(n,e){return Kx(n,e)}(this._delegate,e);return new ed(t,this.storage)}get root(){return new ed(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ed(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new tM(function ck(n,e,t){return function XN(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Gx(n,new Pl(e),t)}(n=(0,xt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=zo.RAW,r){this._throwIfRoot("putString");const i=$T(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new tM(new Gx(this._delegate,new Pl(i.data,!0),u),this)}listAll(){return function pk(n){return function tk(n){const e={prefixes:[],items:[]};return zx(n,e).then(()=>e)}(n=(0,xt.m9)(n))}(this._delegate).then(e=>new nM(e,this.storage))}list(e){return function fk(n,e){return Wx(n=(0,xt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new nM(t,this.storage))}getMetadata(){return function dk(n){return function nk(n){n._throwIfRoot("getMetadata");const e=Vx(n.storage,n._location,H0());return n.storage.makeRequestWithTokens(e,Su)}(n=(0,xt.m9)(n))}(this._delegate)}updateMetadata(e){return function hk(n,e){return function rk(n,e){n._throwIfRoot("updateMetadata");const t=function LN(n,e,t,r){const u=Xc(e.fullServerUrl(),n.host,n._protocol),f=qT(t,r),w=n.maxOperationRetryTime,T=new Nl(u,"PATCH",II(n,r),w);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=$0(e),T}(n.storage,n._location,e,H0());return n.storage.makeRequestWithTokens(t,Su)}(n=(0,xt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function gk(n){return ik(n=(0,xt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function mk(n){return function sk(n){n._throwIfRoot("deleteObject");const e=function VN(n,e){const r=Xc(e.fullServerUrl(),n.host,n._protocol),f=new Nl(r,"DELETE",function c(y,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=$0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Su)}(n=(0,xt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ax(e)}}class rM{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(iM(e))throw Ny("ref() expected a child path but got a URL, use refFromURL instead.");return new ed(eM(this._delegate,e),this)}refFromURL(e){if(!iM(e))throw Ny("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ls.makeFromUrl(e,this._delegate.host)}catch(t){throw Ny("refFromUrl() expected a valid full URL but got an invalid one.")}return new ed(eM(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function _k(n,e,t,r={}){!function lk(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,xt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function iM(n){return/^[A-Za-z]+:\/\//.test(n)}function Ck(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new rM(t,r)}function sM(n){const e=function Tk(n){return new fn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function GP(n,e=_f.z){return(0,Vt.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=u;u=null,r.next(w)}};function y(){const w=c+n,T=e.now();if(T<w)return i=this.schedule(void 0,w-T),void r.add(i);f()}t.subscribe((0,Dn.x)(r,w=>{u=w,c=e.now(),i||(i=e.schedule(y,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TI(n){return{getDownloadURL:()=>st(void 0).pipe(pn.fc,yi(()=>n.getDownloadURL()),pn.iC),getMetadata:()=>st(void 0).pipe(pn.fc,yi(()=>n.getMetadata()),pn.iC),delete:()=>(0,Yt.D)(n.delete()),child:e=>TI(n.child(e)),updateMetadata:e=>(0,Yt.D)(n.updateMetadata(e)),put:(e,t)=>sM(n.put(e,t)),putString:(e,t,r)=>sM(n.putString(e,t,r)),list:e=>(0,Yt.D)(n.list(e)),listAll:()=>(0,Yt.D)(n.listAll())}}!function Dk(n){const e={TaskState:ks,TaskEvent:$N,StringFormat:zo,Storage:rM,Reference:ed};n.INTERNAL.registerComponent(new qi.wA("storage-compat",Ck,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}($u.Z);const Sk=new m.OlP("angularfire2.storageBucket"),Ak=new m.OlP("angularfire2.storage.maxUploadRetryTime"),xk=new m.OlP("angularfire2.storage.maxOperationRetryTime"),Mk=new m.OlP("angularfire2.storage.use-emulator");let oM=(()=>{class n{constructor(t,r,i,u,c,f,y,w,T,x){const N=(0,yn.on)(t,c,r);this.storage=(0,yn.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const L=c.runOutsideAngular(()=>N.storage(i||void 0)),B=T;return B&&L.useEmulator(...B),y&&L.setMaxUploadRetryTime(y),w&&L.setMaxOperationRetryTime(w),L},[y,w])}ref(t){return TI(this.storage.ref(t))}refFromURL(t){return TI(this.storage.refFromURL(t))}upload(t,r,i){return TI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(yn.Dh),m.LFG(yn.xv,8),m.LFG(Sk,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(pn.HU),m.LFG(Ak,8),m.LFG(xk,8),m.LFG(Mk,8),m.LFG(ke,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),Ok=(()=>{class n{constructor(){Py.Z.registerVersion("angularfire",pn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[oM],imports:[Rk]}),n})();const{isArray:Pk}=Array,{getPrototypeOf:Nk,prototype:kk,keys:Fk}=Object;function aM(n){if(1===n.length){const e=n[0];if(Pk(e))return{args:e,keys:null};if(function Lk(n){return n&&"object"==typeof n&&Nk(n)===kk}(e)){const t=Fk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Vk}=Array;function uM(n){return(0,Tt.U)(e=>function Uk(n,e){return Vk(e)?n(...e):n(e)}(n,e))}function lM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let cM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Vp=(()=>{class n extends cM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Fl=new m.OlP("NgValueAccessor"),Hk={provide:Fl,useExisting:(0,m.Gpc)(()=>SI),multi:!0},Gk=new m.OlP("CompositionEventMode");let SI=(()=>{class n extends cM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $k(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Gk,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([Hk]),m.qOj]}),n})();const cs=new m.OlP("NgValidators"),tf=new m.OlP("NgAsyncValidators");function wM(n){return null!=n}function bM(n){const e=(0,m.QGY)(n)?(0,Yt.D)(n):n;return(0,m.CqO)(e),e}function IM(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function CM(n,e){return e.map(t=>t(n))}function DM(n){return n.map(e=>function zk(n){return!n.validate}(e)?e:t=>e.validate(t))}function YT(n){return null!=n?function TM(n){if(!n)return null;const e=n.filter(wM);return 0==e.length?null:function(t){return IM(CM(t,e))}}(DM(n)):null}function QT(n){return null!=n?function SM(n){if(!n)return null;const e=n.filter(wM);return 0==e.length?null:function(t){return function Bk(...n){const e=(0,To.jO)(n),{args:t,keys:r}=aM(n),i=new fn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,w=c;for(let T=0;T<c;T++){let x=!1;(0,Mp.Xf)(t[T]).subscribe((0,Dn.x)(u,N=>{x||(x=!0,w--),f[T]=N},()=>y--,void 0,()=>{(!y||!x)&&(w||u.next(r?lM(r,f):f),u.complete())}))}});return e?i.pipe(uM(e)):i}(CM(t,e).map(bM)).pipe((0,Tt.U)(IM))}}(DM(n)):null}function AM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JT(n){return n?Array.isArray(n)?n:[n]:[]}function xI(n,e){return Array.isArray(n)?n.includes(e):n===e}function RM(n,e){const t=JT(e);return JT(n).forEach(i=>{xI(t,i)||t.push(i)}),t}function OM(n,e){return JT(e).filter(t=>!xI(n,t))}class PM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class nf extends PM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Fs extends PM{get formDirective(){return null}get path(){return null}}let kM=(()=>{class n extends class NM{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(nf,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})();function G0(n,e){(function tS(n,e){const t=function xM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(AM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function MM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(AM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();PI(e._rawValidators,i),PI(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function t1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&LM(n,e)})}(n,e),function r1(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function n1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&LM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function e1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const q0="VALID",kI="INVALID",Ly="PENDING",z0="DISABLED";function oS(n){return(FI(n)?n.validators:n)||null}function jM(n){return Array.isArray(n)?YT(n):n||null}function aS(n,e){return(FI(e)?e.asyncValidators:n)||null}function HM(n){return Array.isArray(n)?QT(n):n||null}function FI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const uS=n=>n instanceof cS;function GM(n){return(n=>n instanceof WM)(n)?n.value:n.getRawValue()}function qM(n,e){const t=uS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function zM(n,e){uS(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new m.vHH(1002,"")})}class lS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=jM(this._rawValidators),this._composedAsyncValidatorFn=HM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===q0}get invalid(){return this.status===kI}get pending(){return this.status==Ly}get disabled(){return this.status===z0}get enabled(){return this.status!==z0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=jM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=HM(e)}addValidators(e){this.setValidators(RM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OM(e,this._rawAsyncValidators))}hasValidator(e){return xI(this._rawValidators,e)}hasAsyncValidator(e){return xI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ly,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=z0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=q0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===q0||this.status===Ly)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?z0:q0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ly,this._hasOwnPendingAsyncValidator=!0;const t=bM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function a1(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=uS(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof l1)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?z0:this.errors?kI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ly)?Ly:this._anyControlsHaveStatus(kI)?kI:q0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class WM extends lS{constructor(e=null,t,r){super(oS(t),aS(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class cS extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zM(this,e),Object.keys(e).forEach(r=>{qM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=GM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class l1 extends lS{constructor(e,t,r){super(oS(t),aS(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zM(this,e),e.forEach((r,i)=>{qM(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>GM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const h1={provide:nf,useExisting:(0,m.Gpc)(()=>hS)},YM=(()=>Promise.resolve(null))();let hS=(()=>{class n extends nf{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new WM,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function rS(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===SI?t=u:function o1(n){return Object.getPrototypeOf(n.constructor)===Vp}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nS(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){G0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){YM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;YM.then(()=>{var u;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function RI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Fs,9),m.Y36(cs,10),m.Y36(tf,10),m.Y36(Fl,10),m.Y36(m.sBO,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([h1]),m.qOj,m.TTD]}),n})(),JM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const I1={provide:Fl,useExisting:(0,m.Gpc)(()=>LI),multi:!0};function sR(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let LI=(()=>{class n extends Vp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=sR(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function C1(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([I1]),m.qOj]}),n})(),oR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(sR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(LI,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const D1={provide:Fl,useExisting:(0,m.Gpc)(()=>mS),multi:!0};function aR(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let mS=(()=>{class n extends Vp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let f=0;f<c.length;f++){const w=this._getOptionValue(c[f].value);i.push(w)}}else{const c=r.options;for(let f=0;f<c.length;f++){const y=c[f];if(y.selected){const w=this._getOptionValue(y.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function T1(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([D1]),m.qOj]}),n})(),uR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(aR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(aR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(mS,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),F1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[JM]]}),n})(),L1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[F1]}),n})();function V1(n,e){1&n&&(m.TgZ(0,"div",27)(1,"div",28),m._uU(2,"Uploading certificate..."),m.qZA()())}function U1(n,e){if(1&n&&(m.TgZ(0,"option",29),m._uU(1),m.qZA()),2&n){const t=e.$implicit;m.Q6J("value",t.eventId),m.xp6(1),m.Oqu(t.eventName)}}function B1(n,e){if(1&n&&m._UZ(0,"img",30),2&n){const t=m.oxw();m.s9C("src",t.url,m.LSH)}}function j1(n,e){1&n&&(m.TgZ(0,"div")(1,"h5"),m._uU(2,"Drag files here to upload"),m.qZA(),m.TgZ(3,"p",31),m._uU(4,"or "),m.TgZ(5,"b",32),m._uU(6,"browse"),m.qZA(),m._uU(7," to choose files."),m.qZA()())}function H1(n,e){if(1&n&&(m.TgZ(0,"span",33),m._uU(1),m.qZA()),2&n){const t=m.oxw();m.Q6J("ngClass",t.success?"text-success":"text-danger"),m.xp6(1),m.Oqu(t.alert)}}let _R=(()=>{class n{constructor(t,r){this.afStorage=r,this.eventId=0,this.success=!1,this.loading=!1,this.itemsCollection=t.collection("certificate"),t.collection("eventDetail").valueChanges().subscribe(i=>{this.items=i})}ngOnInit(){}onSelectFile(t){var r=this;return(0,me.Z)(function*(){if(r.event=t,t.target.files&&t.target.files[0]){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=u=>{r.url=u.target.result}}})()}uploadImage(){var t=this;return(0,me.Z)(function*(){if(!t.aadharNumber)return t.alert="*Please enter aadhar number",void t.clearError();if(12!=t.aadharNumber.toString().length)return t.alert="*Please enter valid aadhar number",void t.clearError();if(0==t.eventId)return t.alert="*Please select event of certificate",void t.clearError();if(!t.event)return t.alert="*Please select certificate to upload",void t.clearError();if(t.loading=!0,t.event.target.files&&t.event.target.files[0]){const i=t.event.target.files[0],u=new FileReader;u.onload=c=>t.imageSrc=u.result,u.readAsDataURL(i)}const r=Math.random().toString(36).substring(2);t.ref=t.afStorage.ref(r),t.task=t.ref.put(t.event.target.files[0]).then(i=>{}),yield t.task,t.ref.getDownloadURL().subscribe(i=>{t.image=i,t.addDataToDB()})})()}addDataToDB(){this.itemsCollection.add({aadhaarNumber:this.aadharNumber,certificateUrl:this.image,eventId:this.eventId}).then(r=>{r&&(this.loading=!1,this.aadharNumber=null,this.eventId=0,this.image=null,this.url=null,this.alert="Certificate Uploaded successfully",this.success=!0,this.clearError())},r=>{console.log("Fail to add data",r),this.alert="*Unable to upload certificate. Please try again later."})}clearError(){setTimeout(()=>{this.alert="",this.success=!1},2e3)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(bx),m.Y36(oM))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-upload-certificate"]],decls:41,vars:7,consts:[["class","loading",4,"ngIf"],[1,"container","shadow2","bg-border","mt-20"],[1,"bold","text-danger"],[1,"text-danger"],[1,"shadow"],[1,"upload-title","mt-20"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"row","mt-20"],[1,"col-12","col-lg-6","margin-auto","title"],[1,"col-12","col-lg-6"],["type","text",1,"box-border",3,"ngModel","ngModelChange"],[1,"pointer"],[1,"box-border",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"upload-file"],[1,"plus-border"],["type","file","id","fileElem","multiple","","accept","image/*",3,"change"],[1,"plus-icon"],[1,"uploadContainer"],[1,"uploadDropzone"],["type","file","id","fileElem","multiple","","accept","image/*",1,"choose-input",3,"change"],["class","url-img",3,"src",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"row"],[1,"col-12","text-center"],["type","button",1,"btn","btn-blue",3,"click"],[1,"loading"],[1,"loading-text"],[3,"value"],[1,"url-img",3,"src"],[1,"text-muted"],[2,"color","#0586d7"],[3,"ngClass"]],template:function(t,r){1&t&&(m.YNc(0,V1,3,0,"div",0),m.TgZ(1,"section",1)(2,"div",2),m._uU(3,"*Note"),m.qZA(),m.TgZ(4,"div",3),m._uU(5,"1. Upload Clear photo or certificate make sure that all letters are visible"),m.qZA(),m.TgZ(6,"div",3),m._uU(7,"2. File type must be in (jpg/jpeg/png)."),m.qZA(),m.TgZ(8,"div",3),m._uU(9,"3. File size must be below 2mb"),m.qZA(),m.TgZ(10,"div",4)(11,"div",5),m._uU(12,"Upload certificate"),m.qZA(),m.TgZ(13,"div",6)(14,"div",7)(15,"div",8),m._uU(16," *Aadhar card number "),m.qZA(),m.TgZ(17,"div",9)(18,"input",10),m.NdJ("ngModelChange",function(u){return r.aadharNumber=u}),m.qZA()()(),m.TgZ(19,"div",7)(20,"div",8),m._uU(21," *Event Name "),m.qZA(),m.TgZ(22,"div",9)(23,"span",11)(24,"select",12),m.NdJ("ngModelChange",function(u){return r.eventId=u}),m.YNc(25,U1,2,2,"option",13),m.qZA()()()(),m.TgZ(26,"div",14)(27,"div",15)(28,"input",16),m.NdJ("change",function(u){return r.onSelectFile(u)}),m.qZA(),m.TgZ(29,"div",17),m._uU(30,"+"),m.qZA()(),m.TgZ(31,"div",18)(32,"div",19)(33,"input",20),m.NdJ("change",function(u){return r.onSelectFile(u)}),m.qZA(),m.YNc(34,B1,1,1,"img",21),m.YNc(35,j1,8,0,"div",22),m.qZA()()(),m.YNc(36,H1,2,2,"span",23),m.TgZ(37,"div",24)(38,"div",25)(39,"button",26),m.NdJ("click",function(){return r.uploadImage()}),m._uU(40,"Submit"),m.qZA()()()()()()),2&t&&(m.Q6J("ngIf",r.loading),m.xp6(18),m.Q6J("ngModel",r.aadharNumber),m.xp6(6),m.Q6J("ngModel",r.eventId),m.xp6(1),m.Q6J("ngForOf",r.items),m.xp6(9),m.Q6J("ngIf",r.url),m.xp6(1),m.Q6J("ngIf",!r.url),m.xp6(1),m.Q6J("ngIf",r.alert))},directives:[ar,SI,kM,hS,LI,er,oR,uR,gs],styles:['@charset "UTF-8";.drop-it-hot[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px;margin-top:20px;height:186px;margin-left:auto;margin-right:auto;position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 15px #0000001a;overflow:hidden}.drop-it-hot[_ngcontent-%COMP%]:after{content:"";position:absolute;width:calc(100% - 20px);height:calc(100% - 20px);border:none;border-radius:5px;z-index:0}.drop-it-hot[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;position:absolute;color:var(--accent);background-color:#0586d7;border:3px solid #eae4e4;width:100px;height:100px;top:12px}.circle[_ngcontent-%COMP%]{transition:transform .15s ease-in;z-index:10}.circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.circle[_ngcontent-%COMP%]:before{content:"";background-color:var(--accent);width:130px;height:130px;border-radius:50%;position:absolute;opacity:0;transition:transform .25s ease-in,opacity .2s ease-in;z-index:0}.circle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100px;height:100px;border-radius:50%}.circle[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:.9}.circle[_ngcontent-%COMP%]:hover:before{transform:scale(8);opacity:1}.circle[_ngcontent-%COMP%]:hover:after{border:3px solid white}.circle[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.highlight[_ngcontent-%COMP%]:before{transform:scale(8);opacity:1}.highlight[_ngcontent-%COMP%]:after{border:3px solid white}.highlight[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;z-index:1}.choose-files[_ngcontent-%COMP%]{align-self:flex-end;z-index:10}.button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:40px;position:relative;overflow:hidden;top:26px;cursor:pointer}.button-wrapper[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background-color:#0986d9}.label[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--dark-gray);font-size:18px}.button-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{font-size:100px;position:absolute;left:0;top:0;opacity:0}.btn[_ngcontent-%COMP%]{border:none;padding:10px 20px;border-radius:50px;background-color:#0986d9;color:#fff;font-size:16px;cursor:pointer;transition:background-color .2s ease-in}#gallery[_ngcontent-%COMP%]{position:absolute;height:100%;top:0;left:0;z-index:100}#gallery[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;filter:contrast(var(--contrast)) brightness(var(--brightness)) sepia(var(--sepia)) hue-rotate(var(--hue-rotate))}.editor[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:700px;padding:20px;box-sizing:border-box;background-color:#fff;margin-top:-10px;z-index:100;opacity:0;transform:translateY(50px)}.is-visible[_ngcontent-%COMP%]{transition:transform .5s ease-in-out,opacity .5s ease-in-out;opacity:1;transform:translateY(0)}.range-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%}.range[_ngcontent-%COMP%]{-webkit-appearance:none;height:2px;border-radius:5px;background:var(--gray);outline:none;padding:0;margin:10px 0}[_ngcontent-%COMP%]::-moz-range-track{background:var(--gray);border:0}input[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-outer{border:0}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}input[type=range][_ngcontent-%COMP%]::-ms-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:8px;background-color:var(--accent);cursor:pointer}.loading[_ngcontent-%COMP%]{position:fixed;z-index:999;inset:0;display:block;height:130px;color:#fff!important;font-size:20px!important;width:100%;margin:auto!important;text-align:center}.loading[_ngcontent-%COMP%]:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffff80}.loading[_ngcontent-%COMP%]:not(:required){font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;margin:auto}.loading[_ngcontent-%COMP%]:not(:required):after{content:"";display:block;font-size:10px;width:90px;height:90px;border:5px solid #82dff1;border-bottom-color:transparent;animation:spinner 1s linear 0s infinite;margin:auto;border-radius:100%}.loading-text[_ngcontent-%COMP%]{position:relative;bottom:0;line-height:20px;top:130px;background-color:#222223bf;padding:7px;border-radius:5px;font-weight:700;width:-moz-fit-content;width:fit-content;margin:auto}.uploadDropzone[_ngcontent-%COMP%]{border:thin dashed #aaa;padding:40px;text-align:center;border-radius:5px}.uploadDropzone[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]{font-size:48px;line-height:1;opacity:.5}.uploadMessage[_ngcontent-%COMP%]{margin-top:.5rem}.uploadProgress[_ngcontent-%COMP%]{margin-top:.5rem;background-color:#fff;border:thin solid #aaa;border-radius:3px}.uploadProgress[_ngcontent-%COMP%]:empty{background:none;margin:0;border:0}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{position:relative;background-color:#fff;white-space:nowrap;border-bottom:thin solid #d2d2d2;line-height:35px;padding:0 0 0 10px}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:last-child{border-bottom:0}.uploadProgress[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.uploadProgress[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;float:left;white-space:nowrap;max-width:300px;overflow:hidden;text-overflow:ellipsis}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{display:block;float:left;white-space:nowrap;color:#aaa;padding-left:5px}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]:before{content:"("}.uploadProgress[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]:after{content:")"}.uploadProgress[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:block;float:right;width:180px;margin-top:15px;margin-right:10px}.uploadProgress[_ngcontent-%COMP%]   .deleteAttachment[_ngcontent-%COMP%]{display:block;float:right;padding:0;background-color:transparent!important;border:0!important;background-image:none;line-height:inherit}.deleteAttachment[_ngcontent-%COMP%]:after{content:"\\d7";display:block;line-height:inherit;width:35px;text-align:center;color:#0000004d;font-family:sans-serif;font-size:18px;font-weight:700}.uploadProgress[_ngcontent-%COMP%]   .wrapper.success[_ngcontent-%COMP%]{color:green}.uploadProgress[_ngcontent-%COMP%]   .wrapper.error[_ngcontent-%COMP%]{color:red}.uploadProgress[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%], .uploadProgress[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:none}.plus-border[_ngcontent-%COMP%]{font-size:5rem;color:#fff;margin-top:-33px;background:#0586d7;border-radius:50%;height:70px;margin-right:-10px;width:70px;padding:15px;float:right;cursor:pointer}.plus-icon[_ngcontent-%COMP%]{font-size:42px;padding:0 7px;margin-top:-14px;color:#fff}.plus-border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:4px;position:absolute;height:57px;margin-top:-6px;width:56px;margin-left:-8px;opacity:0}.upload-file[_ngcontent-%COMP%]{width:600px;margin:50px auto}.url-img[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:10px}.choose-input[_ngcontent-%COMP%]{min-height:151px;position:-14px;position:absolute;top:153px;left:16px;opacity:0}.shadow2[_ngcontent-%COMP%]{box-shadow:0 0 15px 2px #88888852!important;height:auto;background:url(ble.1181e86b4a546130.jpg);background-size:cover!important;background-repeat:no-repeat!important;background-position:left bottom!important;background-attachment:fixed!important}']}),n})(),$1=(()=>{class n{constructor(){this.title="angular-tour-of-heroes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:36,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-static"],[1,"container","sub-logo"],[1,"fw-300","white","font-header","justify-content-between","align-items-center","mb-display"],[1,"flex"],["href","#home","title","Logo",1,"logo","scroll"],["src","assets/img/logo.jpeg","alt","logo","width","100px",1,"logo-dark","logo-dark-res","default"],[1,"text-center","ml-10","ml-30-res"],[1,"vks"],["src","assets/img/profile-img.png",1,"logo-dark","logo-dark-res","ml-10","ml-35-res"],[1,"font-14","mt-20","text-center"],["id","ntg",1,"row","fw-500","white","font-header","justify-content-between","align-items-center","lg-display"],[1,"col-2","text-center"],["src","assets/img/logo.jpeg","alt","logo","width","100px",1,"logo-dark","default"],[1,"col-8","font-16","text-center"],[1,"ml-20"],[1,"font-30"],["src","assets/img/profile-img.png",1,"logo-dark"],[1,"mt-50","row"],[1,"col-12","text-center"],[1,"info","footer_text"],[1,"footer","mt-30"],["target","_blank","href","https://www.instagram.com/ajithjilla_treat/"]],template:function(t,r){1&t&&(m.TgZ(0,"header")(1,"nav",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),m._UZ(6,"img",5),m.qZA(),m.TgZ(7,"div",6)(8,"span",7),m._uU(9,"V.K.S"),m.qZA()(),m._UZ(10,"img",8),m.qZA(),m.TgZ(11,"div",9)(12,"div"),m._uU(13," SILAMBAM & YOGA MARTIALARTS TRUST"),m.qZA(),m._uU(14," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION "),m.qZA()(),m.TgZ(15,"div",10)(16,"div",11)(17,"a",4),m._UZ(18,"img",12),m.qZA()(),m.TgZ(19,"div",13)(20,"div",14),m._uU(21," SOUTH INDIAN TRADITIONAL SILIMBAM SPORTS ASSOCIATION "),m.TgZ(22,"div",15),m._uU(23," V.K.S.SILAMBAM & YOGA MARTIALARTS TRUST"),m.qZA()()(),m.TgZ(24,"div",11),m._UZ(25,"img",16),m.qZA()()()()(),m._UZ(26,"app-upload-certificate"),m.TgZ(27,"div",17)(28,"div",18)(29,"p",19),m._uU(30,"Copyright \xa9 2022 VKS Trust,. All rights reserved."),m.qZA(),m._UZ(31,"br"),m.TgZ(32,"span",20),m._uU(33,"Designed By: "),m.TgZ(34,"a",21),m._uU(35,"Ajith"),m.qZA()()()())},directives:[_R],styles:[".vks[_ngcontent-%COMP%]{font-size:3rem;font-weight:300}.sub-logo[_ngcontent-%COMP%]{position:relative;top:-18px}.ml-10[_ngcontent-%COMP%]{margin-left:10px}.font-header[_ngcontent-%COMP%]{font-family:auto}"]}),n})();class Au extends Aa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var G1=P(9672);function vR(n,e,t){n?(0,G1.f)(t,n,e):e()}function VI(n,e){const t=(0,Rp.m)(n)?n:()=>n,r=i=>i.error(t());return new fn.y(e?i=>e.schedule(r,0,i):r)}function ER(n){return new fn.y(e=>{(0,Mp.Xf)(n()).subscribe(e)})}var wR=P(727);function bR(){return(0,Vt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Dn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class W1 extends fn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Vt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wR.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wR.w0.EMPTY)}return e}refCount(){return bR()(this)}}function rf(n){return(0,Vt.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Dn.x)(t,void 0,void 0,c=>{u=(0,Mp.Xf)(n(c,rf(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var ds=P(5577);function Vy(n,e){return(0,Rp.m)(e)?(0,ds.z)(n,e,1):(0,ds.z)(n,1)}function _S(n){return n<=0?()=>Yh.E:(0,Vt.e)((e,t)=>{let r=[];e.subscribe((0,Dn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Wo=P(8505);class td{constructor(e,t){this.id=e,this.url=t}}class vS extends td{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class K0 extends td{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class IR extends td{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y1 extends td{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q1 extends td{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J1 extends td{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X1 extends td{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class eF extends td{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tF extends td{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CR{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class DR{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nF{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rF{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iF{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sF{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TR{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class oF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uy(n){return new oF(n)}const SR="ngNavigationCancelingError";function ES(n){const e=Error("NavigationCancelingError: "+n);return e[SR]=!0,e}function uF(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ll(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!AR(n[i],e[i]))return!1;return!0}function AR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function xR(n){return Array.prototype.concat.apply([],n)}function MR(n){return n.length>0?n[n.length-1]:null}function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vl(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Yt.D)(Promise.resolve(n)):st(n)}const dF={exact:function PR(n,e,t){if(!jp(n.segments,e.segments)||!UI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!PR(n.children[r],e.children[r],t))return!1;return!0},subset:NR},RR={exact:function hF(n,e){return Ll(n,e)},subset:function fF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AR(n[t],e[t]))},ignored:()=>!0};function OR(n,e,t){return dF[t.paths](n.root,e.root,t.matrixParams)&&RR[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function NR(n,e,t){return kR(n,e,e.segments,t)}function kR(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!jp(i,t)||e.hasChildren()||!UI(i,t,r))}if(n.segments.length===t.length){if(!jp(n.segments,t)||!UI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!NR(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(jp(n.segments,i)&&UI(n.segments,i,r)&&n.children[Wt])&&kR(n.children[Wt],e,u,r)}}function UI(n,e,t){return e.every((r,i)=>RR[t](n[i].parameters,r.parameters))}class Bp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uy(this.queryParams)),this._queryParamMap}toString(){return mF.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ai(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return BI(this)}}class Z0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uy(this.parameters)),this._parameterMap}toString(){return BR(this)}}function jp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class FR{}class LR{parse(e){const t=new DF(e);return new Bp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Y0(e.root,!0)}`,r=function vF(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${jI(t)}=${jI(i)}`).join("&"):`${jI(t)}=${jI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function yF(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const mF=new LR;function BI(n){return n.segments.map(e=>BR(e)).join("/")}function Y0(n,e){if(!n.hasChildren())return BI(n);if(e){const t=n.children[Wt]?Y0(n.children[Wt],!1):"",r=[];return Ai(n.children,(i,u)=>{u!==Wt&&r.push(`${u}:${Y0(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function gF(n,e){let t=[];return Ai(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),Ai(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[Y0(n.children[Wt],!1)]:[`${i}:${Y0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${BI(n)}/${t[0]}`:`${BI(n)}/(${t.join("//")})`}}function VR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jI(n){return VR(n).replace(/%3B/gi,";")}function wS(n){return VR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function HI(n){return decodeURIComponent(n)}function UR(n){return HI(n.replace(/\+/g,"%20"))}function BR(n){return`${wS(n.path)}${function _F(n){return Object.keys(n).map(e=>`;${wS(e)}=${wS(n[e])}`).join("")}(n.parameters)}`}const EF=/^[^\/()?;=#]+/;function $I(n){const e=n.match(EF);return e?e[0]:""}const wF=/^[^=?&#]+/,IF=/^[^&#]+/;class DF{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Xt(e,t)),r}parseSegment(){const e=$I(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Z0(HI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=$I(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=$I(this.remaining);i&&(r=i,this.capture(r))}e[HI(t)]=HI(r)}parseQueryParam(e){const t=function bF(n){const e=n.match(wF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function CF(n){const e=n.match(IF);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=UR(t),u=UR(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$I(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Wt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Wt]:new Xt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class jR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=bS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=IS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return IS(e,this._root).map(t=>t.value)}}function bS(n,e){if(n===e.value)return e;for(const t of e.children){const r=bS(n,t);if(r)return r}return null}function IS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=IS(n,t);if(r.length)return r.unshift(e),r}return[]}class nd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function By(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class HR extends jR{constructor(e,t){super(e),this.snapshot=t,CS(this,e)}toString(){return this.snapshot.toString()}}function $R(n,e){const t=function TF(n,e){const c=new GI([],{},{},"",{},Wt,e,null,n.root,-1,{});return new qR("",new nd(c,[]))}(n,e),r=new Au([new Z0("",{})]),i=new Au({}),u=new Au({}),c=new Au({}),f=new Au(""),y=new jy(r,i,c,f,u,Wt,e,t.root);return y.snapshot=t.root,new HR(new nd(y,[]),t)}class jy{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>Uy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>Uy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function GR(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function SF(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class GI{constructor(e,t,r,i,u,c,f,y,w,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qR extends jR{constructor(e,t){super(t),this.url=e,CS(this,t)}toString(){return zR(this._root)}}function CS(n,e){e.value._routerState=n,e.children.forEach(t=>CS(n,t))}function zR(n){const e=n.children.length>0?` { ${n.children.map(zR).join(", ")} } `:"";return`${n.value}${e}`}function DS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ll(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ll(e.params,t.params)||n.params.next(t.params),function lF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ll(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ll(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function TS(n,e){const t=Ll(n.params,e.params)&&function pF(n,e){return jp(n,e)&&n.every((t,r)=>Ll(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||TS(n.parent,e.parent))}function Q0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function xF(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Q0(n,r,i);return Q0(n,r)})}(n,e,t);return new nd(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Q0(n,f)),c}}const r=function MF(n){return new jy(new Au(n.url),new Au(n.params),new Au(n.queryParams),new Au(n.fragment),new Au(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Q0(n,u));return new nd(r,i)}}function qI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function J0(n){return"object"==typeof n&&null!=n&&n.outlets}function SS(n,e,t,r,i){let u={};if(r&&Ai(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),n===e)return new Bp(t,u,i);const c=WR(n,e,t);return new Bp(c,u,i)}function WR(n,e,t){const r={};return Ai(n.children,(i,u)=>{r[u]=i===e?t:WR(i,e,t)}),new Xt(n.segments,r)}class KR{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qI(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(J0);if(i&&i!==MR(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class AS{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZR(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return zI(n,e,t);const r=function FF(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(J0(f))break;const y=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!QR(y,w,c))return u;r+=2}else{if(!QR(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[Wt]=new Xt(n.segments.slice(r.pathIndex),n.children),zI(u,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?xS(n,e,t):r.match?zI(n,0,i):xS(n,e,t)}function zI(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function kF(n){return J0(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return Ai(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=ZR(n.children[c],e,u))}),Ai(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Xt(n.segments,i)}}function xS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(J0(u)){const y=LF(u.outlets);return new Xt(r,y)}if(0===i&&qI(t[0])){r.push(new Z0(n.segments[e].path,YR(t[0]))),i++;continue}const c=J0(u)?u.outlets[Wt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&qI(f)?(r.push(new Z0(c,YR(f))),i+=2):(r.push(new Z0(c,{})),i++)}return new Xt(r,{})}function LF(n){const e={};return Ai(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xS(new Xt([],{}),0,t))}),e}function YR(n){const e={};return Ai(n,(t,r)=>e[r]=`${t}`),e}function QR(n,e,t){return n==t.path&&Ll(e,t.parameters)}class UF{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=By(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Ai(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=By(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=By(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=By(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new sF(u.value.snapshot))}),e.children.length&&this.forwardEvent(new rF(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(DS(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),DS(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function BF(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class MS{constructor(e,t){this.routes=e,this.module=t}}function sf(n){return"function"==typeof n}function Hp(n){return n instanceof Bp}const X0=Symbol("INITIAL_VALUE");function eE(){return yi(n=>function q1(...n){const e=(0,To.yG)(n),t=(0,To.jO)(n),{args:r,keys:i}=aM(n);if(0===r.length)return(0,Yt.D)([],e);const u=new fn.y(function z1(n,e,t=Zs.y){return r=>{vR(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)vR(e,()=>{const w=(0,Yt.D)(n[y],e);let T=!1;w.subscribe((0,Dn.x)(r,x=>{u[y]=x,T||(T=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>lM(i,c):Zs.y));return t?u.pipe(uM(t)):u}(n.map(e=>e.pipe(b0(1),Ks(X0)))).pipe(Ja((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==X0?i:(u===X0&&(r=!0),r||!1!==u&&c!==t.length-1&&!Hp(u)?i:u),e)},X0),Zr(e=>e!==X0),(0,Tt.U)(e=>Hp(e)?e:!0===e),b0(1)))}class zF{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tE,this.attachRef=null}}class tE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new zF,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let JR=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=u||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new WF(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(tE),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class WF{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jy?this.route:e===tE?this.childContexts:this.parent.get(e,t)}}let XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[JR],encapsulation:2}),n})();function eO(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];KF(r,ZF(e,r))}}function KF(n,e){n.children&&eO(n.children,e)}function ZF(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function RS(n){const e=n.children&&n.children.map(RS),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=XR),t}function Ra(n){return n.outlet||Wt}function tO(n,e){const t=n.filter(r=>Ra(r)===e);return t.push(...n.filter(r=>Ra(r)!==e)),t}const nO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},nO):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||uF)(t,n,e);if(!u)return Object.assign({},nO);const c={};Ai(u.posParams,(y,w)=>{c[w]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function KI(n,e,t,r,i="corrected"){if(t.length>0&&function JF(n,e,t){return t.some(r=>ZI(n,e,r)&&Ra(r)!==Wt)}(n,t,r)){const c=new Xt(e,function QF(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ra(u)!==Wt){const c=new Xt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ra(u)]=c}return i}(n,e,r,new Xt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function XF(n,e,t){return t.some(r=>ZI(n,e,r))}(n,t,r)){const c=new Xt(n.segments,function YF(n,e,t,r,i,u){const c={};for(const f of r)if(ZI(n,t,f)&&!i[Ra(f)]){const y=new Xt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ra(f)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Xt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ZI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rO(n,e,t,r){return!!(Ra(n)===r||r!==Wt&&ZI(e,t,n))&&("**"===n.path||WI(e,n,t).matched)}function iO(n,e,t){return 0===e.length&&!n.children[t]}class YI{constructor(e){this.segmentGroup=e||null}}class sO{constructor(e){this.urlTree=e}}function nE(n){return VI(new YI(n))}function oO(n){return VI(new sO(n))}function eL(n){return VI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class rL{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=KI(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wt).pipe((0,Tt.U)(u=>this.createUrlTree(OS(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rf(u=>{if(u instanceof sO)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof YI?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wt).pipe((0,Tt.U)(i=>this.createUrlTree(OS(i),e.queryParams,e.fragment))).pipe(rf(i=>{throw i instanceof YI?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Xt([],{[Wt]:e}):e;return new Bp(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Yt.D)(i).pipe(Vy(u=>{const c=r.children[u],f=tO(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Tt.U)(y=>({segment:y,outlet:u})))}),Ja((u,c)=>(u[c.outlet]=c.segment,u),{}),function K1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zr((i,u)=>n(i,u,r)):Zs.y,_S(1),t?Kb(e):Zb(()=>new w0))}())}expandSegment(e,t,r,i,u,c){return(0,Yt.D)(r).pipe(Vy(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(rf(w=>{if(w instanceof YI)return st(null);throw w}))),Yc(f=>!!f),rf((f,y)=>{if(f instanceof w0||"EmptyError"===f.name)return iO(t,i,u)?st(new Xt([],{})):nE(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return rO(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):nE(t):nE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oO(u):this.lineralizeSegments(r,u).pipe((0,ds.z)(c=>{const f=new Xt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:w,positionalParamSegments:T}=WI(t,i,u);if(!f)return nE(t);const x=this.applyRedirectCommands(y,i.redirectTo,T);return i.redirectTo.startsWith("/")?oO(x):this.lineralizeSegments(i,x).pipe((0,ds.z)(N=>this.expandSegment(e,t,r,N.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(x=>(r._loadedConfig=x,new Xt(i,{})))):st(new Xt(i,{}));const{matched:c,consumedSegments:f,remainingSegments:y}=WI(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,ds.z)(T=>{const x=T.module,N=T.routes,{segmentGroup:L,slicedSegments:B}=KI(t,f,y,N),re=new Xt(L.segments,L.children);if(0===B.length&&re.hasChildren())return this.expandChildren(x,N,re).pipe((0,Tt.U)(Xe=>new Xt(f,Xe)));if(0===N.length&&0===B.length)return st(new Xt(f,{}));const _e=Ra(r)===u;return this.expandSegment(x,re,N,B,_e?Wt:u,!0).pipe((0,Tt.U)(Qe=>new Xt(f.concat(Qe.segments),Qe.children)))})):nE(t)}getChildConfig(e,t,r){return t.children?st(new MS(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ds.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(u=>(t._loadedConfig=u,u))):function tL(n){return VI(ES(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new MS([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return st(!0);const u=i.map(c=>{const f=e.get(c);let y;if(function HF(n){return n&&sf(n.canLoad)}(f))y=f.canLoad(t,r);else{if(!sf(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}return Vl(y)});return st(u).pipe(eE(),(0,Wo.b)(c=>{if(!Hp(c))return;const f=ES(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Tt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Wt])return eL(e.redirectTo);i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Bp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ai(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Ai(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new Xt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function OS(n){const e={};for(const r of Object.keys(n.children)){const u=OS(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function iL(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}class aO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class QI{constructor(e,t){this.component=e,this.route=t}}function oL(n,e,t){const r=n._root;return rE(r,e?e._root:null,t,[r.value])}function JI(n,e,t){const r=function uL(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function rE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=By(e);return n.children.forEach(c=>{(function lL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function cL(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jp(n.url,e.url)||!Ll(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TS(n,e)||!Ll(n.queryParams,e.queryParams);default:return!TS(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new aO(r)):(u.data=c.data,u._resolvedData=c._resolvedData),rE(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new QI(f.outlet.component,c))}else c&&iE(e,f,i),i.canActivateChecks.push(new aO(r)),rE(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Ai(u,(c,f)=>iE(c,t.getContext(f),i)),i}function iE(n,e,t){const r=By(n),i=n.value;Ai(r,(u,c)=>{iE(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new QI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class vL{}function uO(n){return new fn.y(e=>e.error(n))}class wL{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=KI(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wt);if(null===t)return null;const r=new GI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new nd(r,t),u=new qR(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=GR(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=tO(e,u),y=this.processSegmentGroup(f,c,u);if(null===y)return null;r.push(...y)}const i=lO(r);return function bL(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return iO(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!rO(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const L=r.length>0?MR(r).parameters:{};u=new GI(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hO(e),Ra(e),e.component,e,cO(t),dO(t)+r.length,fO(e))}else{const L=WI(t,e,r);if(!L.matched)return null;c=L.consumedSegments,f=L.remainingSegments,u=new GI(c,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hO(e),Ra(e),e.component,e,cO(t),dO(t)+c.length,fO(e))}const y=function IL(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:T}=KI(t,c,f,y.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===T.length&&w.hasChildren()){const L=this.processChildren(y,w);return null===L?null:[new nd(u,L)]}if(0===y.length&&0===T.length)return[new nd(u,[])];const x=Ra(e)===i,N=this.processSegment(y,w,T,x?Wt:i);return null===N?null:[new nd(u,N)]}}function CL(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lO(n){const e=[],t=new Set;for(const r of n){if(!CL(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=lO(r.children);e.push(new nd(r.value,i))}return e.filter(r=>!t.has(r))}function cO(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dO(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function hO(n){return n.data||{}}function fO(n){return n.resolve||{}}function pO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PS(n){return yi(e=>{const t=n(e);return t?(0,Yt.D)(t).pipe((0,Tt.U)(()=>e)):st(e)})}class OL extends class RL{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const NS=new m.OlP("ROUTES");class gO{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new MS(xR(c.injector.get(NS,void 0,m.XFs.Self|m.XFs.Optional)).map(RS),c)}),rf(u=>{throw t._loader$=void 0,u}));return t._loader$=new W1(i,()=>new Aa.x).pipe(bR()),t._loader$}loadModuleFactory(e){return Vl(e()).pipe((0,ds.z)(t=>t instanceof m.YKP?st(t):(0,Yt.D)(this.compiler.compileModuleAsync(t))))}}class NL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kL(n){throw n}function FL(n,e,t){return e.parse("/")}function mO(n,e){return st(null)}const LL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ko=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Aa.x,this.errorHandler=kL,this.malformedUriErrorHandler=FL,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mO,afterPreactivation:mO},this.urlHandlingStrategy=new NL,this.routeReuseStrategy=new OL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const x=c.get(m.R0b);this.isNgZoneEnabled=x instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function cF(){return new Bp(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gO(c,f,N=>this.triggerEvent(new CR(N)),N=>this.triggerEvent(new DR(N))),this.routerState=$R(this.currentUrlTree,this.rootComponentType),this.transitions=new Au({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zr(i=>0!==i.id),(0,Tt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),yi(i=>{let u=!1,c=!1;return st(i).pipe((0,Wo.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yi(f=>{const y=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return yO(f.source)&&(this.browserUrlTree=f.extractedUrl),st(f).pipe(yi(x=>{const N=this.transitions.getValue();return r.next(new vS(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),N!==this.transitions.getValue()?Yh.E:Promise.resolve(x)}),function sL(n,e,t,r){return yi(i=>function nL(n,e,t,r,i){return new rL(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Tt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wo.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function DL(n,e,t,r,i){return(0,ds.z)(u=>function EL(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new wL(n,e,t,r,i,u).recognize();return null===c?uO(new vL):st(c)}catch(c){return uO(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Tt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wo.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(L,x)}this.browserUrlTree=x.urlAfterRedirects}const N=new Q1(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:L,source:B,restoredState:re,extras:_e}=f,Le=new vS(N,this.serializeUrl(L),B,re);r.next(Le);const Qe=$R(L,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},f),{targetSnapshot:Qe,urlAfterRedirects:L,extras:Object.assign(Object.assign({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Yh.E}),PS(f=>{const{targetSnapshot:y,id:w,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:N,replaceUrl:L}}=f;return this.hooks.beforePreactivation(y,{navigationId:w,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!N,replaceUrl:!!L})}),(0,Wo.b)(f=>{const y=new J1(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,Tt.U)(f=>Object.assign(Object.assign({},f),{guards:oL(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function dL(n,e){return(0,ds.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function hL(n,e,t,r){return(0,Yt.D)(n).pipe((0,ds.z)(i=>function _L(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(f=>{const y=JI(f,e,i);let w;if(function qF(n){return n&&sf(n.canDeactivate)}(y))w=Vl(y.canDeactivate(n,e,t,r));else{if(!sf(y))throw new Error("Invalid CanDeactivate guard");w=Vl(y(n,e,t,r))}return w.pipe(Yc())})).pipe(eE()):st(!0)}(i.component,i.route,t,e,r)),Yc(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ds.z)(f=>f&&function jF(n){return"boolean"==typeof n}(f)?function fL(n,e,t,r){return(0,Yt.D)(e).pipe(Vy(i=>Qa(function gL(n,e){return null!==n&&e&&e(new nF(n)),st(!0)}(i.route.parent,r),function pL(n,e){return null!==n&&e&&e(new iF(n)),st(!0)}(i.route,r),function yL(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function aL(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ER(()=>st(c.guards.map(y=>{const w=JI(y,c.node,t);let T;if(function GF(n){return n&&sf(n.canActivateChild)}(w))T=Vl(w.canActivateChild(r,n));else{if(!sf(w))throw new Error("Invalid CanActivateChild guard");T=Vl(w(r,n))}return T.pipe(Yc())})).pipe(eE())));return st(u).pipe(eE())}(n,i.path,t),function mL(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>ER(()=>{const c=JI(u,e,t);let f;if(function $F(n){return n&&sf(n.canActivate)}(c))f=Vl(c.canActivate(e,n));else{if(!sf(c))throw new Error("Invalid CanActivate guard");f=Vl(c(e,n))}return f.pipe(Yc())}));return st(i).pipe(eE())}(n,i.route,t))),Yc(i=>!0!==i,!0))}(r,u,n,e):st(f)),(0,Tt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Wo.b)(f=>{if(Hp(f.guardsResult)){const w=ES(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const y=new X1(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Zr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),PS(f=>{if(f.guards.canActivateChecks.length)return st(f).pipe((0,Wo.b)(y=>{const w=new eF(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),yi(y=>{let w=!1;return st(y).pipe(function TL(n,e){return(0,ds.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,Yt.D)(i).pipe(Vy(c=>function SL(n,e,t,r){return function AL(n,e,t,r){const i=pO(n);if(0===i.length)return st({});const u={};return(0,Yt.D)(i).pipe((0,ds.z)(c=>function xL(n,e,t,r){const i=JI(n,e,r);return Vl(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Wo.b)(f=>{u[c]=f}))),_S(1),(0,ds.z)(()=>pO(u).length===i.length?st(u):Yh.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),GR(n,t).resolve),null)))}(c.route,r,n,e)),(0,Wo.b)(()=>u++),_S(1),(0,ds.z)(c=>u===i.length?st(t):Yh.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wo.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Wo.b)(y=>{const w=new tF(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),PS(f=>{const{targetSnapshot:y,id:w,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:N,replaceUrl:L}}=f;return this.hooks.afterPreactivation(y,{navigationId:w,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!N,replaceUrl:!!L})}),(0,Tt.U)(f=>{const y=function AF(n,e,t){const r=Q0(n,e._root,t?t._root:void 0);return new HR(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,Wo.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new UF(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Wo.b)({next(){u=!0},complete(){u=!0}}),function Z1(n){return(0,Vt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),rf(f=>{if(c=!0,function aF(n){return n&&n[SR]}(f)){const y=Hp(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const w=new IR(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(w),y?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||yO(i.source)};this.scheduleNavigation(T,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Y1(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return Yh.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){eO(t),this.config=t.map(RS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,w=i||this.routerState.root,T=y?this.currentUrlTree.fragment:c;let x=null;switch(f){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function RF(n,e,t,r,i){if(0===t.length)return SS(e.root,e.root,e.root,r,i);const u=function OF(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new KR(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Ai(u.outlets,(y,w)=>{f[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new KR(t,e,r)}(t);if(u.toRoot())return SS(e.root,e.root,new Xt([],{}),r,i);const c=function PF(n,e,t){if(n.isAbsolute)return new AS(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new AS(u,u===e.root,0)}const r=qI(n.commands[0])?0:1;return function NF(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new AS(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?zI(c.segmentGroup,c.index,u.commands):ZR(c.segmentGroup,c.index,u.commands);return SS(e.root,c.segmentGroup,f,r,i)}(w,this.currentUrlTree,t,x,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Hp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function UL(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},LL):!1===r?Object.assign({},VL):r,Hp(t))return OR(this.currentUrlTree,t,i);const u=this.parseUrl(t);return OR(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new K0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,y;if(this.disposed)return Promise.resolve(!1);let w,T,x;c?(w=c.resolve,T=c.reject,x=c.promise):x=new Promise((B,re)=>{w=B,T=re});const N=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),L=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):L=0,this.setTransition({id:N,targetPageId:L,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:w,reject:T,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new IR(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function yO(n){return"imperative"!==n}class _O{}class vO{preload(e,t){return st(null)}}let EO=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new gO(i,r,y=>t.triggerEvent(new CR(y)),y=>t.triggerEvent(new DR(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(t=>t instanceof K0),Vy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Yt.D)(i).pipe((0,Ya.J)(),(0,Tt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ds.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ko),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(_O))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),LS=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof K0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof TR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new TR(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const $p=new m.OlP("ROUTER_CONFIGURATION"),wO=new m.OlP("ROUTER_FORROOT_GUARD"),$L=[ve,{provide:FR,useClass:LR},{provide:Ko,useFactory:function KL(n,e,t,r,i,u,c={},f,y){const w=new Ko(null,n,e,t,r,i,xR(u));return f&&(w.urlHandlingStrategy=f),y&&(w.routeReuseStrategy=y),function ZL(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,w),c.enableTracing&&w.events.subscribe(T=>{var x,N;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(N=console.groupEnd)||void 0===N||N.call(console)}),w},deps:[FR,tE,ve,m.zs3,m.Sil,NS,$p,[class PL{},new m.FiY],[class ML{},new m.FiY]]},tE,{provide:jy,useFactory:function YL(n){return n.routerState.root},deps:[Ko]},EO,vO,class HL{preload(e,t){return t().pipe(rf(()=>st(null)))}},{provide:$p,useValue:{enableTracing:!1}}];function GL(){return new m.PXZ("Router",Ko)}let bO=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[$L,IO(t),{provide:wO,useFactory:WL,deps:[[Ko,new m.FiY,new m.tp0]]},{provide:$p,useValue:r||{}},{provide:fe,useFactory:zL,deps:[ue,[new m.tBr(Ke),new m.FiY],$p]},{provide:LS,useFactory:qL,deps:[Ko,Gl,$p]},{provide:_O,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:vO},{provide:m.PXZ,multi:!0,useFactory:GL},[VS,{provide:m.ip1,multi:!0,useFactory:QL,deps:[VS]},{provide:CO,useFactory:JL,deps:[VS]},{provide:m.tb,multi:!0,useExisting:CO}]]}}static forChild(t){return{ngModule:n,providers:[IO(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(wO,8),m.LFG(Ko,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function qL(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new LS(n,e,t)}function zL(n,e,t={}){return t.useHash?new xe(n,e):new et(n,e)}function WL(n){return"guarded"}function IO(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:NS,multi:!0,useValue:n}]}let VS=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Aa.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(Ko),c=this.injector.get($p);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get($p),i=this.injector.get(EO),u=this.injector.get(LS),c=this.injector.get(Ko),f=this.injector.get(m.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function QL(n){return n.appInitializer.bind(n)}function JL(n){return n.bootstrapListener.bind(n)}const CO=new m.OlP("Router Initializer"),DO_firebase={apiKey:"AIzaSyBScY-yPzVwIovmwmfzSDXVgtGY4w6IdMY",authDomain:"vkstrust-mdu.firebaseapp.com",projectId:"vkstrust-mdu",storageBucket:"vkstrust-mdu.appspot.com",messagingSenderId:"1039061737126",appId:"1:1039061737126:web:a150b1a45cca9ab67e1e67"},eV=[{path:"",component:_R}];let tV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[bO.forRoot(eV),yn.hO.initializeApp(DO_firebase),$P,Ok],bO]}),n})();class TO{}const rd="*";function SO(n,e=null){return{type:2,steps:n,options:e}}function AO(n){return{type:6,styles:n,offset:null}}function xO(n){Promise.resolve(null).then(n)}class sE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){xO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class MO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?xO(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const en=!1;function RO(n){return new m.vHH(3e3,en)}function FV(){return"undefined"!=typeof window&&void 0!==window.document}function BS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function af(n){switch(n.length){case 0:return new sE;case 1:return n[0];default:return new MO(n)}}function OO(n,e,t,r,i={},u={}){const c=[],f=[];let y=-1,w=null;if(r.forEach(T=>{const x=T.offset,N=x==y,L=N&&w||{};Object.keys(T).forEach(B=>{let re=B,_e=T[B];if("offset"!==B)switch(re=e.normalizePropertyName(re,c),_e){case"!":_e=i[B];break;case rd:_e=u[B];break;default:_e=e.normalizeStyleValue(B,re,_e,c)}L[re]=_e}),N||f.push(L),w=L,y=x}),c.length)throw function DV(n){return new m.vHH(3502,en)}();return f}function jS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&HS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&HS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&HS(t,"destroy",n)))}}function HS(n,e,t){const r=t.totalTime,u=$S(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function $S(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Zo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function PO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let GS=(n,e)=>!1,NO=(n,e,t)=>[],kO=null;function qS(n){const e=n.parentNode||n.host;return e===kO?null:e}(BS()||"undefined"!=typeof Element)&&(FV()?(kO=(()=>document.documentElement)(),GS=(n,e)=>{for(;e;){if(e===n)return!0;e=qS(e)}return!1}):GS=(n,e)=>n.contains(e),NO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Gp=null,FO=!1;function LO(n){Gp||(Gp=function VV(){return"undefined"!=typeof document?document.body:null}()||{},FO=!!Gp.style&&"WebkitAppearance"in Gp.style);let e=!0;return Gp.style&&!function LV(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Gp.style,!e&&FO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Gp.style)),e}const VO=GS,UO=NO;let BO=(()=>{class n{validateStyleProperty(t){return LO(t)}matchesElement(t,r){return!1}containsElement(t,r){return VO(t,r)}getParentElement(t){return qS(t)}query(t,r,i){return UO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new sE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),zS=(()=>{class n{}return n.NOOP=new BO,n})();const WS="ng-enter",eC="ng-leave",tC="ng-trigger",nC=".ng-trigger",HO="ng-animating",KS=".ng-animating";function qp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ZS(parseFloat(e[1]),e[2])}function ZS(n,e){return"s"===e?1e3*n:n}function rC(n,e,t){return n.hasOwnProperty("duration")?n:function jV(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(RO()),{duration:0,delay:0,easing:""};i=ZS(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=ZS(parseFloat(y),f[4]));const w=f[5];w&&(c=w)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function rV(){return new m.vHH(3100,en)}()),f=!0),u<0&&(e.push(function iV(){return new m.vHH(3101,en)}()),f=!0),f&&e.splice(y,0,RO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function $y(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else $y(n,t);return t}function GO(n,e,t){return t?e+":"+t+";":""}function qO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=GO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=GO(0,GV(t),n.style[t]));n.setAttribute("style",e)}function Ul(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=QS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),BS()&&qO(n))}function zp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=QS(t);n.style[r]=""}),BS()&&qO(n))}function oE(n){return Array.isArray(n)?1==n.length?n[0]:SO(n):n}const YS=new RegExp("{{\\s*(.+?)\\s*}}","g");function zO(n){let e=[];if("string"==typeof n){let t;for(;t=YS.exec(n);)e.push(t[1]);YS.lastIndex=0}return e}function iC(n,e,t){const r=n.toString(),i=r.replace(YS,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function oV(n){return new m.vHH(3003,en)}()),f=""),f.toString()});return i==r?n:i}function sC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const $V=/-+([a-z0-9])/g;function QS(n){return n.replace($V,(...e)=>e[1].toUpperCase())}function GV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function aV(n){return new m.vHH(3004,en)}()}}function WO(n,e){return window.getComputedStyle(n)[e]}function YV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function QV(n,e,t){if(":"==n[0]){const y=function JV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function wV(n){return new m.vHH(3016,en)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function EV(n){return new m.vHH(3015,en)}()),e;const i=r[1],u=r[2],c=r[3];e.push(KO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(KO(c,i))}(r,t,e)):t.push(n),t}const lC=new Set(["true","1"]),cC=new Set(["false","0"]);function KO(n,e){const t=lC.has(n)||cC.has(n),r=lC.has(e)||cC.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?lC.has(n):cC.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?lC.has(e):cC.has(e)),c&&f}}const XV=new RegExp("s*:selfs*,?","g");function JS(n,e,t,r){return new eU(n).build(e,t,r)}class eU{constructor(e){this._driver=e}build(e,t,r){const i=new rU(t);this._resetContextStyleTimingState(i);const u=Yo(this,oE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function lV(){return new m.vHH(3006,en)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,w=y.name;w.toString().split(/\s*,\s*/).forEach(T=>{y.name=T,u.push(this.visitState(y,t))}),y.name=w}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function cV(){return new m.vHH(3007,en)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(dC(f)){const y=f;Object.keys(y).forEach(w=>{zO(y[w]).forEach(T=>{c.hasOwnProperty(T)||u.add(T)})})}}),u.size&&(sC(u.values()),t.errors.push(function dV(n,e){return new m.vHH(3008,en)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Yo(this,oE(e.animation),t);return{type:1,matchers:YV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Wp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Yo(this,r,t)),options:Wp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Yo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Wp(e.options)}}visitAnimate(e,t){const r=function sU(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return XS(rC(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=XS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||rC(r,e),XS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:AO({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const w={};r.easing&&(w.easing=r.easing),c=AO(w)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==rd?r.push(c):t.errors.push(function hV(n){return new m.vHH(3002,en)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(dC(c)){const f=c,y=f.easing;if(y&&(u=y,delete f.easing),!i)for(let w in f)if(f[w].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const y=t.collectedStyles[t.currentQuerySelector],w=y[f];let T=!0;w&&(u!=i&&u>=w.startTime&&i<=w.endTime&&(t.errors.push(function fV(n,e,t,r,i){return new m.vHH(3010,en)}()),T=!1),u=w.startTime),T&&(y[f]={startTime:u,endTime:i}),t.options&&function HV(n,e,t){const r=e.params||{},i=zO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function sV(n){return new m.vHH(3001,en)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function pV(){return new m.vHH(3011,en)}()),r;let u=0;const c=[];let f=!1,y=!1,w=0;const T=e.steps.map(Le=>{const Qe=this._makeStyleAst(Le,t);let Xe=null!=Qe.offset?Qe.offset:function iU(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(dC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(dC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Qe.styles),Ge=0;return null!=Xe&&(u++,Ge=Qe.offset=Xe),y=y||Ge<0||Ge>1,f=f||Ge<w,w=Ge,c.push(Ge),Qe});y&&t.errors.push(function gV(){return new m.vHH(3012,en)}()),f&&t.errors.push(function mV(){return new m.vHH(3200,en)}());const x=e.steps.length;let N=0;u>0&&u<x?t.errors.push(function yV(){return new m.vHH(3202,en)}()):0==u&&(N=1/(x-1));const L=x-1,B=t.currentTime,re=t.currentAnimateTimings,_e=re.duration;return T.forEach((Le,Qe)=>{const Xe=N>0?Qe==L?1:N*Qe:c[Qe],Ge=Xe*_e;t.currentTime=B+re.delay+Ge,re.duration=Ge,this._validateStyleAst(Le,t),Le.offset=Xe,r.styles.push(Le)}),r}visitReference(e,t){return{type:8,animation:Yo(this,oE(e.animation),t),options:Wp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Wp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Wp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function tU(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(XV,"")),n=n.replace(/@\*/g,nC).replace(/@\w+/g,t=>nC+"-"+t.substr(1)).replace(/:animating/g,KS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Zo(t.collectedStyles,t.currentQuerySelector,{});const f=Yo(this,oE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Wp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function _V(){return new m.vHH(3013,en)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:rC(e.timings,t.errors,!0);return{type:12,animation:Yo(this,oE(e.animation),t),timings:r,options:null}}}class rU{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function dC(n){return!Array.isArray(n)&&"object"==typeof n}function Wp(n){return n?(n=$y(n)).params&&(n.params=function nU(n){return n?$y(n):null}(n.params)):n={},n}function XS(n,e,t){return{duration:n,delay:e,easing:t}}function eA(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class hC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const uU=new RegExp(":enter","g"),cU=new RegExp(":leave","g");function tA(n,e,t,r,i,u={},c={},f,y,w=[]){return(new dU).buildKeyframes(n,e,t,r,i,u,c,f,y,w)}class dU{buildKeyframes(e,t,r,i,u,c,f,y,w,T=[]){w=w||new hC;const x=new nA(e,t,w,i,u,T,[]);x.options=y,x.currentTimeline.setStyles([c],null,x.errors,y),Yo(this,r,x);const N=x.timelines.filter(L=>L.containsAnimation());if(Object.keys(f).length){let L;for(let B=N.length-1;B>=0;B--){const re=N[B];if(re.element===t){L=re;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([f],null,x.errors,y)}return N.length?N.map(L=>L.buildKeyframes()):[eA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?qp(r.duration):null,f=null!=r.delay?qp(r.delay):null;return 0!==c&&e.forEach(y=>{const w=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,w.duration+w.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Yo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=fC);const c=qp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Yo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?qp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Yo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return rC(t.params?iC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?qp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fC);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((w,T)=>{t.currentQueryIndex=T;const x=t.createSubContext(e.options,w);u&&x.delayNextStep(u),w===t.element&&(y=x.currentTimeline),Yo(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const T=t.currentTimeline;y&&T.delayNextStep(y);const x=T.currentTime;Yo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const fC={};class nA{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new pC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=qp(r.duration)),null!=r.delay&&(i.delay=qp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=iC(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new nA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=fC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new hU(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(uU,"."+this._enterClassName)).replace(cU,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),f.push(...w)}return!u&&0==f.length&&c.push(function vV(n){return new m.vHH(3014,en)}()),f}}class pC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new pC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||rd,this._currentKeyframe[t]=rd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function fU(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=rd})):uf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const y=iC(c[f],u,r);this._pendingStyles[f]=y,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:rd),this._updateStyle(f,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const w=uf(f,!0);Object.keys(w).forEach(T=>{const x=w[T];"!"==x?e.add(T):x==rd&&t.add(T)}),r||(w.offset=y/this.duration),i.push(w)});const u=e.size?sC(e.values()):[],c=t.size?sC(t.values()):[];if(r){const f=i[0],y=$y(f);f.offset=0,y.offset=1,i=[f,y]}return eA(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class hU extends pC{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=uf(e[0],!1);y.offset=0,u.push(y);const w=uf(e[0],!1);w.offset=QO(f),u.push(w);const T=e.length-1;for(let x=1;x<=T;x++){let N=uf(e[x],!1);N.offset=QO((t+N.offset*r)/c),u.push(N)}r=c,t=0,i="",e=u}return eA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function QO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rA{}class pU extends rA{normalizePropertyName(e,t){return QS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(gU[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function uV(n,e){return new m.vHH(3005,en)}())}return c+u}}const gU=(()=>function mU(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function JO(n,e,t,r,i,u,c,f,y,w,T,x,N){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:w,postStyleProps:T,totalTime:x,errors:N}}const iA={};class XO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function yU(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,y,w,T){const x=[],N=this.ast.options&&this.ast.options.params||iA,B=this.buildStyles(r,f&&f.params||iA,x),re=y&&y.params||iA,_e=this.buildStyles(i,re,x),Le=new Set,Qe=new Map,Xe=new Map,Ge="void"===i,mt={params:Object.assign(Object.assign({},N),re)},wt=T?[]:tA(e,t,this.ast.animation,u,c,B,_e,mt,w,x);let Ht=0;if(wt.forEach(Qo=>{Ht=Math.max(Qo.duration+Qo.delay,Ht)}),x.length)return JO(t,this._triggerName,r,i,Ge,B,_e,[],[],Qe,Xe,Ht,x);wt.forEach(Qo=>{const sd=Qo.element,SP=Zo(Qe,sd,{});Qo.preStyleProps.forEach(Kp=>SP[Kp]=!0);const lE=Zo(Xe,sd,{});Qo.postStyleProps.forEach(Kp=>lE[Kp]=!0),sd!==t&&Le.add(sd)});const Tr=sC(Le.values());return JO(t,this._triggerName,r,i,Ge,B,_e,wt,Tr,Qe,Xe,Ht)}}class _U{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=$y(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let y=c[f];y.length>1&&(y=iC(y,i,t));const w=this.normalizer.normalizePropertyName(f,t);y=this.normalizer.normalizeStyleValue(f,w,y,t),r[w]=y})}}),r}}class EU{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new _U(i.style,i.options&&i.options.params||{},r)}),eP(this.states,"true","1"),eP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new XO(e,i,this.states))}),this.fallbackTransition=function wU(n,e,t){return new XO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function eP(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const bU=new hC;class IU{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=JS(this._driver,t,r,[]);if(r.length)throw function TV(n){return new m.vHH(3503,en)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=OO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=tA(this._driver,t,u,WS,eC,{},{},r,bU,i),c.forEach(T=>{const x=Zo(f,T.element,{});T.postStyleProps.forEach(N=>x[N]=null)})):(i.push(function SV(){return new m.vHH(3300,en)}()),c=[]),i.length)throw function AV(n){return new m.vHH(3504,en)}();f.forEach((T,x)=>{Object.keys(T).forEach(N=>{T[N]=this._driver.computeStyle(x,N,rd)})});const w=af(c.map(T=>{const x=f.get(T.element);return this._buildPlayer(T,{},x)}));return this._playersById[e]=w,w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function xV(n){return new m.vHH(3301,en)}();return t}listen(e,t,r,i){const u=$S(t,"","","");return jS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const tP="ng-animate-queued",sA="ng-animate-disabled",AU=[],nP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Oa="__ng_removed";class oA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function PU(n){return null!=n?n:null}(r?e.value:e),r){const u=$y(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const aE="void",aA=new oA(aE);class MU{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function MV(n,e){return new m.vHH(3302,en)}();if(null==r||0==r.length)throw function RV(n){return new m.vHH(3303,en)}();if(!function NU(n){return"start"==n||"done"==n}(r))throw function OV(n,e){return new m.vHH(3400,en)}();const u=Zo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Zo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Pa(e,tC),Pa(e,tC+"-"+t),f[t]=aA),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function PV(n){return new m.vHH(3401,en)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new uA(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Pa(e,tC),Pa(e,tC+"-"+t),this._engine.statesByElement.set(e,f={}));let y=f[t];const w=new oA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&w.absorbOptions(y.options),f[t]=w,y||(y=aA),w.value!==aE&&y.value===w.value){if(!function LU(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,w.params)){const re=[],_e=u.matchStyles(y.value,y.params,re),Le=u.matchStyles(w.value,w.params,re);re.length?this._engine.reportError(re):this._engine.afterFlush(()=>{zp(e,_e),Ul(e,Le)})}return}const N=Zo(this._engine.playersByElement,e,[]);N.forEach(re=>{re.namespaceId==this.id&&re.triggerName==t&&re.queued&&re.destroy()});let L=u.matchTransition(y.value,w.value,e,w.params),B=!1;if(!L){if(!i)return;L=u.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:y,toState:w,player:c,isFallbackTransition:B}),B||(Pa(e,tP),c.onStart(()=>{Gy(e,tP)})),c.onDone(()=>{let re=this.players.indexOf(c);re>=0&&this.players.splice(re,1);const _e=this._engine.playersByElement.get(e);if(_e){let Le=_e.indexOf(c);Le>=0&&_e.splice(Le,1)}}),this.players.push(c),N.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,nC,!0);r.forEach(i=>{if(i[Oa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const w=this.trigger(e,y,aE,i);w&&f.push(w)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&af(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,w=r[c]||aA,T=new oA(aE),x=new uA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:w,toState:T,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Oa];(!u||u===nP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=$S(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,jS(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class RU{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new MU(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const w=r.indexOf(y);r.splice(w+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(gC(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!gC(t))return;const u=t[Oa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pa(e,sA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gy(e,sA))}removeNode(e,t,r,i){if(gC(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Oa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return gC(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,nC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,KS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return af(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Oa];if(r&&r.setForRemoval){if(e[Oa]=nP,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(sA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?af(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function NV(n){return new m.vHH(3402,en)}()}_flushAnimations(e,t){const r=new hC,i=[],u=new Map,c=[],f=new Map,y=new Map,w=new Map,T=new Set;this.disabledNodes.forEach(at=>{T.add(at);const Dt=this.driver.query(at,".ng-animate-queued",!0);for(let Pt=0;Pt<Dt.length;Pt++)T.add(Dt[Pt])});const x=this.bodyNode,N=Array.from(this.statesByElement.keys()),L=sP(N,this.collectedEnterElements),B=new Map;let re=0;L.forEach((at,Dt)=>{const Pt=WS+re++;B.set(Dt,Pt),at.forEach(un=>Pa(un,Pt))});const _e=[],Le=new Set,Qe=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const Dt=this.collectedLeaveElements[at],Pt=Dt[Oa];Pt&&Pt.setForRemoval&&(_e.push(Dt),Le.add(Dt),Pt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(un=>Le.add(un)):Qe.add(Dt))}const Xe=new Map,Ge=sP(N,Array.from(Le));Ge.forEach((at,Dt)=>{const Pt=eC+re++;Xe.set(Dt,Pt),at.forEach(un=>Pa(un,Pt))}),e.push(()=>{L.forEach((at,Dt)=>{const Pt=B.get(Dt);at.forEach(un=>Gy(un,Pt))}),Ge.forEach((at,Dt)=>{const Pt=Xe.get(Dt);at.forEach(un=>Gy(un,Pt))}),_e.forEach(at=>{this.processLeaveNode(at)})});const mt=[],wt=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(Pt=>{const un=Pt.player,vi=Pt.element;if(mt.push(un),this.collectedEnterElements.length){const Ls=vi[Oa];if(Ls&&Ls.setForMove){if(Ls.previousTriggersValues&&Ls.previousTriggersValues.has(Pt.triggerName)){const Zp=Ls.previousTriggersValues.get(Pt.triggerName),df=this.statesByElement.get(Pt.element);df&&df[Pt.triggerName]&&(df[Pt.triggerName].value=Zp)}return void un.destroy()}}const Bl=!x||!this.driver.containsElement(x,vi),Jo=Xe.get(vi),cf=B.get(vi),sr=this._buildInstruction(Pt,r,cf,Jo,Bl);if(sr.errors&&sr.errors.length)return void wt.push(sr);if(Bl)return un.onStart(()=>zp(vi,sr.fromStyles)),un.onDestroy(()=>Ul(vi,sr.toStyles)),void i.push(un);if(Pt.isFallbackTransition)return un.onStart(()=>zp(vi,sr.fromStyles)),un.onDestroy(()=>Ul(vi,sr.toStyles)),void i.push(un);const MP=[];sr.timelines.forEach(Ls=>{Ls.stretchStartingKeyframe=!0,this.disabledNodes.has(Ls.element)||MP.push(Ls)}),sr.timelines=MP,r.append(vi,sr.timelines),c.push({instruction:sr,player:un,element:vi}),sr.queriedElements.forEach(Ls=>Zo(f,Ls,[]).push(un)),sr.preStyleProps.forEach((Ls,Zp)=>{const df=Object.keys(Ls);if(df.length){let Yp=y.get(Zp);Yp||y.set(Zp,Yp=new Set),df.forEach(mA=>Yp.add(mA))}}),sr.postStyleProps.forEach((Ls,Zp)=>{const df=Object.keys(Ls);let Yp=w.get(Zp);Yp||w.set(Zp,Yp=new Set),df.forEach(mA=>Yp.add(mA))})});if(wt.length){const at=[];wt.forEach(Dt=>{at.push(function kV(n,e){return new m.vHH(3505,en)}())}),mt.forEach(Dt=>Dt.destroy()),this.reportError(at)}const Ht=new Map,Tr=new Map;c.forEach(at=>{const Dt=at.element;r.has(Dt)&&(Tr.set(Dt,Dt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,Ht))}),i.forEach(at=>{const Dt=at.element;this._getPreviousPlayers(Dt,!1,at.namespaceId,at.triggerName,null).forEach(un=>{Zo(Ht,Dt,[]).push(un),un.destroy()})});const Qo=_e.filter(at=>aP(at,y,w)),sd=new Map;iP(sd,this.driver,Qe,w,rd).forEach(at=>{aP(at,y,w)&&Qo.push(at)});const lE=new Map;L.forEach((at,Dt)=>{iP(lE,this.driver,new Set(at),y,"!")}),Qo.forEach(at=>{const Dt=sd.get(at),Pt=lE.get(at);sd.set(at,Object.assign(Object.assign({},Dt),Pt))});const Kp=[],AP=[],xP={};c.forEach(at=>{const{element:Dt,player:Pt,instruction:un}=at;if(r.has(Dt)){if(T.has(Dt))return Pt.onDestroy(()=>Ul(Dt,un.toStyles)),Pt.disabled=!0,Pt.overrideTotalTime(un.totalTime),void i.push(Pt);let vi=xP;if(Tr.size>1){let Jo=Dt;const cf=[];for(;Jo=Jo.parentNode;){const sr=Tr.get(Jo);if(sr){vi=sr;break}cf.push(Jo)}cf.forEach(sr=>Tr.set(sr,vi))}const Bl=this._buildAnimation(Pt.namespaceId,un,Ht,u,lE,sd);if(Pt.setRealPlayer(Bl),vi===xP)Kp.push(Pt);else{const Jo=this.playersByElement.get(vi);Jo&&Jo.length&&(Pt.parentPlayer=af(Jo)),i.push(Pt)}}else zp(Dt,un.fromStyles),Pt.onDestroy(()=>Ul(Dt,un.toStyles)),AP.push(Pt),T.has(Dt)&&i.push(Pt)}),AP.forEach(at=>{const Dt=u.get(at.element);if(Dt&&Dt.length){const Pt=af(Dt);at.setRealPlayer(Pt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<_e.length;at++){const Dt=_e[at],Pt=Dt[Oa];if(Gy(Dt,eC),Pt&&Pt.hasAnimation)continue;let un=[];if(f.size){let Bl=f.get(Dt);Bl&&Bl.length&&un.push(...Bl);let Jo=this.driver.query(Dt,KS,!0);for(let cf=0;cf<Jo.length;cf++){let sr=f.get(Jo[cf]);sr&&sr.length&&un.push(...sr)}}const vi=un.filter(Bl=>!Bl.destroyed);vi.length?kU(this,Dt,vi):this.processLeaveNode(Dt)}return _e.length=0,Kp.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const Dt=this.players.indexOf(at);this.players.splice(Dt,1)}),at.play()}),Kp}elementContainsData(e,t){let r=!1;const i=t[Oa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==aE;f.forEach(w=>{w.queued||!y&&w.triggerName!=i||c.push(w)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const w=y.element,T=w!==u,x=Zo(r,w,[]);this._getPreviousPlayers(w,T,c,f,t.toState).forEach(L=>{const B=L.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),L.destroy(),x.push(L)})}zp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,w=[],T=new Set,x=new Set,N=t.timelines.map(B=>{const re=B.element;T.add(re);const _e=re[Oa];if(_e&&_e.removedBeforeQueried)return new sE(B.duration,B.delay);const Le=re!==y,Qe=function FU(n){const e=[];return oP(n,e),e}((r.get(re)||AU).map(Ht=>Ht.getRealPlayer())).filter(Ht=>!!Ht.element&&Ht.element===re),Xe=u.get(re),Ge=c.get(re),mt=OO(0,this._normalizer,0,B.keyframes,Xe,Ge),wt=this._buildPlayer(B,mt,Qe);if(B.subTimeline&&i&&x.add(re),Le){const Ht=new uA(e,f,re);Ht.setRealPlayer(wt),w.push(Ht)}return wt});w.forEach(B=>{Zo(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function OU(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),T.forEach(B=>Pa(B,HO));const L=af(N);return L.onDestroy(()=>{T.forEach(B=>Gy(B,HO)),Ul(y,t.toStyles)}),x.forEach(B=>{Zo(i,B,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sE(e.duration,e.delay)}}class uA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>jS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Zo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function gC(n){return n&&1===n.nodeType}function rP(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function iP(n,e,t,r,i){const u=[];t.forEach(y=>u.push(rP(y)));const c=[];r.forEach((y,w)=>{const T={};y.forEach(x=>{const N=T[x]=e.computeStyle(w,x,i);(!N||0==N.length)&&(w[Oa]=xU,c.push(w))}),n.set(w,T)});let f=0;return t.forEach(y=>rP(y,u[f++])),c}function sP(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const w=f.parentNode;return y=t.has(w)?w:i.has(w)?1:c(w),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function Pa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Gy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function kU(n,e,t){af(t).onDone(()=>n.processLeaveNode(e))}function oP(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof MO?oP(r.players,e):e.push(r)}}function aP(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class mC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new RU(e,t,r),this._timelineEngine=new IU(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],T=JS(this._driver,u,y,[]);if(y.length)throw function CV(n,e){return new m.vHH(3404,en)}();f=function vU(n,e,t){return new EU(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=PO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=PO(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let UU=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Ul(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ul(this._element,this._initialStyles),this._endStyles&&(Ul(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(zp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zp(this._element,this._endStyles),this._endStyles=null),Ul(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function lA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];BU(i)&&(e=e||{},e[i]=n[i])}return e}function BU(n){return"display"===n||"position"===n}class uP{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:WO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jU{validateStyleProperty(e){return LO(e)}matchesElement(e,t){return!1}containsElement(e,t){return VO(e,t)}getParentElement(e){return qS(e)}query(e,t,r){return UO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const w={},T=c.filter(N=>N instanceof uP);(function qV(n,e){return 0===n||0===e})(r,i)&&T.forEach(N=>{let L=N.currentSnapshot;Object.keys(L).forEach(B=>w[B]=L[B])}),t=function zV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(y){f[y]=WO(n,y)})}}return e}(e,t=t.map(N=>uf(N,!1)),w);const x=function VU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=lA(e[0]),e.length>1&&(r=lA(e[e.length-1]))):e&&(t=lA(e)),t||r?new UU(n,t,r):null}(e,t);return new uP(e,t,y,x)}}let HU=(()=>{class n extends TO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:m.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?SO(t):t;return lP(this._renderer,null,r,"register",[i]),new $U(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class $U extends class nV{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new GU(this._id,e,t||{},this._renderer)}}class GU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return lP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function lP(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const cP="@.disabled";let qU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new dP("",u,this.engine),this._rendererCache.set(u,T)),T}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=T=>{Array.isArray(T)?T.forEach(y):this.engine.registerTrigger(c,f,t,T.name,T)};return r.data.animation.forEach(y),new zU(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.FYo),m.LFG(mC),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class dP{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==cP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class zU extends dP{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==cP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function WU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function KU(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let ZU=(()=>{class n extends mC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(zS),m.LFG(rA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const hP=new m.OlP("AnimationModuleType"),fP=[{provide:TO,useClass:HU},{provide:rA,useFactory:function YU(){return new pU}},{provide:mC,useClass:ZU},{provide:m.FYo,useFactory:function QU(n,e,t){return new qU(n,e,t)},deps:[mn,mC,m.R0b]}],pP=[{provide:zS,useFactory:()=>new jU},{provide:hP,useValue:"BrowserAnimations"},...fP],JU=[{provide:zS,useClass:BO},{provide:hP,useValue:"NoopAnimations"},...fP];let XU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?JU:pP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:pP,imports:[da]}),n})();class gP{}class mP{}class id{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof id?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new id;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof id?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===u.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class eB{encodeKey(e){return yP(e)}encodeValue(e){return yP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nB=/%(\d[a-f0-9])/gi,rB={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function yP(n){return encodeURIComponent(n).replace(nB,(e,t)=>{var r;return null!==(r=rB[t])&&void 0!==r?r:e})}function _P(n){return`${n}`}class lf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eB,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tB(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,f]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],y=t.get(c)||[];y.push(f),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(_P(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(_P(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class iB{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function vP(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function EP(n){return"undefined"!=typeof Blob&&n instanceof Blob}function wP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class uE{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function sB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new id),this.context||(this.context=new iB),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new lf,this.urlWithParams=t}serializeBody(){return null===this.body?null:vP(this.body)||EP(this.body)||wP(this.body)||function oB(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wP(this.body)?null:EP(this.body)?this.body.type||null:vP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,u=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,T=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((N,L)=>N.set(L,e.setHeaders[L]),w)),e.setParams&&(T=Object.keys(e.setParams).reduce((N,L)=>N.set(L,e.setParams[L]),T)),new uE(r,i,c,{params:T,headers:w,context:x,reportProgress:y,responseType:u,withCredentials:f})}}var jr=(()=>((jr=jr||{})[jr.Sent=0]="Sent",jr[jr.UploadProgress=1]="UploadProgress",jr[jr.ResponseHeader=2]="ResponseHeader",jr[jr.DownloadProgress=3]="DownloadProgress",jr[jr.Response=4]="Response",jr[jr.User=5]="User",jr))();class cA{constructor(e,t=200,r="OK"){this.headers=e.headers||new id,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class dA extends cA{constructor(e={}){super(e),this.type=jr.ResponseHeader}clone(e={}){return new dA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _C extends cA{constructor(e={}){super(e),this.type=jr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _C({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class bP extends cA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function hA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let aB=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof uE)u=t;else{let y,w;y=i.headers instanceof id?i.headers:new id(i.headers),i.params&&(w=i.params instanceof lf?i.params:new lf({fromObject:i.params})),u=new uE(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=st(u).pipe(Vy(y=>this.handler.handle(y)));if(t instanceof uE||"events"===i.observe)return c;const f=c.pipe(Zr(y=>y instanceof _C));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return f.pipe((0,Tt.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,Tt.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,Tt.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,Tt.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new lf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,hA(i,r))}post(t,r,i={}){return this.request("POST",t,hA(i,r))}put(t,r,i={}){return this.request("PUT",t,hA(i,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gP))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class IP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const CP=new m.OlP("HTTP_INTERCEPTORS");let uB=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const lB=/^\)\]\}',?\n/;let DP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,B)=>i.setRequestHeader(L,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const u=t.serializeBody();let c=null;const f=()=>{if(null!==c)return c;const L=i.statusText||"OK",B=new id(i.getAllResponseHeaders()),re=function cB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new dA({headers:B,status:i.status,statusText:L,url:re}),c},y=()=>{let{headers:L,status:B,statusText:re,url:_e}=f(),Le=null;204!==B&&(Le=void 0===i.response?i.responseText:i.response),0===B&&(B=Le?200:0);let Qe=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof Le){const Xe=Le;Le=Le.replace(lB,"");try{Le=""!==Le?JSON.parse(Le):null}catch(Ge){Le=Xe,Qe&&(Qe=!1,Le={error:Ge,text:Le})}}Qe?(r.next(new _C({body:Le,headers:L,status:B,statusText:re,url:_e||void 0})),r.complete()):r.error(new bP({error:Le,headers:L,status:B,statusText:re,url:_e||void 0}))},w=L=>{const{url:B}=f(),re=new bP({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(re)};let T=!1;const x=L=>{T||(r.next(f()),T=!0);let B={type:jr.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},N=L=>{let B={type:jr.UploadProgress,loaded:L.loaded};L.lengthComputable&&(B.total=L.total),r.next(B)};return i.addEventListener("load",y),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",x),null!==u&&i.upload&&i.upload.addEventListener("progress",N)),i.send(u),r.next({type:jr.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",y),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",x),null!==u&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(an))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const fA=new m.OlP("XSRF_COOKIE_NAME"),pA=new m.OlP("XSRF_HEADER_NAME");class TP{}let dB=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=na(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(m.Lbi),m.LFG(fA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),gA=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(TP),m.LFG(pA))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),hB=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(CP,[]);this.chain=r.reduceRight((i,u)=>new IP(i,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(mP),m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),fB=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:gA,useClass:uB}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:fA,useValue:t.cookieName}:[],t.headerName?{provide:pA,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[gA,{provide:CP,useExisting:gA,multi:!0},{provide:TP,useClass:dB},{provide:fA,useValue:"XSRF-TOKEN"},{provide:pA,useValue:"X-XSRF-TOKEN"}]}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[aB,{provide:gP,useClass:hB},DP,{provide:mP,useExisting:DP}],imports:[[fB.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),gB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[$1]}),n.\u0275inj=m.cJS({providers:[],imports:[[da,tV,L1,XU,pB]]}),n})();(0,m.G48)(),Vu().bootstrapModule(gB).catch(n=>console.error(n))},5867:(tt,be,P)=>{P.d(be,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=P(9681);(0,m.registerVersion)("firebase","9.10.0","app")},127:(tt,be,P)=>{P.d(be,{Z:()=>m.Z});var m=P(3942);m.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(tt,be,P)=>{P.r(be);var m=P(5861),ee=P(3942),k=P(2090),ce=P(9681),oe=P(655),pe=P(1877),de=P(4859);const Oe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new pe.Yd("@firebase/auth");function et(_,...h){Ke.logLevel<=pe.in.ERROR&&Ke.error(`Auth (${ce.SDK_VERSION}): ${_}`,...h)}function xe(_,...h){throw je(_,...h)}function ve(_,...h){return je(_,...h)}function Ce(_,h,p){const E=Object.assign(Object.assign({},Be()),{[h]:p});return new k.LL("auth","Firebase",E).create(h,{appName:_.name})}function Ue(_,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&xe(_,"argument-error"),Ce(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(_,...h){if("string"!=typeof _){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return fe.create(_,...h)}function K(_,h,...p){if(!_)throw je(h,...p)}function we(_){const h="INTERNAL ASSERTION FAILED: "+_;throw et(h),new Error(h)}function Q(_,h){_||we(h)}const ie=new Map;function te(_){Q(_ instanceof Function,"Expected a class definition");let h=ie.get(_);return h?(Q(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,ie.set(_,h),h)}function Ne(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ht(){return"http:"===$t()||"https:"===$t()}function $t(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class rn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Q(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nn(_,h){Q(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class ln{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Sr=new rn(3e4,6e4);function Kt(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Ut(_,h,p,E){return hs.apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(_,h,p,E,S={}){return ii(_,S,(0,m.Z)(function*(){let O={},Z={};E&&("GET"===h?Z=E:O={body:JSON.stringify(E)});const le=(0,k.xO)(Object.assign({key:_.config.apiKey},Z)).slice(1),Fe=yield _._getAdditionalHeaders();return Fe["Content-Type"]="application/json",_.languageCode&&(Fe["X-Firebase-Locale"]=_.languageCode),ln.fetch()(Vs(_,_.config.apiHost,p,le),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ii(_,h,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(_,h,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},tn),h);try{const S=new $r(_),O=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw Mi(_,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const le=O.ok?Z.errorMessage:Z.error.message,[Fe,qe]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Mi(_,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Fe)throw Mi(_,"email-already-in-use",Z);if("USER_DISABLED"===Fe)throw Mi(_,"user-disabled",Z);const _t=E[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(qe)throw Ce(_,_t,qe);xe(_,_t)}}catch(S){if(S instanceof k.ZR)throw S;xe(_,"network-request-failed")}})).apply(this,arguments)}function Hr(_,h,p,E){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(_,h,p,E,S={}){const O=yield Ut(_,h,p,E,S);return"mfaPendingCredential"in O&&xe(_,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Vs(_,h,p,E){const S=`${h}${p}?${E}`;return _.config.emulator?Nn(_.config,S):`${_.config.apiScheme}://${S}`}class $r{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),Sr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mi(_,h,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const S=ve(_,h,E);return S.customData._tokenResponse=p,S}function Gr(){return(Gr=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function kn(_,h){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ri(_,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Fn(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Xo(){return(Xo=(0,m.Z)(function*(_,h=!1){const p=(0,k.m9)(_),E=yield p.getIdToken(h),S=ot(E);K(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,Z=null==O?void 0:O.sign_in_provider;return{claims:S,token:E,authTime:Fn(Gt(S.auth_time)),issuedAtTime:Fn(Gt(S.iat)),expirationTime:Fn(Gt(S.exp)),signInProvider:Z||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(_){return 1e3*Number(_)}function ot(_){var h;const[p,E,S]=_.split(".");if(void 0===p||void 0===E||void 0===S)return et("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,k.tV)(E);return O?JSON.parse(O):(et("Failed to decode base64 JWT payload"),null)}catch(O){return et("Caught error parsing JWT payload as JSON",null===(h=O)||void 0===h?void 0:h.toString()),null}}function pr(_,h){return si.apply(this,arguments)}function si(){return(si=(0,m.Z)(function*(_,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof k.ZR&&jt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function jt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Us{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(p=E)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class gr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fn(this.lastLoginAt),this.creationTime=Fn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ar(_){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(_){var h;const p=_.auth,E=yield _.getIdToken(),S=yield pr(_,Ri(p,{idToken:E}));K(null==S?void 0:S.users.length,p,"internal-error");const O=S.users[0];_._notifyReloadListener(O);const Z=(null===(h=O.providerUserInfo)||void 0===h?void 0:h.length)?U(O.providerUserInfo):[],le=W(_.providerData,Z),_t=!!_.isAnonymous&&!(_.email&&O.passwordHash||(null==le?void 0:le.length)),ct={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:le,metadata:new gr(O.createdAt,O.lastLoginAt),isAnonymous:_t};Object.assign(_,ct)})).apply(this,arguments)}function j(){return(j=(0,m.Z)(function*(_){const h=(0,k.m9)(_);yield Ar(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function W(_,h){return[..._.filter(E=>!h.some(S=>S.providerId===E.providerId)),...h]}function U(_){return _.map(h=>{var{providerId:p}=h,E=(0,oe._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function z(){return(z=(0,m.Z)(function*(_,h){const p=yield ii(_,{},(0,m.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:O}=_.config,Z=Vs(_,S,"/v1/token",`key=${O}`),le=yield _._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(Z,{method:"POST",headers:le,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){K(h.idToken,"internal-error"),K(void 0!==h.idToken,"internal-error"),K(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function It(_){const h=ot(_);return K(h,"internal-error"),K(void 0!==h.exp,"internal-error"),K(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,m.Z)(function*(){return K(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,m.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:Z}=yield function $(_,h){return z.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(S,O,Number(Z))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:S,expirationTime:O}=p,Z=new Ae;return E&&(K("string"==typeof E,"internal-error",{appName:h}),Z.refreshToken=E),S&&(K("string"==typeof S,"internal-error",{appName:h}),Z.accessToken=S),O&&(K("number"==typeof O,"internal-error",{appName:h}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ae,this.toJSON())}_performRefresh(){return we("not implemented")}}function Ve(_,h){K("string"==typeof _||void 0===_,"internal-error",{appName:h})}class ut{constructor(h){var{uid:p,auth:E,stsTokenManager:S}=h,O=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Us(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new gr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const E=yield pr(p,p.stsTokenManager.getToken(p.auth,h));return K(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function Ei(_){return Xo.apply(this,arguments)}(this,h)}reload(){return function Bs(_){return j.apply(this,arguments)}(this)}_assign(h){this!==h&&(K(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new ut(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,m.Z)(function*(){let S=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield Ar(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield pr(h,function Et(_,h){return Gr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,S,O,Z,le,Fe,qe,_t;const ct=null!==(E=p.displayName)&&void 0!==E?E:void 0,Un=null!==(S=p.email)&&void 0!==S?S:void 0,fi=null!==(O=p.phoneNumber)&&void 0!==O?O:void 0,wa=null!==(Z=p.photoURL)&&void 0!==Z?Z:void 0,Ti=null!==(le=p.tenantId)&&void 0!==le?le:void 0,Bo=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,yc=null!==(qe=p.createdAt)&&void 0!==qe?qe:void 0,ba=null!==(_t=p.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Vf,emailVerified:Zd,isAnonymous:Yd,providerData:Uf,stsTokenManager:Sg}=p;K(Vf&&Sg,h,"internal-error");const Ag=Ae.fromJSON(this.name,Sg);K("string"==typeof Vf,h,"internal-error"),Ve(ct,h.name),Ve(Un,h.name),K("boolean"==typeof Zd,h,"internal-error"),K("boolean"==typeof Yd,h,"internal-error"),Ve(fi,h.name),Ve(wa,h.name),Ve(Ti,h.name),Ve(Bo,h.name),Ve(yc,h.name),Ve(ba,h.name);const Bf=new ut({uid:Vf,auth:h,email:Un,emailVerified:Zd,displayName:ct,isAnonymous:Yd,photoURL:wa,phoneNumber:fi,tenantId:Ti,stsTokenManager:Ag,createdAt:yc,lastLoginAt:ba});return Uf&&Array.isArray(Uf)&&(Bf.providerData=Uf.map(Qd=>Object.assign({},Qd))),Bo&&(Bf._redirectEventId=Bo),Bf}static _fromIdTokenResponse(h,p,E=!1){return(0,m.Z)(function*(){const S=new Ae;S.updateFromServerResponse(p);const O=new ut({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:E});return yield Ar(O),O})()}}const qt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var S=this;return(0,m.Z)(function*(){S.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const S=E.storage[p];return void 0===S?null:S})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function Xn(_,h,p){return`firebase:${_}:${h}:${p}`}class Ft{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:S,name:O}=this.auth;this.fullUserKey=Xn(this.userKey,S.apiKey,O),this.fullPersistenceKey=Xn("persistence",S.apiKey,O),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?ut._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Ft(te(qt),h,E);const S=(yield Promise.all(p.map(function(){var qe=(0,m.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return qe.apply(this,arguments)}}()))).filter(qe=>qe);let O=S[0]||te(qt);const Z=Xn(E,h.config.apiKey,h.name);let le=null;for(const qe of p)try{const _t=yield qe._get(Z);if(_t){const ct=ut._fromJSON(h,_t);qe!==O&&(le=ct),O=qe;break}}catch(_t){}const Fe=S.filter(qe=>qe._shouldAllowMigration);return O._shouldAllowMigration&&Fe.length?(O=Fe[0],le&&(yield O._set(Z,le.toJSON())),yield Promise.all(p.map(function(){var qe=(0,m.Z)(function*(_t){if(_t!==O)try{yield _t._remove(Z)}catch(ct){}});return function(_t){return qe.apply(this,arguments)}}())),new Ft(O,h,E)):new Ft(O,h,E)})()}}function oi(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Zn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Oi(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ps(h))return"Blackberry";if(Yn(h))return"Webos";if(ea(h))return"Safari";if((h.includes("chrome/")||Na(h))&&!h.includes("edge/"))return"Chrome";if(xr(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Oi(_=(0,k.z$)()){return/firefox\//i.test(_)}function ea(_=(0,k.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Na(_=(0,k.z$)()){return/crios\//i.test(_)}function Zn(_=(0,k.z$)()){return/iemobile/i.test(_)}function xr(_=(0,k.z$)()){return/android/i.test(_)}function ps(_=(0,k.z$)()){return/blackberry/i.test(_)}function Yn(_=(0,k.z$)()){return/webos/i.test(_)}function qr(_=(0,k.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function js(_=(0,k.z$)()){return qr(_)||xr(_)||Yn(_)||ps(_)||/windows phone/i.test(_)||Zn(_)}function ta(_,h=[]){let p;switch(_){case"Browser":p=oi((0,k.z$)());break;case"Worker":p=`${oi((0,k.z$)())}-${_}`;break;default:p=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ce.SDK_VERSION}/${E}`}class zr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const E=O=>new Promise((Z,le)=>{try{Z(h(O))}catch(Fe){le(Fe)}});E.onAbort=p,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,m.Z)(function*(){var E;if(p.auth.currentUser===h)return;const S=[];try{for(const O of p.queue)yield O(h),O.onAbort&&S.push(O.onAbort)}catch(O){S.reverse();for(const Z of S)try{Z()}catch(le){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class Ze{constructor(h,p,E){this.app=h,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var S,O;if(!E._deleted&&(E.persistenceManager=yield Ft.create(E,h),!E._deleted)){if(null===(S=E._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Z){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var E;const S=yield p.assertedPersistence.getCurrentUser();let O=S,Z=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const le=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,Fe=null==O?void 0:O._redirectEventId,qe=yield p.tryRedirectSignIn(h);(!le||le===Fe)&&(null==qe?void 0:qe.user)&&(O=qe.user,Z=!0)}if(!O)return p.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield p.beforeStateQueue.runMiddleware(O)}catch(le){O=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(le))}return O?p.reloadAndSetCurrentUserOrClear(O):p.directlySetCurrentUser(null)}return K(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===O._redirectEventId?p.directlySetCurrentUser(O):p.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(S){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){var E;try{yield Ar(h)}catch(S){if("auth/network-request-failed"!==(null===(E=S)||void 0===E?void 0:E.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Je(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const E=h?(0,k.m9)(h):null;return E&&K(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h,p=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return h&&K(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,m.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&te(h)||p._popupRedirectResolver;K(E,p,"argument-error"),p.redirectPersistenceManager=yield Ft.create(p,[te(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var E,S;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,S){if(this._deleted)return()=>{};const O="function"==typeof p?p:p.next.bind(p),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return K(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof p?h.addObserver(p,E,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,m.Z)(function*(){var p;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function lt(_){return(0,k.m9)(_)}class on{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Ni(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class wi{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return we("not implemented")}_getIdTokenResponse(h){return we("not implemented")}_linkToIdToken(h,p){return we("not implemented")}_getReauthenticationResolver(h){return we("not implemented")}}function Ln(_,h){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:resetPassword",Kt(_,h))})).apply(this,arguments)}function na(_,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xu(_,h){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:update",Kt(_,h))})).apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithPassword",Kt(_,h))})).apply(this,arguments)}function $s(_,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:sendOobCode",Kt(_,h))})).apply(this,arguments)}function cn(_,h){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(_,h){return $s(_,h)})).apply(this,arguments)}function Fa(_,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(_,h){return $s(_,h)})).apply(this,arguments)}function ki(_,h){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,m.Z)(function*(_,h){return $s(_,h)})).apply(this,arguments)}function ad(_,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(_,h){return $s(_,h)})).apply(this,arguments)}function jl(){return(jl=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithEmailLink",Kt(_,h))})).apply(this,arguments)}function ud(){return(ud=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithEmailLink",Kt(_,h))})).apply(this,arguments)}class mr extends wi{constructor(h,p,E,S=null){super("password",E),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new mr(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new mr(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function er(_,h){return _o.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Li(_,h){return jl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return na(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Qp(_,h){return ud.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Gs(_,h){return ld.apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithIdp",Kt(_,h))})).apply(this,arguments)}class ms extends wi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ms(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):xe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S}=p,O=(0,oe._T)(p,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new ms(E,S);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(h){return Gs(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Gs(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gs(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function Xp(_,h){return cd.apply(this,arguments)}function cd(){return(cd=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:sendVerificationCode",Kt(_,h))})).apply(this,arguments)}function qs(){return(qs=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,h))})).apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(_,h){const p=yield Hr(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,h));if(p.temporaryProof)throw Mi(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const tg={USER_NOT_FOUND:"user-not-found"};function hd(){return(hd=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithPhoneNumber",Kt(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),tg)})).apply(this,arguments)}class ra extends wi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ra({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ra({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Hl(_,h){return qs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function eg(_,h){return dd.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ng(_,h){return hd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:S,temporaryProof:O}=h;return E||p||S||O?new ra({verificationId:p,verificationCode:E,phoneNumber:S,temporaryProof:O}):null}}class Ou{constructor(h){var p,E,S,O,Z,le;const Fe=(0,k.zd)((0,k.pd)(h)),qe=null!==(p=Fe.apiKey)&&void 0!==p?p:null,_t=null!==(E=Fe.oobCode)&&void 0!==E?E:null,ct=function hf(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);K(qe&&_t&&ct,"argument-error"),this.apiKey=qe,this.operation=ct,this.code=_t,this.continueUrl=null!==(O=Fe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=Fe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(le=Fe.tenantId)&&void 0!==le?le:null}static parseLink(h){const p=function La(_){const h=(0,k.zd)((0,k.pd)(_)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(_)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||p||h||_}(h);try{return new Ou(p)}catch(E){return null}}}let pd=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return mr._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const S=Ou.parseLink(E);return K(S,"argument-error"),mr._fromEmailAndCode(p,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class yr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class vo extends yr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Vi extends vo{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return K("providerId"in p&&"signInMethod"in p,"argument-error"),ms._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return K(h.idToken||h.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Vi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Vi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:O,nonce:Z,providerId:le}=h;if(!E&&!S&&!p&&!O||!le)return null;try{return new Vi(le)._credential({idToken:p,accessToken:E,nonce:Z,pendingToken:O})}catch(Fe){return null}}}let ia=(()=>{class _ extends vo{constructor(){super("facebook.com")}static credential(p){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),gd=(()=>{class _ extends vo{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:S}=p;if(!E&&!S)return null;try{return _.credential(E,S)}catch(O){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),ff=(()=>{class _ extends vo{constructor(){super("github.com")}static credential(p){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Eo extends wi{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Gs(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Gs(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Gs(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:S,pendingToken:O}=p;return E&&S&&O&&E===S?new Eo(E,O):null}static _create(h,p){return new Eo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mr extends yr{constructor(h){K(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Mr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Mr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Eo.fromJSON(h);return K(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:E}=h;if(!p||!E)return null;try{return Eo._create(E,p)}catch(S){return null}}}let yd=(()=>{class _ extends vo{constructor(){super("twitter.com")}static credential(p,E){return ms._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=p;if(!E||!S)return null;try{return _.credential(E,S)}catch(O){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Rr(_,h){return oa.apply(this,arguments)}function oa(){return(oa=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signUp",Kt(_,h))})).apply(this,arguments)}class ai{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,S=!1){return(0,m.Z)(function*(){const O=yield ut._fromIdTokenResponse(h,E,S),Z=$l(E);return new ai({user:O,providerId:Z,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const S=$l(E);return new ai({user:h,providerId:S,_tokenResponse:E,operationType:p})})()}}function $l(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Gl(){return(Gl=(0,m.Z)(function*(_){var h;const p=lt(_);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new ai({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Rr(p,{returnSecureToken:!0}),S=yield ai._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class aa extends k.ZR{constructor(h,p,E,S){var O;super(p.code,p.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,aa.prototype),this.customData={appName:h.name,tenantId:null!==(O=h.tenantId)&&void 0!==O?O:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,S){return new aa(h,p,E,S)}}function ql(_,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?aa._fromErrorAndOperation(_,O,h,E):O})}function Ui(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function an(){return(an=(0,m.Z)(function*(_,h){const p=(0,k.m9)(_);yield nn(!0,p,h);const{providerUserInfo:E}=yield kn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Ui(E||[]);return p.providerData=p.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Va(_,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,m.Z)(function*(_,h,p=!1){const E=yield pr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),p);return ai._forOperation(_,"link",E)})).apply(this,arguments)}function nn(_,h,p){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,m.Z)(function*(_,h,p){yield Ar(h);const S=!1===_?"provider-already-linked":"no-such-provider";K(Ui(h.providerData).has(p)===_,h.auth,S)})).apply(this,arguments)}function Pu(_,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,m.Z)(function*(_,h,p=!1){var E;const{auth:S}=_,O="reauthenticate";try{const Z=yield pr(_,ql(S,O,h,_),p);K(Z.idToken,S,"internal-error");const le=ot(Z.idToken);K(le,S,"internal-error");const{sub:Fe}=le;return K(_.uid===Fe,S,"user-mismatch"),ai._forOperation(_,O,Z)}catch(Z){throw"auth/user-not-found"===(null===(E=Z)||void 0===E?void 0:E.code)&&xe(S,"user-mismatch"),Z}})).apply(this,arguments)}function ur(_,h){return zl.apply(this,arguments)}function zl(){return(zl=(0,m.Z)(function*(_,h,p=!1){const E="signIn",S=yield ql(_,E,h),O=yield ai._fromIdTokenResponse(_,E,S);return p||(yield _._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Cn(_,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(_,h){return ur(lt(_),h)})).apply(this,arguments)}function lr(_,h){return bo.apply(this,arguments)}function bo(){return(bo=(0,m.Z)(function*(_,h){const p=(0,k.m9)(_);return yield nn(!1,p,h.providerId),Va(p,h)})).apply(this,arguments)}function ys(_,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(_,h){return Pu((0,k.m9)(_),h)})).apply(this,arguments)}function bi(_,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(_,h){return Hr(_,"POST","/v1/accounts:signInWithCustomToken",Kt(_,h))})).apply(this,arguments)}function yt(){return(yt=(0,m.Z)(function*(_,h){const p=lt(_),E=yield bi(p,{token:h,returnSecureToken:!0}),S=yield ai._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class la{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Nu._fromServerResponse(h,p):xe(h,"internal-error")}}class Nu extends la{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Nu(p)}}function ja(_,h,p){var E;K((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),K(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(K(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(K(p.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Ha(){return(Ha=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_),S={requestType:"PASSWORD_RESET",email:h};p&&ja(E,S,p),yield Fa(E,S)})).apply(this,arguments)}function Zl(){return(Zl=(0,m.Z)(function*(_,h,p){yield Ln((0,k.m9)(_),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(_,h){yield xu((0,k.m9)(_),{oobCode:h})})).apply(this,arguments)}function Yl(_,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(_,h){const p=(0,k.m9)(_),E=yield Ln(p,{oobCode:h}),S=E.requestType;switch(K(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(E.mfaInfo,p,"internal-error");default:K(E.email,p,"internal-error")}let O=null;return E.mfaInfo&&(O=la._fromServerResponse(lt(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function Io(){return(Io=(0,m.Z)(function*(_,h){const{data:p}=yield Yl((0,k.m9)(_),h);return p.email})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(_,h,p){const E=lt(_),S=yield Rr(E,{returnSecureToken:!0,email:h,password:p}),O=yield ai._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function ku(){return(ku=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_),S={requestType:"EMAIL_SIGNIN",email:h};K(p.handleCodeInApp,E,"argument-error"),p&&ja(E,S,p),yield ki(E,S)})).apply(this,arguments)}function Vn(){return(Vn=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_),S=pd.credentialWithLink(h,p||Ne());return K(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Cn(E,S)})).apply(this,arguments)}function _s(_,h){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:createAuthUri",Kt(_,h))})).apply(this,arguments)}function Ii(){return(Ii=(0,m.Z)(function*(_,h){const E={identifier:h,continueUri:ht()?Ne():"http://localhost"},{signinMethods:S}=yield _s((0,k.m9)(_),E);return S||[]})).apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(_,h){const p=(0,k.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&ja(p.auth,S,h);const{email:O}=yield cn(p.auth,S);O!==_.email&&(yield _.reload())})).apply(this,arguments)}function Vu(){return(Vu=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};p&&ja(E.auth,O,p);const{email:Z}=yield ad(E.auth,O);Z!==_.email&&(yield _.reload())})).apply(this,arguments)}function za(_,h){return da.apply(this,arguments)}function da(){return(da=(0,m.Z)(function*(_,h){return Ut(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(_,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,k.m9)(_),O={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},Z=yield pr(E,za(E.auth,O));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const le=E.providerData.find(({providerId:Fe})=>"password"===Fe);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function ha(_,h,p){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(_,h,p){const{auth:E}=_,O={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(O.email=h),p&&(O.password=p);const Z=yield pr(_,na(E,O));yield _._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class fa{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class Ed extends fa{constructor(h,p,E,S){super(h,p,E),this.username=S}}class pa extends fa{constructor(h,p){super(h,"facebook.com",p)}}class Hi extends Ed{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class gf extends fa{constructor(h,p){super(h,"google.com",p)}}class tr extends Ed{constructor(h,p,E){super(h,"twitter.com",p,E)}}function $i(_){const{user:h,_tokenResponse:p}=_;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function vd(_){var h,p;if(!_)return null;const{providerId:E}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},O=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const Z=null===(p=null===(h=ot(_.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(Z)return new fa(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new pa(O,S);case"github.com":return new Hi(O,S);case"google.com":return new gf(O,S);case"twitter.com":return new tr(O,S,_.screenName||null);case"custom":case"anonymous":return new fa(O,null);default:return new fa(O,E,S)}}(p)}class vs{constructor(h,p,E){this.type=h,this.credential=p,this.auth=E}static _fromIdtoken(h,p){return new vs("enroll",h,p)}static _fromMfaPendingCredential(h){return new vs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return vs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return vs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ga{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=lt(h),S=p.customData._serverResponse,O=(S.mfaInfo||[]).map(le=>la._fromServerResponse(E,le));K(S.mfaPendingCredential,E,"internal-error");const Z=vs._fromMfaPendingCredential(S.mfaPendingCredential);return new ga(Z,O,function(){var le=(0,m.Z)(function*(Fe){const qe=yield Fe._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const _t=Object.assign(Object.assign({},S),{idToken:qe.idToken,refreshToken:qe.refreshToken});switch(p.operationType){case"signIn":const ct=yield ai._fromIdTokenResponse(E,p.operationType,_t);return yield E._updateCurrentUser(ct.user),ct;case"reauthenticate":return K(p.user,E,"internal-error"),ai._forOperation(p.user,p.operationType,_t);default:xe(E,"internal-error")}});return function(Fe){return le.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function yf(_,h){return Ut(_,"POST","/v2/accounts/mfaEnrollment:start",Kt(_,h))}class Id{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>la._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new Id(h)}getSession(){var h=this;return(0,m.Z)(function*(){return vs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var E=this;return(0,m.Z)(function*(){const S=h,O=yield E.getSession(),Z=yield pr(E.user,S._process(E.user.auth,O,p));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){var E;const S="string"==typeof h?h:h.uid,O=yield p.user.getIdToken(),Z=yield pr(p.user,function Uu(_,h){return Ut(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(_,h))}(p.user.auth,{idToken:O,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:le})=>le!==S),yield p.user._updateTokensIfNecessary(Z);try{yield p.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(E=le)||void 0===E?void 0:E.code))throw le}})()}}const Bu=new WeakMap,Do="__sak";class Cd{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Do,"1"),this.storage.removeItem(Do),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Yt=(()=>{class _ extends Cd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function og(){const _=(0,k.z$)();return ea(_)||qr(_)}()&&function or(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=js(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),O=this.localCache[E];S!==O&&p(E,O,S)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((le,Fe,qe)=>{this.notifyListeners(le,qe)});const S=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(S);if(p.newValue!==le)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!E)return}const O=()=>{const le=this.storage.getItem(S);!E&&this.localCache[S]===le||this.notifyListeners(S,le)},Z=this.storage.getItem(S);!function ka(){return(0,k.w1)()&&10===document.documentMode}()||Z===p.newValue||p.newValue===p.oldValue?O():setTimeout(O,10)}notifyListeners(p,E){this.localCache[p]=E;const S=this.listeners[p];if(S)for(const O of Array.from(S))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var S=()=>super._set,O=this;return(0,m.Z)(function*(){yield S().call(O,p,E),O.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,S=this;return(0,m.Z)(function*(){const O=yield E().call(S,p);return S.localCache[p]=JSON.stringify(O),O})()}_remove(p){var E=()=>super._remove,S=this;return(0,m.Z)(function*(){yield E().call(S,p),delete S.localCache[p]})()}}return _.type="LOCAL",_})(),st=(()=>{class _ extends Cd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let Ya=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(O=>O.isListeningto(p));if(E)return E;const S=new _(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const S=p,{eventId:O,eventType:Z,data:le}=S.data,Fe=E.handlersMap[Z];if(!(null==Fe?void 0:Fe.size))return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const qe=Array.from(Fe).map(function(){var ct=(0,m.Z)(function*(Un){return Un(S.origin,le)});return function(Un){return ct.apply(this,arguments)}}()),_t=yield function pn(_){return Promise.all(_.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(qe);S.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:_t})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Gi(_="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return _+p}class Qa{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var S=this;return(0,m.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,le;return new Promise((Fe,qe)=>{const _t=Gi("",20);O.port1.start();const ct=setTimeout(()=>{qe(new Error("unsupported_event"))},E);le={messageChannel:O,onMessage(Un){const fi=Un;if(fi.data.eventId===_t)switch(fi.data.status){case"ack":clearTimeout(ct),Z=setTimeout(()=>{qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Fe(fi.data.response);break;default:clearTimeout(ct),clearTimeout(Z),qe(new Error("invalid_response"))}}},S.handlers.add(le),O.port1.addEventListener("message",le.onMessage),S.target.postMessage({eventType:h,eventId:_t,data:p},[O.port2])}).finally(()=>{le&&S.removeMessageHandler(le)})})()}}function Vt(){return window}function Dn(){return void 0!==Vt().WorkerGlobalScope&&"function"==typeof Vt().importScripts}function Tt(){return(Tt=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Zs="firebaseLocalStorageDb",Ys="firebaseLocalStorage",Zr="fbase_key";class yn{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ma(_,h){return _.transaction([Ys],h?"readwrite":"readonly").objectStore(Ys)}function Or(){const _=indexedDB.open(Zs,1);return new Promise((h,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Ys,{keyPath:Zr})}catch(S){p(S)}}),_.addEventListener("success",(0,m.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Ys)?h(E):(E.close(),yield function $u(){const _=indexedDB.deleteDatabase(Zs);return new yn(_).toPromise()}(),h(yield Or()))}))})}function qi(_,h,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,m.Z)(function*(_,h,p){const E=ma(_,!0).put({[Zr]:h,value:p});return new yn(E).toPromise()})).apply(this,arguments)}function eu(){return(eu=(0,m.Z)(function*(_,h){const p=ma(_,!1).get(h),E=yield new yn(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Di(_,h){const p=ma(_,!0).delete(h);return new yn(p).toPromise()}const zi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield Or()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let S=0;for(;;)try{const O=yield E._openDb();return yield p(O)}catch(O){if(S++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Dn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Ya._getInstance(function Ja(){return Dn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(S,O){return{keyProcessed:(yield p._poll()).includes(O.key)}});return function(S,O){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,S;if(p.activeServiceWorker=yield function Hu(){return Tt.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Qa(p.activeServiceWorker);const O=yield p.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=O[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Dd(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Or();return yield qi(p,Do,"1"),yield Di(p,Do),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var S=this;return(0,m.Z)(function*(){return S._withPendingWrite((0,m.Z)(function*(){return yield S._withRetries(O=>qi(O,p,E)),S.localCache[p]=E,S.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const S=yield E._withRetries(O=>function xt(_,h){return eu.apply(this,arguments)}(O,p));return E.localCache[p]=S,S})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(S=>Di(S,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(Z=>{const le=ma(Z,!1).getAll();return new yn(le).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:Z,value:le}of E)O.add(Z),JSON.stringify(p.localCache[Z])!==JSON.stringify(le)&&(p.notifyListeners(Z,le),S.push(Z));for(const Z of Object.keys(p.localCache))p.localCache[Z]&&!O.has(Z)&&(p.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(p,E){this.localCache[p]=E;const S=this.listeners[p];if(S)for(const O of Array.from(S))O(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ao(_,h){return Ut(_,"POST","/v2/accounts/mfaSignIn:start",Kt(_,h))}function Qs(){return(Qs=(0,m.Z)(function*(_){return(yield Ut(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zi(_){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=S=>{const O=ve("internal-error");O.customData=S,p(O)},E.type="text/javascript",E.charset="UTF-8",function Gu(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function Js(_){return`__${_}${Math.floor(1e6*Math.random())}`}const _n=1e12;class li{constructor(h){this.auth=h,this.counter=_n,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new ag(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||_n;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||_n))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(h||_n))||void 0===E||E.execute(),""})()}}class ag{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;K(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vf(_){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=Js("rcb"),nc=new rn(3e4,6e4);class rr{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=Vt().grecaptcha)||void 0===h?void 0:h.render)}load(h,p=""){return K(function zy(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Vt().grecaptcha):new Promise((E,S)=>{const O=Vt().setTimeout(()=>{S(ve(h,"network-request-failed"))},nc.get());Vt()[En]=()=>{Vt().clearTimeout(O),delete Vt()[En];const le=Vt().grecaptcha;if(!le)return void S(ve(h,"internal-error"));const Fe=le.render;le.render=(qe,_t)=>{const ct=Fe(qe,_t);return this.counter++,ct},this.hostLanguage=p,E(le)},Zi(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:En,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(O),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!!(null===(p=Vt().grecaptcha)||void 0===p?void 0:p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Td{load(h){return(0,m.Z)(function*(){return new li(h)})()}clearedOneInstance(){}}const wf="recaptcha",bf={theme:"light",type:"image"};class xo{constructor(h,p=Object.assign({},bf),E){this.parameters=p,this.type=wf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lt(E),this.isInvisible="invisible"===this.parameters.size,K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;K(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Td:new rr,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(O=>{const Z=le=>{!le||(h.tokenChangeListeners.delete(Z),O(le))};h.tokenChangeListeners.add(Z),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=Vt()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){K(ht()&&!Dn(),h.auth,"internal-error"),yield function Es(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Ki(_){return Qs.apply(this,arguments)}(h.auth);K(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sn{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ra._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Xs(){return(Xs=(0,m.Z)(function*(_,h,p){const E=lt(_),S=yield nu(E,h,(0,k.m9)(p));return new Sn(S,O=>Cn(E,O))})).apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_);yield nn(!1,E,"phone");const S=yield nu(E.auth,h,(0,k.m9)(p));return new Sn(S,O=>lr(E,O))})).apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_),S=yield nu(E.auth,h,(0,k.m9)(p));return new Sn(S,O=>ys(E,O))})).apply(this,arguments)}function nu(_,h,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,m.Z)(function*(_,h,p){var E;const S=yield p.verify();try{let O;if(K("string"==typeof S,_,"argument-error"),K(p.type===wf,_,"argument-error"),O="string"==typeof h?{phoneNumber:h}:h,"session"in O){const Z=O.session;if("phoneNumber"in O)return K("enroll"===Z.type,_,"internal-error"),(yield yf(_,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{K("signin"===Z.type,_,"internal-error");const le=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return K(le,_,"missing-multi-factor-info"),(yield Ao(_,{mfaPendingCredential:Z.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Xp(_,{phoneNumber:O.phoneNumber,recaptchaToken:S});return Z}}finally{p._reset()}})).apply(this,arguments)}function ya(){return(ya=(0,m.Z)(function*(_,h){yield Va((0,k.m9)(_),h)})).apply(this,arguments)}let Oo=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=lt(p)}verifyPhoneNumber(p,E){return nu(this.auth,p,(0,k.m9)(E))}static credential(p,E){return ra._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:S}=p;return E&&S?ra._fromTokenResponse(E,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Yi(_,h){return h?te(h):(K(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Sd extends wi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Gs(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Gs(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Gs(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function ug(_){return ur(_.auth,new Sd(_),_.bypassAuthState)}function _a(_){const{auth:h,user:p}=_;return K(p,h,"internal-error"),Pu(p,new Sd(_),_.bypassAuthState)}function cr(_){return Po.apply(this,arguments)}function Po(){return(Po=(0,m.Z)(function*(_){const{auth:h,user:p}=_;return K(p,h,"internal-error"),Va(p,new Sd(_),_.bypassAuthState)})).apply(this,arguments)}class Jr{constructor(h,p,E,S,O=!1){this.auth=h,this.resolver=E,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(E,S){h.pendingPromise={resolve:E,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(O){h.reject(O)}});return function(E,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:O,tenantId:Z,error:le,type:Fe}=h;if(le)return void p.reject(le);const qe={auth:p.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:O||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(qe))}catch(_t){p.reject(_t)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ug;case"linkViaPopup":case"linkViaRedirect":return cr;case"reauthViaPopup":case"reauthViaRedirect":return _a;default:xe(this.auth,"internal-error")}}resolve(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ad=new rn(2e3,1e4);function ru(){return(ru=(0,m.Z)(function*(_,h,p){const E=lt(_);Ue(_,h,yr);const S=Yi(E,p);return new su(E,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function iu(){return(iu=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_);Ue(E.auth,h,yr);const S=Yi(E.auth,p);return new su(E.auth,"reauthViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}function Wu(){return(Wu=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_);Ue(E.auth,h,yr);const S=Yi(E.auth,p);return new su(E.auth,"linkViaPopup",h,S,E).executeNotNull()})).apply(this,arguments)}let su=(()=>{class _ extends Jr{constructor(p,E,S,O,Z){super(p,E,O,Z),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return K(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){Q(1===p.filter.length,"Popup operations only handle one event");const E=Gi();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,S;this.pollId=(null===(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ad.get())};p()}}return _.currentPopupAction=null,_})();const ci=new Map;class Md extends Jr{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=ci.get(p.auth._key());if(!E){try{const O=(yield function No(_,h){return Xr.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(O)}catch(S){E=()=>Promise.reject(S)}ci.set(p.auth._key(),E)}return p.bypassAuthState||ci.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const S=yield E.auth._redirectUserForId(h.eventId);if(S)return E.user=S,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Xr(){return(Xr=(0,m.Z)(function*(_,h){const p=rc(h),E=ou(_);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(p));return yield E._remove(p),S})).apply(this,arguments)}function to(_,h){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(_,h){return ou(_)._set(rc(h),"true")})).apply(this,arguments)}function Od(_,h){ci.set(_._key(),h)}function ou(_){return te(_._redirectPersistence)}function rc(_){return Xn("pendingRedirect",_.config.apiKey,_.name)}function C(){return(C=(0,m.Z)(function*(_,h,p){const E=lt(_);Ue(_,h,yr);const S=Yi(E,p);return yield to(S,E),S._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function V(){return(V=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_);Ue(E.auth,h,yr);const S=Yi(E.auth,p);yield to(S,E.auth);const O=yield gt(E);return S._openRedirect(E.auth,h,"reauthViaRedirect",O)})).apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(_,h,p){const E=(0,k.m9)(_);Ue(E.auth,h,yr);const S=Yi(E.auth,p);yield nn(!1,E,h.providerId),yield to(S,E.auth);const O=yield gt(E);return S._openRedirect(E.auth,h,"linkViaRedirect",O)})).apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(_,h){return yield lt(_)._initializationPromise,bt(_,h,!1)})).apply(this,arguments)}function bt(_,h){return At.apply(this,arguments)}function At(){return(At=(0,m.Z)(function*(_,h,p=!1){const E=lt(_),S=Yi(E,h),Z=yield new Md(E,S,p).execute();return Z&&!p&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,h)),Z})).apply(this,arguments)}function gt(_){return An.apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(_){const h=Gi(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class no{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ic(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return di(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!di(h)){const S=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ro(h))}saveEventToCache(h){this.cachedEventUids.add(ro(h)),this.lastProcessedEventTime=Date.now()}}function ro(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function di({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Ku(_){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,m.Z)(function*(_,h={}){return Ut(_,"GET","/v1/projects",h)})).apply(this,arguments)}const kr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hi=/^https?/;function cg(){return(cg=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Ku(_);for(const p of h)try{if(Zu(p))return}catch(E){}xe(_,"unauthorized-domain")})).apply(this,arguments)}function Zu(_){const h=Ne(),{protocol:p,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const Z=new URL(_);return""===Z.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&Z.hostname===E}if(!hi.test(p))return!1;if(kr.test(_))return E===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const dg=new rn(3e4,6e4);function hg(){const _=Vt().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let au=null;function Wy(_){return au=au||function fg(_){return new Promise((h,p)=>{var E,S,O;function Z(){hg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{hg(),p(ve(_,"network-request-failed"))},timeout:dg.get()})}if(null===(S=null===(E=Vt().gapi)||void 0===E?void 0:E.iframes)||void 0===S?void 0:S.Iframe)h(gapi.iframes.getContext());else{if(!(null===(O=Vt().gapi)||void 0===O?void 0:O.load)){const le=Js("iframefcb");return Vt()[le]=()=>{gapi.load?Z():p(ve(_,"network-request-failed"))},Zi(`https://apis.google.com/js/api.js?onload=${le}`).catch(Fe=>p(Fe))}Z()}}).catch(h=>{throw au=null,h})}(_),au}const Nd=new rn(5e3,15e3),Ky={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zy(_){const h=_.config;K(h.authDomain,_,"auth-domain-config-required");const p=h.emulator?Nn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:ce.SDK_VERSION},S=uu.get(_.config.apiHost);S&&(E.eid=S);const O=_._getFrameworks();return O.length&&(E.fw=O.join(",")),`${p}?${(0,k.xO)(E).slice(1)}`}function Qu(){return Qu=(0,m.Z)(function*(_){const h=yield Wy(_),p=Vt().gapi;return K(p,_,"internal-error"),h.open({where:document.body,url:Zy(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ky,dontclear:!0},E=>new Promise(function(){var S=(0,m.Z)(function*(O,Z){yield E.restyle({setHideOnLeave:!1});const le=ve(_,"network-request-failed"),Fe=Vt().setTimeout(()=>{Z(le)},Nd.get());function qe(){Vt().clearTimeout(Fe),O(E)}E.ping(qe).then(qe,()=>{Z(le)})});return function(O,Z){return S.apply(this,arguments)}}()))}),Qu.apply(this,arguments)}const Ju={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ac{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function bs(_,h,p,E,S,O){K(_.config.authDomain,_,"auth-domain-config-required"),K(_.config.apiKey,_,"invalid-api-key");const Z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:ce.SDK_VERSION,eventId:S};if(h instanceof yr){h.setDefaultLanguage(_.languageCode),Z.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(Z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,qe]of Object.entries(O||{}))Z[Fe]=qe}if(h instanceof vo){const Fe=h.getScopes().filter(qe=>""!==qe);Fe.length>0&&(Z.scopes=Fe.join(","))}_.tenantId&&(Z.tid=_.tenantId);const le=Z;for(const Fe of Object.keys(le))void 0===le[Fe]&&delete le[Fe];return`${function Tf({config:_}){return _.emulator?Nn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,k.xO)(le).slice(1)}`}const kd="webStorageSupport";class Sf extends class Ld{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Sf(h)}_finalizeEnroll(h,p,E){return function Co(_,h){return Ut(_,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(_,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Wi(_,h){return Ut(_,"POST","/v2/accounts/mfaSignIn:finalize",Kt(_,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yg=(()=>{class _{constructor(){}static assertion(p){return Sf._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var Vd="@firebase/auth";class Af{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var S;h((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function io(){return window}function so(){return(so=(0,m.Z)(function*(_,h,p){var E;const{BuildInfo:S}=io();Q(h.sessionId,"AuthEvent did not contain a session ID");const O=yield Bd(h.sessionId),Z={};return qr()?Z.ibi=S.packageName:xr()?Z.apn=S.packageName:xe(_,"operation-not-supported-in-this-environment"),S.displayName&&(Z.appDisplayName=S.displayName),Z.sessionId=O,bs(_,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,Z)})).apply(this,arguments)}function oo(){return(oo=(0,m.Z)(function*(_){const{BuildInfo:h}=io(),p={};qr()?p.iosBundleId=h.packageName:xr()?p.androidPackageName=h.packageName:xe(_,"operation-not-supported-in-this-environment"),yield Ku(_,p)})).apply(this,arguments)}function vg(){return(vg=(0,m.Z)(function*(_,h,p){const{cordova:E}=io();let S=()=>{};try{yield new Promise((O,Z)=>{let le=null;function Fe(){var ct;O();const Un=null===(ct=E.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Un&&Un(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function qe(){le||(le=window.setTimeout(()=>{Z(ve(_,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===(null==document?void 0:document.visibilityState)&&qe()}h.addPassiveListener(Fe),document.addEventListener("resume",qe,!1),xr()&&document.addEventListener("visibilitychange",_t,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",qe,!1),document.removeEventListener("visibilitychange",_t,!1),le&&window.clearTimeout(le)}})}finally{S()}})).apply(this,arguments)}function Bd(_){return lc.apply(this,arguments)}function lc(){return(lc=(0,m.Z)(function*(_){const h=Lo(_),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Lo(_){if(Q(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),p=new Uint8Array(h);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}!function Yy(_){(0,ce._registerComponent)(new de.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:O,authDomain:Z}=E.options;return((le,Fe)=>{K(O&&!O.includes(":"),"invalid-api-key",{appName:le.name}),K(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:le.name});const qe={apiKey:O,authDomain:Z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ta(_)},_t=new Ze(le,Fe,qe);return function ae(_,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(te);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(_t,p),_t})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new de.wA("auth-internal",h=>{const p=lt(h.getProvider("auth").getImmediate());return new Af(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Vd,"0.20.7",function _g(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ce.registerVersion)(Vd,"0.20.7","esm2017")}("Browser");class xf extends no{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function wn(_){return tl.apply(this,arguments)}function tl(){return(tl=(0,m.Z)(function*(_){const h=yield rl()._get(jd(_));return h&&(yield rl()._remove(jd(_))),h})).apply(this,arguments)}function nl(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function rl(){return te(Yt)}function jd(_){return Xn("authEvent",_.config.apiKey,_.name)}function Rn(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...p]=_.split("?");return(0,k.zd)(p.join("?"))}function Hd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function fc(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function r_(_=(0,k.z$)()){return!("file:"!==fc()&&"ionic:"!==fc()&&"capacitor:"!==fc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gd(){try{const _=self.localStorage,h=Gi();if(_)return _.setItem(h,"1"),_.removeItem(h),!function $d(_=(0,k.z$)()){return function Lr(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function pc(_=(0,k.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,k.hl)()}catch(_){return ir()&&(0,k.hl)()}return!1}function ir(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vo(){return(function n_(){return"http:"===fc()||"https:"===fc()}()||(0,k.ru)()||r_())&&!function sl(){return(0,k.b$)()||(0,k.UG)()}()&&Gd()&&!ir()}function qd(){return r_()&&"undefined"!=typeof document}function Rf(){return(Rf=(0,m.Z)(function*(){return!!qd()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const _r={LOCAL:"local",NONE:"none",SESSION:"session"},Uo=K,zd="persistence";function cu(_){return du.apply(this,arguments)}function du(){return(du=(0,m.Z)(function*(_){yield _._initializationPromise;const h=zn(),p=Xn(zd,_.config.apiKey,_.name);h&&h.setItem(p,_._getPersistence())})).apply(this,arguments)}function zn(){var _;try{return(null===(_=function gc(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const Ig=K;class uo{constructor(){this.browserResolver=te(class mg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=st,this._completeRedirectFn=bt,this._overrideRedirectResult=Od}_openPopup(h,p,E,S){var O=this;return(0,m.Z)(function*(){var Z;Q(null===(Z=O.eventManagers[h._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const le=bs(h,p,E,Ne(),S);return function pg(_,h,p,E=500,S=600){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Fe=Object.assign(Object.assign({},Ju),{width:E.toString(),height:S.toString(),top:O,left:Z}),qe=(0,k.z$)().toLowerCase();p&&(le=Na(qe)?"_blank":p),Oi(qe)&&(h=h||"http://localhost",Fe.scrollbars="yes");const _t=Object.entries(Fe).reduce((Un,[fi,wa])=>`${Un}${fi}=${wa},`,"");if(function yo(_=(0,k.z$)()){var h;return qr(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(qe)&&"_self"!==le)return function Df(_,h){const p=document.createElement("a");p.href=_,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",le),new ac(null);const ct=window.open(h||"",le,_t);K(ct,_,"popup-blocked");try{ct.focus()}catch(Un){}return new ac(ct)}(h,le,Gi())})()}_openRedirect(h,p,E,S){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(h),function Ks(_){Vt().location.href=_}(bs(h,p,E,Ne(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:O}=this.eventManagers[p];return S?Promise.resolve(S):(Q(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const E=yield function lu(_){return Qu.apply(this,arguments)}(h),S=new no(h);return E.register("authEvent",O=>(K(null==O?void 0:O.authEvent,h,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=E,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(kd,{type:kd},S=>{var O;const Z=null===(O=null==S?void 0:S[0])||void 0===O?void 0:O[kd];void 0!==Z&&p(!!Z),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function sc(_){return cg.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return js()||ea()||qr()}}),this.cordovaResolver=te(class hc{constructor(){this._redirectPersistence=st,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bt,this._overrideRedirectResult=Od}_initialize(h){var p=this;return(0,m.Z)(function*(){const E=h._key();let S=p.eventManagers.get(E);return S||(S=new xf(h),p.eventManagers.set(E,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,S){var O=this;return(0,m.Z)(function*(){!function Jy(_){var h,p,E,S,O,Z,le,Fe,qe,_t;const ct=io();K("function"==typeof(null===(h=null==ct?void 0:ct.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(void 0!==(null===(p=null==ct?void 0:ct.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(O=null===(S=null===(E=null==ct?void 0:ct.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===O?void 0:O.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(Fe=null===(le=null===(Z=null==ct?void 0:ct.cordova)||void 0===Z?void 0:Z.plugins)||void 0===le?void 0:le.browsertab)||void 0===Fe?void 0:Fe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(_t=null===(qe=null==ct?void 0:ct.cordova)||void 0===qe?void 0:qe.InAppBrowser)||void 0===_t?void 0:_t.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const Z=yield O._initialize(h);yield Z.initialized(),Z.resetRedirect(),function Rd(){ci.clear()}(),yield O._originValidation(h);const le=function cc(_,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:nl(),postBody:null,tenantId:_.tenantId,error:ve(_,"no-auth-event")}}(h,E,S);yield function Eg(_,h){return rl()._set(jd(_),h)}(h,le);const Fe=yield function Is(_,h,p){return so.apply(this,arguments)}(h,le,p),qe=yield function Ud(_){const{cordova:h}=io();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let S=null;E?h.plugins.browsertab.openUrl(_):S=h.InAppBrowser.open(_,function od(_=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(S)})})}(Fe);return function hE(_,h,p){return vg.apply(this,arguments)}(h,Z,qe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function el(_){return oo.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:S,BuildInfo:O}=io(),Z=setTimeout((0,m.Z)(function*(){yield wn(h),p.onEvent(Hd())}),500),le=function(){var _t=(0,m.Z)(function*(ct){clearTimeout(Z);const Un=yield wn(h);let fi=null;Un&&(null==ct?void 0:ct.url)&&(fi=function dc(_,h){var p,E;const S=function Xy(_){const h=Rn(_),p=h.link?decodeURIComponent(h.link):void 0,E=Rn(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Rn(S).link||S||E||p||_}(h);if(S.includes("/__/auth/callback")){const O=Rn(S),Z=O.firebaseError?function Mf(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(O.firebaseError)):null,le=null===(E=null===(p=null==Z?void 0:Z.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Fe=le?ve(le):null;return Fe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(Un,ct.url)),p.onEvent(fi||Hd())});return function(Un){return _t.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Fe=S,qe=`${O.packageName.toLowerCase()}://`;io().handleOpenURL=function(){var _t=(0,m.Z)(function*(ct){if(ct.toLowerCase().startsWith(qe)&&le({url:ct}),"function"==typeof Fe)try{Fe(ct)}catch(Un){console.error(Un)}});return function(ct){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=st,this._completeRedirectFn=bt,this._overrideRedirectResult=Od}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,S){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(h,p,E,S)})()}_openRedirect(h,p,E,S){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(h,p,E,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return qd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ig(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function i_(){return Rf.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Cg(_){return _.unwrap()}function mc(_){return Nf(_)}function Nf(_){const{_tokenResponse:h}=_ instanceof k.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Oo.credentialFromResult(_);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=gd;break;case"facebook.com":E=ia;break;case"github.com":E=ff;break;case"twitter.com":E=yd;break;default:const{oauthIdToken:S,oauthAccessToken:O,oauthTokenSecret:Z,pendingToken:le,nonce:Fe}=h;return O||Z||S||le?le?p.startsWith("saml.")?Eo._create(p,le):ms._fromParams({providerId:p,signInMethod:p,pendingToken:le,idToken:S,accessToken:O}):new Vi(p).credential({idToken:S,accessToken:O,rawNonce:Fe}):null}return _ instanceof k.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function vr(_,h){return h.catch(p=>{throw p instanceof k.ZR&&function Dg(_,h){var p,E;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=h)||void 0===E?void 0:E.code))h.resolver=new kf(_,function nr(_,h){var p;const E=(0,k.m9)(_),S=h;return K(h.customData.operationType,E,"argument-error"),K(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),ga._fromError(E,S)}(_,h));else if(S){const O=Nf(h),Z=h;O&&(Z.credential=O,Z.tenantId=S.tenantId||void 0,Z.email=S.email||void 0,Z.phoneNumber=S.phoneNumber||void 0)}}(_,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:mc(p),additionalUserInfo:$i(p),user:lo.getOrCreate(S)}})}function Wd(_,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,m.Z)(function*(_,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>vr(_,p.confirm(E))}})).apply(this,arguments)}class kf{constructor(h,p){this.resolver=p,this.auth=function s_(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return vr(Cg(this.auth),this.resolver.resolveSignIn(h))}}class lo{constructor(h){this._delegate=h,this.multiFactor=function ju(_){const h=(0,k.m9)(_);return Bu.has(h)||Bu.set(h,Id._fromUser(h)),Bu.get(h)}(h)}static getOrCreate(h){return lo.USER_MAP.has(h)||lo.USER_MAP.set(h,new lo(h)),lo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return vr(p.auth,lr(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,m.Z)(function*(){return Wd(E.auth,function tu(_,h,p){return zu.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return vr(p.auth,function xd(_,h,p){return Wu.apply(this,arguments)}(p._delegate,h,uo))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield cu(lt(p.auth)),function Y(_,h,p){return function X(_,h,p){return De.apply(this,arguments)}(_,h,p)}(p._delegate,h,uo)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return vr(p.auth,ys(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Wd(this.auth,function Pr(_,h,p){return Qr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return vr(this.auth,function lg(_,h,p){return iu.apply(this,arguments)}(this._delegate,h,uo))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield cu(lt(p.auth)),function D(_,h,p){return function R(_,h,p){return V.apply(this,arguments)}(_,h,p)}(p._delegate,h,uo)})()}sendEmailVerification(h){return function Jl(_,h){return Lu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function pf(_,h){return an.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ig(_,h){return ha((0,k.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function tc(_,h){return ha((0,k.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ro(_,h){return ya.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function ec(_,h){return Wa.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Xl(_,h,p){return Vu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}lo.USER_MAP=new WeakMap;const hu=K;let ol=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;hu(S,"invalid-api-key",{appName:p.name}),hu(S,"invalid-api-key",{appName:p.name});const O="undefined"!=typeof window?uo:void 0;this._delegate=E.initialize({options:{persistence:Lf(S,p.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?lo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function Wr(_,h,p){const E=lt(_);K(E._canInitEmulator,E,"emulator-config-failed"),K(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const S=!!(null==p?void 0:p.disableWarnings),O=Pi(h),{host:Z,port:le}=function qn(_){const h=Pi(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const O=S[1];return{host:O,port:Ni(E.substr(O.length+1))}}{const[O,Z]=E.split(":");return{host:O,port:Ni(Z)}}}(h);E.config.emulator={url:`${O}//${Z}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:le,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function gn(){function _(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function Se(_,h){return Lt.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Yl(this._delegate,p)}confirmPasswordReset(p,E){return function Kl(_,h,p){return Zl.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var S=this;return(0,m.Z)(function*(){return vr(S._delegate,function ui(_,h,p){return $a.apply(this,arguments)}(S._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Ws(_,h){return Ii.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Ga(_,h){const p=Ou.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){hu(Vo(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function $e(_,h){return pt.apply(this,arguments)}(p._delegate,uo);return E?vr(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function wg(_,h){lt(_)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,S){const{next:O,error:Z,complete:le}=Ff(p,E,S);return this._delegate.onAuthStateChanged(O,Z,le)}onIdTokenChanged(p,E,S){const{next:O,error:Z,complete:le}=Ff(p,E,S);return this._delegate.onIdTokenChanged(O,Z,le)}sendSignInLinkToEmail(p,E){return function rg(_,h,p){return ku.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function Wl(_,h,p){return Ha.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let S;switch(function Of(_,h){Uo(Object.values(_r).includes(h),_,"invalid-persistence-type"),(0,k.b$)()?Uo(h!==_r.SESSION,_,"unsupported-persistence-type"):(0,k.UG)()?Uo(h===_r.NONE,_,"unsupported-persistence-type"):ir()?Uo(h===_r.NONE||h===_r.LOCAL&&(0,k.hl)(),_,"unsupported-persistence-type"):Uo(h===_r.NONE||Gd(),_,"unsupported-persistence-type")}(E._delegate,p),p){case _r.SESSION:S=st;break;case _r.LOCAL:S=(yield te(zi)._isAvailable())?zi:Yt;break;case _r.NONE:S=qt;break;default:return xe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return vr(this._delegate,function _d(_){return Gl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return vr(this._delegate,Cn(this._delegate,p))}signInWithCustomToken(p){return vr(this._delegate,function ua(_,h){return yt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return vr(this._delegate,function Ql(_,h,p){return Cn((0,k.m9)(_),pd.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return vr(this._delegate,function Fu(_,h,p){return Vn.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Wd(this._delegate,function qu(_,h,p){return Xs.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return hu(Vo(),E._delegate,"operation-not-supported-in-this-environment"),vr(E._delegate,function eo(_,h,p){return ru.apply(this,arguments)}(E._delegate,p,uo))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return hu(Vo(),E._delegate,"operation-not-supported-in-this-environment"),yield cu(E._delegate),function ko(_,h,p){return function Pd(_,h,p){return C.apply(this,arguments)}(_,h,p)}(E._delegate,p,uo)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ca(_,h){return Io.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=_r,_})();function Ff(_,h,p){let E=_;"function"!=typeof _&&({next:E,error:h,complete:p}=_);const S=E;return{next:Z=>S(Z&&lo.getOrCreate(Z)),error:h,complete:p}}function Lf(_,h){const p=function Pf(_,h){const p=zn();if(!p)return[];const E=Xn(zd,_,h);switch(p.getItem(E)){case _r.NONE:return[qt];case _r.LOCAL:return[zi,st];case _r.SESSION:return[st];default:return[]}}(_,h);if("undefined"!=typeof self&&!p.includes(zi)&&p.push(zi),"undefined"!=typeof window)for(const E of[Yt,st])p.includes(E)||p.push(E);return p.includes(qt)||p.push(qt),p}class al{constructor(){this.providerId="phone",this._delegate=new Oo(Cg(ee.Z.auth()))}static credential(h,p){return Oo.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}al.PHONE_SIGN_IN_METHOD=Oo.PHONE_SIGN_IN_METHOD,al.PROVIDER_ID=Oo.PROVIDER_ID;const Tg=K;class Kd{constructor(h,p,E=ee.Z.app()){var S;Tg(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new xo(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ds(_){_.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new ol(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pd,FacebookAuthProvider:ia,GithubAuthProvider:ff,GoogleAuthProvider:gd,OAuthProvider:Vi,SAMLAuthProvider:Mr,PhoneAuthProvider:al,PhoneMultiFactorGenerator:yg,RecaptchaVerifier:Kd,TwitterAuthProvider:yd,Auth:ol,AuthCredential:wi,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.20")}(ee.Z)},8306:(tt,be,P)=>{P.d(be,{y:()=>H});var m=P(2961),ee=P(727),k=P(8822),ce=P(4671);var de=P(2416),ue=P(576),ge=P(2806);let H=(()=>{class Te{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const fe=new Te;return fe.source=this,fe.operator=Be,fe}subscribe(Be,fe,Ie){const Ke=function He(Te){return Te&&Te instanceof m.Lv||function ne(Te){return Te&&(0,ue.m)(Te.next)&&(0,ue.m)(Te.error)&&(0,ue.m)(Te.complete)}(Te)&&(0,ee.Nn)(Te)}(Be)?Be:new m.Hp(Be,fe,Ie);return(0,ge.x)(()=>{const{operator:et,source:xe}=this;Ke.add(et?et.call(Ke,xe):xe?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Be){try{return this._subscribe(Be)}catch(fe){Be.error(fe)}}forEach(Be,fe){return new(fe=q(fe))((Ie,Ke)=>{const et=new m.Hp({next:xe=>{try{Be(xe)}catch(ve){Ke(ve),et.unsubscribe()}},error:Ke,complete:Ie});this.subscribe(et)})}_subscribe(Be){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Be)}[k.L](){return this}pipe(...Be){return function pe(Te){return 0===Te.length?ce.y:1===Te.length?Te[0]:function(Be){return Te.reduce((fe,Ie)=>Ie(fe),Be)}}(Be)(this)}toPromise(Be){return new(Be=q(Be))((fe,Ie)=>{let Ke;this.subscribe(et=>Ke=et,et=>Ie(et),()=>fe(Ke))})}}return Te.create=Oe=>new Te(Oe),Te})();function q(Te){var Oe;return null!==(Oe=null!=Te?Te:de.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(tt,be,P)=>{P.d(be,{x:()=>de});var m=P(8306),ee=P(727);const ce=(0,P(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),pe=P(2806);let de=(()=>{class ge extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ne=new ue(this,this);return ne.operator=q,ne}_throwIfClosed(){if(this.closed)throw new ce}next(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(q)}})}error(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ne}=this;for(;ne.length;)ne.shift().error(q)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ne,isStopped:He,observers:Te}=this;return ne||He?ee.Lc:(this.currentObservers=null,Te.push(q),new ee.w0(()=>{this.currentObservers=null,(0,oe.P)(Te,q)}))}_checkFinalizedStatuses(q){const{hasError:ne,thrownError:He,isStopped:Te}=this;ne?q.error(He):Te&&q.complete()}asObservable(){const q=new m.y;return q.source=this,q}}return ge.create=(H,q)=>new ue(H,q),ge})();class ue extends de{constructor(H,q){super(),this.destination=H,this.source=q}next(H){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ne||ne.call(q,H)}error(H){var q,ne;null===(ne=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ne||ne.call(q,H)}complete(){var H,q;null===(q=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===q||q.call(H)}_subscribe(H){var q,ne;return null!==(ne=null===(q=this.source)||void 0===q?void 0:q.subscribe(H))&&void 0!==ne?ne:ee.Lc}}},2961:(tt,be,P)=>{P.d(be,{Hp:()=>Be,Lv:()=>ne});var m=P(576),ee=P(727),k=P(2416),ce=P(7849);function oe(){}const pe=ge("C",void 0,void 0);function ge(xe,ve,Ce){return{kind:xe,value:ve,error:Ce}}var H=P(3410),q=P(2806);class ne extends ee.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,ee.Nn)(ve)&&ve.add(this)):this.destination=et}static create(ve,Ce,Ue){return new Be(ve,Ce,Ue)}next(ve){this.isStopped?Ke(function ue(xe){return ge("N",xe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ke(function de(xe){return ge("E",void 0,xe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ke(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(xe,ve){return He.call(xe,ve)}class Oe{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(ve)}catch(Ue){fe(Ue)}}error(ve){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(ve)}catch(Ue){fe(Ue)}else fe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ce){fe(Ce)}}}class Be extends ne{constructor(ve,Ce,Ue){let je;if(super(),(0,m.m)(ve)||!ve)je={next:null!=ve?ve:void 0,error:null!=Ce?Ce:void 0,complete:null!=Ue?Ue:void 0};else{let K;this&&k.v.useDeprecatedNextContext?(K=Object.create(ve),K.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Te(ve.next,K),error:ve.error&&Te(ve.error,K),complete:ve.complete&&Te(ve.complete,K)}):je=ve}this.destination=new Oe(je)}}function fe(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(xe):(0,ce.h)(xe)}function Ke(xe,ve){const{onStoppedNotification:Ce}=k.v;Ce&&H.z.setTimeout(()=>Ce(xe,ve))}const et={closed:!0,next:oe,error:function Ie(xe){throw xe},complete:oe}},727:(tt,be,P)=>{P.d(be,{Lc:()=>pe,w0:()=>oe,Nn:()=>de});var m=P(576);const k=(0,P(3888).d)(ge=>function(q){ge(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ne,He)=>`${He+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ce=P(8737);class oe{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Te of q)Te.remove(this);else q.remove(this);const{initialTeardown:ne}=this;if((0,m.m)(ne))try{ne()}catch(Te){H=Te instanceof k?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{ue(Te)}catch(Oe){H=null!=H?H:[],Oe instanceof k?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new k(H)}}add(H){var q;if(H&&H!==this)if(this.closed)ue(H);else{if(H instanceof oe){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(H)}}_hasParent(H){const{_parentage:q}=this;return q===H||Array.isArray(q)&&q.includes(H)}_addParent(H){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(H),q):q?[q,H]:H}_removeParent(H){const{_parentage:q}=this;q===H?this._parentage=null:Array.isArray(q)&&(0,ce.P)(q,H)}remove(H){const{_finalizers:q}=this;q&&(0,ce.P)(q,H),H instanceof oe&&H._removeParent(this)}}oe.EMPTY=(()=>{const ge=new oe;return ge.closed=!0,ge})();const pe=oe.EMPTY;function de(ge){return ge instanceof oe||ge&&"closed"in ge&&(0,m.m)(ge.remove)&&(0,m.m)(ge.add)&&(0,m.m)(ge.unsubscribe)}function ue(ge){(0,m.m)(ge)?ge():ge.unsubscribe()}},2416:(tt,be,P)=>{P.d(be,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,be,P)=>{P.d(be,{E:()=>ee});const ee=new(P(8306).y)(oe=>oe.complete())},8996:(tt,be,P)=>{P.d(be,{D:()=>ve});var m=P(8421),ee=P(5363),k=P(9468),pe=P(8306),ue=P(2202),ge=P(576),H=P(9672);function ne(Ce,Ue){if(!Ce)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,H.f)(je,Ue,()=>{const K=Ce[Symbol.asyncIterator]();(0,H.f)(je,Ue,()=>{K.next().then(we=>{we.done?je.complete():je.next(we.value)})},0,!0)})})}var He=P(3670),Te=P(8239),Oe=P(1144),Be=P(6495),fe=P(2206),Ie=P(4532),Ke=P(3260);function ve(Ce,Ue){return Ue?function xe(Ce,Ue){if(null!=Ce){if((0,He.c)(Ce))return function ce(Ce,Ue){return(0,m.Xf)(Ce).pipe((0,k.R)(Ue),(0,ee.Q)(Ue))}(Ce,Ue);if((0,Oe.z)(Ce))return function de(Ce,Ue){return new pe.y(je=>{let K=0;return Ue.schedule(function(){K===Ce.length?je.complete():(je.next(Ce[K++]),je.closed||this.schedule())})})}(Ce,Ue);if((0,Te.t)(Ce))return function oe(Ce,Ue){return(0,m.Xf)(Ce).pipe((0,k.R)(Ue),(0,ee.Q)(Ue))}(Ce,Ue);if((0,fe.D)(Ce))return ne(Ce,Ue);if((0,Be.T)(Ce))return function q(Ce,Ue){return new pe.y(je=>{let K;return(0,H.f)(je,Ue,()=>{K=Ce[ue.h](),(0,H.f)(je,Ue,()=>{let we,Q;try{({value:we,done:Q}=K.next())}catch(ie){return void je.error(ie)}Q?je.complete():je.next(we)},0,!0)}),()=>(0,ge.m)(null==K?void 0:K.return)&&K.return()})}(Ce,Ue);if((0,Ke.L)(Ce))return function et(Ce,Ue){return ne((0,Ke.Q)(Ce),Ue)}(Ce,Ue)}throw(0,Ie.z)(Ce)}(Ce,Ue):(0,m.Xf)(Ce)}},8421:(tt,be,P)=>{P.d(be,{Xf:()=>He});var m=P(655),ee=P(1144),k=P(8239),ce=P(8306),oe=P(3670),pe=P(2206),de=P(4532),ue=P(6495),ge=P(3260),H=P(576),q=P(7849),ne=P(8822);function He(xe){if(xe instanceof ce.y)return xe;if(null!=xe){if((0,oe.c)(xe))return function Te(xe){return new ce.y(ve=>{const Ce=xe[ne.L]();if((0,H.m)(Ce.subscribe))return Ce.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ee.z)(xe))return function Oe(xe){return new ce.y(ve=>{for(let Ce=0;Ce<xe.length&&!ve.closed;Ce++)ve.next(xe[Ce]);ve.complete()})}(xe);if((0,k.t)(xe))return function Be(xe){return new ce.y(ve=>{xe.then(Ce=>{ve.closed||(ve.next(Ce),ve.complete())},Ce=>ve.error(Ce)).then(null,q.h)})}(xe);if((0,pe.D)(xe))return Ie(xe);if((0,ue.T)(xe))return function fe(xe){return new ce.y(ve=>{for(const Ce of xe)if(ve.next(Ce),ve.closed)return;ve.complete()})}(xe);if((0,ge.L)(xe))return function Ke(xe){return Ie((0,ge.Q)(xe))}(xe)}throw(0,de.z)(xe)}function Ie(xe){return new ce.y(ve=>{(function et(xe,ve){var Ce,Ue,je,K;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,m.KL)(xe);!(Ue=yield Ce.next()).done;)if(ve.next(Ue.value),ve.closed)return}catch(we){je={error:we}}finally{try{Ue&&!Ue.done&&(K=Ce.return)&&(yield K.call(Ce))}finally{if(je)throw je.error}}ve.complete()})})(xe,ve).catch(Ce=>ve.error(Ce))})}},6451:(tt,be,P)=>{P.d(be,{T:()=>pe});var m=P(8189),ee=P(8421),k=P(515),ce=P(7669),oe=P(8996);function pe(...de){const ue=(0,ce.yG)(de),ge=(0,ce._6)(de,1/0),H=de;return H.length?1===H.length?(0,ee.Xf)(H[0]):(0,m.J)(ge)((0,oe.D)(H,ue)):k.E}},5403:(tt,be,P)=>{P.d(be,{x:()=>ee});var m=P(2961);function ee(ce,oe,pe,de,ue){return new k(ce,oe,pe,de,ue)}class k extends m.Lv{constructor(oe,pe,de,ue,ge,H){super(oe),this.onFinalize=ge,this.shouldUnsubscribe=H,this._next=pe?function(q){try{pe(q)}catch(ne){oe.error(ne)}}:super._next,this._error=ue?function(q){try{ue(q)}catch(ne){oe.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(q){oe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(tt,be,P)=>{P.d(be,{U:()=>k});var m=P(4482),ee=P(5403);function k(ce,oe){return(0,m.e)((pe,de)=>{let ue=0;pe.subscribe((0,ee.x)(de,ge=>{de.next(ce.call(oe,ge,ue++))}))})}},8189:(tt,be,P)=>{P.d(be,{J:()=>k});var m=P(5577),ee=P(4671);function k(ce=1/0){return(0,m.z)(ee.y,ce)}},5577:(tt,be,P)=>{P.d(be,{z:()=>ue});var m=P(4004),ee=P(8421),k=P(4482),ce=P(9672),oe=P(5403),de=P(576);function ue(ge,H,q=1/0){return(0,de.m)(H)?ue((ne,He)=>(0,m.U)((Te,Oe)=>H(ne,Te,He,Oe))((0,ee.Xf)(ge(ne,He))),q):("number"==typeof H&&(q=H),(0,k.e)((ne,He)=>function pe(ge,H,q,ne,He,Te,Oe,Be){const fe=[];let Ie=0,Ke=0,et=!1;const xe=()=>{et&&!fe.length&&!Ie&&H.complete()},ve=Ue=>Ie<ne?Ce(Ue):fe.push(Ue),Ce=Ue=>{Te&&H.next(Ue),Ie++;let je=!1;(0,ee.Xf)(q(Ue,Ke++)).subscribe((0,oe.x)(H,K=>{null==He||He(K),Te?ve(K):H.next(K)},()=>{je=!0},void 0,()=>{if(je)try{for(Ie--;fe.length&&Ie<ne;){const K=fe.shift();Oe?(0,ce.f)(H,Oe,()=>Ce(K)):Ce(K)}xe()}catch(K){H.error(K)}}))};return ge.subscribe((0,oe.x)(H,ve,()=>{et=!0,xe()})),()=>{null==Be||Be()}}(ne,He,ge,q)))}},5363:(tt,be,P)=>{P.d(be,{Q:()=>ce});var m=P(9672),ee=P(4482),k=P(5403);function ce(oe,pe=0){return(0,ee.e)((de,ue)=>{de.subscribe((0,k.x)(ue,ge=>(0,m.f)(ue,oe,()=>ue.next(ge),pe),()=>(0,m.f)(ue,oe,()=>ue.complete(),pe),ge=>(0,m.f)(ue,oe,()=>ue.error(ge),pe)))})}},3099:(tt,be,P)=>{P.d(be,{B:()=>oe});var m=P(8421),ee=P(7579),k=P(2961),ce=P(4482);function oe(de={}){const{connector:ue=(()=>new ee.x),resetOnError:ge=!0,resetOnComplete:H=!0,resetOnRefCountZero:q=!0}=de;return ne=>{let He,Te,Oe,Be=0,fe=!1,Ie=!1;const Ke=()=>{null==Te||Te.unsubscribe(),Te=void 0},et=()=>{Ke(),He=Oe=void 0,fe=Ie=!1},xe=()=>{const ve=He;et(),null==ve||ve.unsubscribe()};return(0,ce.e)((ve,Ce)=>{Be++,!Ie&&!fe&&Ke();const Ue=Oe=null!=Oe?Oe:ue();Ce.add(()=>{Be--,0===Be&&!Ie&&!fe&&(Te=pe(xe,q))}),Ue.subscribe(Ce),!He&&Be>0&&(He=new k.Hp({next:je=>Ue.next(je),error:je=>{Ie=!0,Ke(),Te=pe(et,ge,je),Ue.error(je)},complete:()=>{fe=!0,Ke(),Te=pe(et,H),Ue.complete()}}),(0,m.Xf)(ve).subscribe(He))})(ne)}}function pe(de,ue,...ge){if(!0===ue)return void de();if(!1===ue)return;const H=new k.Hp({next:()=>{H.unsubscribe(),de()}});return ue(...ge).subscribe(H)}},9468:(tt,be,P)=>{P.d(be,{R:()=>ee});var m=P(4482);function ee(k,ce=0){return(0,m.e)((oe,pe)=>{pe.add(k.schedule(()=>oe.subscribe(pe),ce))})}},8505:(tt,be,P)=>{P.d(be,{b:()=>oe});var m=P(576),ee=P(4482),k=P(5403),ce=P(4671);function oe(pe,de,ue){const ge=(0,m.m)(pe)||de||ue?{next:pe,error:de,complete:ue}:pe;return ge?(0,ee.e)((H,q)=>{var ne;null===(ne=ge.subscribe)||void 0===ne||ne.call(ge);let He=!0;H.subscribe((0,k.x)(q,Te=>{var Oe;null===(Oe=ge.next)||void 0===Oe||Oe.call(ge,Te),q.next(Te)},()=>{var Te;He=!1,null===(Te=ge.complete)||void 0===Te||Te.call(ge),q.complete()},Te=>{var Oe;He=!1,null===(Oe=ge.error)||void 0===Oe||Oe.call(ge,Te),q.error(Te)},()=>{var Te,Oe;He&&(null===(Te=ge.unsubscribe)||void 0===Te||Te.call(ge)),null===(Oe=ge.finalize)||void 0===Oe||Oe.call(ge)}))}):ce.y}},4408:(tt,be,P)=>{P.d(be,{o:()=>oe});var m=P(727);class ee extends m.w0{constructor(de,ue){super()}schedule(de,ue=0){return this}}const k={setInterval(pe,de,...ue){const{delegate:ge}=k;return(null==ge?void 0:ge.setInterval)?ge.setInterval(pe,de,...ue):setInterval(pe,de,...ue)},clearInterval(pe){const{delegate:de}=k;return((null==de?void 0:de.clearInterval)||clearInterval)(pe)},delegate:void 0};var ce=P(8737);class oe extends ee{constructor(de,ue){super(de,ue),this.scheduler=de,this.work=ue,this.pending=!1}schedule(de,ue=0){if(this.closed)return this;this.state=de;const ge=this.id,H=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(H,ge,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(H,this.id,ue),this}requestAsyncId(de,ue,ge=0){return k.setInterval(de.flush.bind(de,this),ge)}recycleAsyncId(de,ue,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ue;k.clearInterval(ue)}execute(de,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(de,ue);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ue){let H,ge=!1;try{this.work(de)}catch(q){ge=!0,H=q||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:de,scheduler:ue}=this,{actions:ge}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(ge,this),null!=de&&(this.id=this.recycleAsyncId(ue,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,be,P)=>{P.d(be,{v:()=>k});var m=P(6063);class ee{constructor(oe,pe=ee.now){this.schedulerActionCtor=oe,this.now=pe}schedule(oe,pe=0,de){return new this.schedulerActionCtor(this,oe).schedule(de,pe)}}ee.now=m.l.now;class k extends ee{constructor(oe,pe=ee.now){super(oe,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:pe}=this;if(this._active)return void pe.push(oe);let de;this._active=!0;do{if(de=oe.execute(oe.state,oe.delay))break}while(oe=pe.shift());if(this._active=!1,de){for(;oe=pe.shift();)oe.unsubscribe();throw de}}}},4986:(tt,be,P)=>{P.d(be,{z:()=>k});var m=P(4408);const k=new(P(7565).v)(m.o)},6063:(tt,be,P)=>{P.d(be,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(tt,be,P)=>{P.d(be,{z:()=>m});const m={setTimeout(ee,k,...ce){const{delegate:oe}=m;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(ee,k,...ce):setTimeout(ee,k,...ce)},clearTimeout(ee){const{delegate:k}=m;return((null==k?void 0:k.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(tt,be,P)=>{P.d(be,{h:()=>ee});const ee=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,be,P)=>{P.d(be,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,be,P)=>{P.d(be,{_6:()=>pe,jO:()=>ce,yG:()=>oe});var m=P(576);function k(de){return de[de.length-1]}function ce(de){return(0,m.m)(k(de))?de.pop():void 0}function oe(de){return function ee(de){return de&&(0,m.m)(de.schedule)}(k(de))?de.pop():void 0}function pe(de,ue){return"number"==typeof k(de)?de.pop():ue}},8737:(tt,be,P)=>{function m(ee,k){if(ee){const ce=ee.indexOf(k);0<=ce&&ee.splice(ce,1)}}P.d(be,{P:()=>m})},3888:(tt,be,P)=>{function m(ee){const ce=ee(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}P.d(be,{d:()=>m})},2806:(tt,be,P)=>{P.d(be,{x:()=>k,O:()=>ce});var m=P(2416);let ee=null;function k(oe){if(m.v.useDeprecatedSynchronousErrorHandling){const pe=!ee;if(pe&&(ee={errorThrown:!1,error:null}),oe(),pe){const{errorThrown:de,error:ue}=ee;if(ee=null,de)throw ue}}else oe()}function ce(oe){m.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=oe)}},9672:(tt,be,P)=>{function m(ee,k,ce,oe=0,pe=!1){const de=k.schedule(function(){ce(),pe?ee.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(ee.add(de),!pe)return de}P.d(be,{f:()=>m})},4671:(tt,be,P)=>{function m(ee){return ee}P.d(be,{y:()=>m})},1144:(tt,be,P)=>{P.d(be,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(tt,be,P)=>{P.d(be,{D:()=>ee});var m=P(576);function ee(k){return Symbol.asyncIterator&&(0,m.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(tt,be,P)=>{function m(ee){return"function"==typeof ee}P.d(be,{m:()=>m})},3670:(tt,be,P)=>{P.d(be,{c:()=>k});var m=P(8822),ee=P(576);function k(ce){return(0,ee.m)(ce[m.L])}},6495:(tt,be,P)=>{P.d(be,{T:()=>k});var m=P(2202),ee=P(576);function k(ce){return(0,ee.m)(null==ce?void 0:ce[m.h])}},8239:(tt,be,P)=>{P.d(be,{t:()=>ee});var m=P(576);function ee(k){return(0,m.m)(null==k?void 0:k.then)}},3260:(tt,be,P)=>{P.d(be,{Q:()=>k,L:()=>ce});var m=P(655),ee=P(576);function k(oe){return(0,m.FC)(this,arguments,function*(){const de=oe.getReader();try{for(;;){const{value:ue,done:ge}=yield(0,m.qq)(de.read());if(ge)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(ue)}}finally{de.releaseLock()}})}function ce(oe){return(0,ee.m)(null==oe?void 0:oe.getReader)}},4482:(tt,be,P)=>{P.d(be,{A:()=>ee,e:()=>k});var m=P(576);function ee(ce){return(0,m.m)(null==ce?void 0:ce.lift)}function k(ce){return oe=>{if(ee(oe))return oe.lift(function(pe){try{return ce(pe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(tt,be,P)=>{P.d(be,{h:()=>k});var m=P(2416),ee=P(3410);function k(ce){ee.z.setTimeout(()=>{const{onUnhandledError:oe}=m.v;if(!oe)throw ce;oe(ce)})}},4532:(tt,be,P)=>{function m(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(be,{z:()=>m})},655:(tt,be,P)=>{function ce(Q,ie){var te={};for(var ye in Q)Object.prototype.hasOwnProperty.call(Q,ye)&&ie.indexOf(ye)<0&&(te[ye]=Q[ye]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ye=Object.getOwnPropertySymbols(Q);ae<ye.length;ae++)ie.indexOf(ye[ae])<0&&Object.prototype.propertyIsEnumerable.call(Q,ye[ae])&&(te[ye[ae]]=Q[ye[ae]])}return te}function ue(Q,ie,te,ye){return new(te||(te=Promise))(function(Ne,ht){function $t(rn){try{Je(ye.next(rn))}catch(Nn){ht(Nn)}}function Bt(rn){try{Je(ye.throw(rn))}catch(Nn){ht(Nn)}}function Je(rn){rn.done?Ne(rn.value):function ae(Ne){return Ne instanceof te?Ne:new te(function(ht){ht(Ne)})}(rn.value).then($t,Bt)}Je((ye=ye.apply(Q,ie||[])).next())})}function fe(Q){return this instanceof fe?(this.v=Q,this):new fe(Q)}function Ie(Q,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ye=te.apply(Q,ie||[]),Ne=[];return ae={},ht("next"),ht("throw"),ht("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ht(ln){ye[ln]&&(ae[ln]=function(tn){return new Promise(function(Sr,Kt){Ne.push([ln,tn,Sr,Kt])>1||$t(ln,tn)})})}function $t(ln,tn){try{!function Bt(ln){ln.value instanceof fe?Promise.resolve(ln.value.v).then(Je,rn):Nn(Ne[0][2],ln)}(ye[ln](tn))}catch(Sr){Nn(Ne[0][3],Sr)}}function Je(ln){$t("next",ln)}function rn(ln){$t("throw",ln)}function Nn(ln,tn){ln(tn),Ne.shift(),Ne.length&&$t(Ne[0][0],Ne[0][1])}}function et(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=Q[Symbol.asyncIterator];return ie?ie.call(Q):(Q=function ne(Q){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&Q[ie],ye=0;if(te)return te.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ye>=Q.length&&(Q=void 0),{value:Q&&Q[ye++],done:!Q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),te={},ye("next"),ye("throw"),ye("return"),te[Symbol.asyncIterator]=function(){return this},te);function ye(Ne){te[Ne]=Q[Ne]&&function(ht){return new Promise(function($t,Bt){!function ae(Ne,ht,$t,Bt){Promise.resolve(Bt).then(function(Je){Ne({value:Je,done:$t})},ht)}($t,Bt,(ht=Q[Ne](ht)).done,ht.value)})}}}P.d(be,{_T:()=>ce,mG:()=>ue,qq:()=>fe,FC:()=>Ie,KL:()=>et})},5e3:(tt,be,P)=>{P.d(be,{deG:()=>nc,tb:()=>Mp,AFp:()=>$b,ip1:()=>wy,CZH:()=>Tu,hGG:()=>OT,z2F:()=>Cy,sBO:()=>T0,Sil:()=>Kb,_Vd:()=>iy,EJc:()=>Wb,SBq:()=>jc,qLn:()=>mc,vpe:()=>mi,tBr:()=>bt,XFs:()=>Et,OlP:()=>En,zs3:()=>ss,ZZ4:()=>N0,aQg:()=>k0,soG:()=>E0,YKP:()=>LD,h0i:()=>vp,PXZ:()=>tI,R0b:()=>Os,FiY:()=>At,Lbi:()=>xp,g9A:()=>qb,Qsj:()=>sy,FYo:()=>Yv,JOm:()=>S,tp0:()=>An,Rgc:()=>Gc,dDg:()=>Jb,q4F:()=>pb,GfV:()=>zh,s_b:()=>Ip,ifc:()=>Gt,eFA:()=>nI,G48:()=>oI,Gpc:()=>q,X6Q:()=>Dy,_c5:()=>RT,VLi:()=>qA,c2e:()=>zb,zSh:()=>x_,wAp:()=>dt,vHH:()=>Oe,cg1:()=>Lm,kL8:()=>Vm,dqk:()=>jt,sIi:()=>ep,CqO:()=>dw,QGY:()=>xh,F4k:()=>Y_,RDi:()=>ql,AaK:()=>ue,qOj:()=>nm,TTD:()=>Vi,_Bn:()=>cb,xp6:()=>h_,uIk:()=>V_,ekj:()=>Oh,Suo:()=>u0,Xpm:()=>Ve,lG2:()=>ea,Yz7:()=>tn,cJS:()=>Kt,oAB:()=>Ft,Yjl:()=>Na,Y36:()=>Ah,_UZ:()=>Em,qZA:()=>vu,TgZ:()=>vm,n5z:()=>Ki,LFG:()=>D,$8M:()=>Gu,$Z:()=>_u,NdJ:()=>wm,CRH:()=>xb,oxw:()=>Q_,Q6J:()=>Sl,s9C:()=>J_,iGM:()=>Ab,LSH:()=>ao,YNc:()=>lm,_uU:()=>uv,Oqu:()=>Nh});var m=P(7579),ee=P(727),k=P(8306),ce=P(6451),oe=P(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=pe({__forward_ref__:pe});function q(s){return s.__forward_ref__=q,s.toString=function(){return ue(this())},s}function ne(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===q}class Oe extends Error{constructor(o,a){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function ve(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ie(s)} found${a}`)}function Bt(s,o){null==s&&function Je(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ut(s){return hs(s,xi)||hs(s,$r)}function hs(s,o){return s.hasOwnProperty(o)?s[o]:null}function Hr(s){return s&&(s.hasOwnProperty(Vs)||s.hasOwnProperty(Mi))?s[Vs]:null}const xi=pe({\u0275prov:pe}),Vs=pe({\u0275inj:pe}),$r=pe({ngInjectableDef:pe}),Mi=pe({ngInjectorDef:pe});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let Gr;function Kn(s){const o=Gr;return Gr=s,o}function Ri(s,o,a){const l=Ut(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Et.Optional?null:void 0!==o?o:void ve(ue(s),"Injector")}function Fn(s){return{toString:s}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=ot||"undefined"!=typeof global&&global||It||pr,Ar={},ft=[],Bs=pe({\u0275cmp:pe}),j=pe({\u0275dir:pe}),W=pe({\u0275pipe:pe}),U=pe({\u0275mod:pe}),$=pe({\u0275fac:pe}),z=pe({__NG_ELEMENT_ID__:pe});let Ae=0;function Ve(s){return Fn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=Ae++,l.inputs=Oi(s.inputs,a),l.outputs=Oi(s.outputs),g&&g.forEach(b=>b(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(sn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(qt):null,l})}function sn(s){return Zn(s)||function xr(s){return s[j]||null}(s)}function qt(s){return function ps(s){return s[W]||null}(s)}const Xn={};function Ft(s){return Fn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Xn[s.id]=s.type),o})}function Oi(s,o){if(null==s)return Ar;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const ea=Ve;function Na(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zn(s){return s[Bs]||null}function Yn(s,o){const a=s[U]||null;if(!a&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return a}function Kr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ki(s){return Array.isArray(s)&&!0===s[1]}function Ru(s){return 0!=(8&s.flags)}function ad(s){return 2==(2&s.flags)}function Fi(s){return 1==(1&s.flags)}function Li(s){return null!==s.template}function jl(s){return 0!=(512&s[2])}function yr(s,o){return s.hasOwnProperty($)?s[$]:null}class vo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Vi(){return ia}function ia(s){return s.type.prototype.ngOnChanges&&(s.setInput=ff),gd}function gd(){const s=Eo(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Ar)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function ff(s,o,a,l){const d=Eo(s)||function sa(s,o){return s[md]=o}(s,{previous:Ar,current:null}),g=d.current||(d.current={}),v=d.previous,b=this.declaredInputs[a],I=v[b];g[b]=new vo(I&&I.currentValue,o,v===Ar),s[l]=o}Vi.ngInherit=!0;const md="__ngSimpleChanges__";function Eo(s){return s[md]||null}let aa;function ql(s){aa=s}function an(s){return!!s.listen}const Va={createRenderer:(s,o)=>function Ui(){return void 0!==aa?aa:"undefined"!=typeof document?document:void 0}()};function nn(s){for(;Array.isArray(s);)s=s[0];return s}function zs(s,o){return nn(o[s])}function ur(s,o){return nn(o[s.index])}function Cn(s,o){return s.data[o]}function lr(s,o){const a=o[s];return Kr(a)?a:a[0]}function bo(s){return 4==(4&s[2])}function ys(s){return 128==(128&s[2])}function bi(s,o){return null==o?null:s[o]}function ji(s){s[18]=0}function ua(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const yt={lFrame:vd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ha(){return yt.bindingsEnabled}function Se(){return yt.lFrame.lView}function Lt(){return yt.lFrame.tView}function mn(){let s=ca();for(;null!==s&&64===s.type;)s=s.parent;return s}function ca(){return yt.lFrame.currentTNode}function ui(s,o){const a=yt.lFrame;a.currentTNode=s,a.isParent=o}function $a(){return yt.lFrame.isParent}function Ga(){return yt.isInCheckNoChangesMode}function Fu(s){yt.isInCheckNoChangesMode=s}function Ws(){return yt.lFrame.bindingIndex++}function Xl(s,o){const a=yt.lFrame;a.bindingIndex=a.bindingRootIndex=s,za(o)}function za(s){yt.lFrame.currentDirectiveIndex=s}function ec(){return yt.lFrame.currentQueryIndex}function Wa(s){yt.lFrame.currentQueryIndex=s}function ig(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function tc(s,o,a){if(a&Et.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&Et.Host||(d=ig(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=yt.lFrame=Ka();return l.currentTNode=o,l.lView=s,!0}function ha(s){const o=Ka(),a=s[1];yt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ka(){const s=yt.lFrame,o=null===s?null:s.child;return null===o?vd(s):o}function vd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function fa(){const s=yt.lFrame;return yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ed=fa;function pa(){const s=fa();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function tr(){return yt.lFrame.selectedIndex}function $i(s){yt.lFrame.selectedIndex=s}function Mn(){const s=yt.lFrame;return Cn(s.tView,s.selectedIndex)}function bd(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),b&&((s.contentHooks||(s.contentHooks=[])).push(a,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,b)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(a,M)}}function Za(s,o,a){nr(s,o,3,a)}function vs(s,o,a,l){(3&s[2])===a&&nr(s,o,a,l)}function ga(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function nr(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let b=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(b=o[I],null!=l&&b>=l)break}else o[I]<0&&(s[18]+=65536),(b<g||-1==g)&&(yf(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function yf(s,o,a,l){const d=a[l]<0,g=a[l+1],b=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(b)}finally{}}}else try{g.call(b)}finally{}}class Uu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function fn(s,o,a){const l=an(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],b=a[d++],I=a[d++];l?s.setAttribute(o,b,I,v):o.setAttributeNS(v,b,I)}else{const v=g,b=a[++d];To(v)?l&&s.setProperty(o,v,b):l?s.setAttribute(o,v,b):o.setAttribute(v,b),d++}}return d}function Yt(s){return 3===s||4===s||6===s}function To(s){return 64===s.charCodeAt(0)}function st(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||pn(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function pn(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const b=s[g++];if("number"==typeof b){if(b===o){v=-1;break}if(b>o){v=g-1;break}}}for(;g<s.length;){const b=s[g];if("number"==typeof b)break;if(b===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Ya(s){return-1!==s}function Gi(s){return 32767&s}function Vt(s,o){let a=function Qa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Ks=!0;function Dn(s){const o=Ks;return Ks=s,o}let Ja=0;function Xa(s,o){const a=Zr(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Ys(l.data,s),Ys(o,null),Ys(l.blueprint,null));const d=yn(s,o),g=s.injectorIndex;if(Ya(d)){const v=Gi(d),b=Vt(d,o),I=b[1].data;for(let A=0;A<8;A++)o[g+A]=b[v+A]|I[v+A]}return o[g+8]=d,g}function Ys(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Zr(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function yn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ma(s,o,a){!function Zs(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(z)&&(l=a[z]),null==l&&(l=a[z]=Ja++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Or(s,o,a){if(a&Et.Optional)return s;ve(o,"NodeInjector")}function qi(s,o,a,l){if(a&Et.Optional&&void 0===l&&(l=null),0==(a&(Et.Self|Et.Host))){const d=s[9],g=Kn(void 0);try{return d?d.get(o,l,a&Et.Optional):Ri(o,l,a&Et.Optional)}finally{Kn(g)}}return Or(l,o,a)}function Ci(s,o,a,l=Et.Default,d){if(null!==s){const g=function St(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(z)?s[z]:void 0;return"number"==typeof o?o>=0?255&o:eu:o}(a);if("function"==typeof g){if(!tc(o,s,l))return l&Et.Host?Or(d,a,l):qi(o,a,l,d);try{const v=g(l);if(null!=v||l&Et.Optional)return v;ve(a)}finally{Ed()}}else if("number"==typeof g){let v=null,b=Zr(s,o),I=-1,A=l&Et.Host?o[16][6]:null;for((-1===b||l&Et.SkipSelf)&&(I=-1===b?yn(s,o):o[b+8],-1!==I&&Ao(l,!1)?(v=o[1],b=Gi(I),o=Vt(I,o)):b=-1);-1!==b;){const M=o[1];if(zi(g,b,M.data)){const F=Di(b,o,a,v,l,A);if(F!==xt)return F}I=o[b+8],-1!==I&&Ao(l,o[1].data[b+8]===A)&&zi(g,b,o)?(v=M,b=Gi(I),o=Vt(I,o)):b=-1}}}return qi(o,a,l,d)}const xt={};function eu(){return new Wi(mn(),Se())}function Di(s,o,a,l,d,g){const v=o[1],b=v.data[s+8],M=rt(b,v,a,null==l?ad(b)&&Ks:l!=v&&0!=(3&b.type),d&Et.Host&&g===b);return null!==M?So(o,v,M,b):xt}function rt(s,o,a,l,d){const g=s.providerIndexes,v=o.data,b=1048575&g,I=s.directiveStart,M=g>>20,G=d?b+M:s.directiveEnd;for(let J=l?b:b+M;J<G;J++){const Ee=v[J];if(J<I&&a===Ee||J>=I&&Ee.type===a)return J}if(d){const J=v[I];if(J&&Li(J)&&J.type===a)return I}return null}function So(s,o,a,l){let d=s[a];const g=o.data;if(function Id(s){return s instanceof Uu}(d)){const v=d;v.resolving&&function Ke(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ie(g[a]));const b=Dn(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Kn(v.injectImpl):null;tc(s,l,Et.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function sg(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=ia(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==I&&Kn(I),Dn(b),v.resolving=!1,Ed()}}return d}function zi(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ao(s,o){return!(s&Et.Self||s&Et.Host&&o)}class Wi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Ci(this._tNode,this._lView,o,l,a)}}function Ki(s){return Fn(()=>{const o=s.prototype.constructor,a=o[$]||Qs(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[$]||Qs(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Qs(s){return He(s)?()=>{const o=Qs(ne(s));return o&&o()}:yr(s)}function Gu(s){return function $u(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(Yt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(mn(),s)}const Js="__parameters__";function li(s,o,a){return Fn(()=>{const l=function _n(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return b.annotation=v,b;function b(I,A,M){const F=I.hasOwnProperty(Js)?I[Js]:Object.defineProperty(I,Js,{value:[]})[Js];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=tn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nc=new En("AnalyzeForEntryComponents");function Pr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Pr(l,o)):o!==s&&o.push(l)}return o}function Qr(s,o){s.forEach(a=>Array.isArray(a)?Qr(a,o):o(a))}function nu(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Mo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function cr(s,o,a){let l=Jr(s,o);return l>=0?s[1|l]=a:(l=~l,function Yi(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Po(s,o){const a=Jr(s,o);if(a>=0)return s[1|a]}function Jr(s,o){return function eo(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const No={},Xr="__NG_DI_FLAG__",to="ngTempTokenPath",Rd=/\n/gm,ou="__source",rc=pe({provide:String,useValue:pe});let ko;function Pd(s){const o=ko;return ko=s,o}function C(s,o=Et.Default){if(void 0===ko)throw new Oe(203,"");return null===ko?Ri(s,void 0,o):ko.get(s,o&Et.Optional?null:void 0,o)}function D(s,o=Et.Default){return(function kn(){return Gr}()||C)(ne(s),o)}const V=D;function Y(s){const o=[];for(let a=0;a<s.length;a++){const l=ne(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,g=Et.Default;for(let v=0;v<l.length;v++){const b=l[v],I=De(b);"number"==typeof I?-1===I?d=b.token:g|=I:d=b}o.push(D(d,g))}else o.push(D(l))}return o}function X(s,o){return s[Xr]=o,s.prototype[Xr]=o,s}function De(s){return s[Xr]}const bt=X(li("Inject",s=>({token:s})),-1),At=X(li("Optional"),8),An=X(li("SkipSelf"),4);class Cf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Fo(s){return s instanceof Cf?s.changingThisBreaksApplicationSecurity:s}const _g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function ao(s){const o=function sl(){const s=Se();return s&&s[12]}();return o?o.sanitize(Rn.URL,s)||"":function bs(s,o){const a=function Tf(s){return s instanceof Cf&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?Fo(s):function io(s){return(s=String(s)).match(_g)||s.match(Qy)?s:"unsafe:"+s}(fe(s))}const Gd="__ngContext__";function ir(s,o){s[Gd]=o}function qd(s){const o=function Vo(s){return s[Gd]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function uo(s){return s.ngOriginalError}function s_(s,...o){s.error(...o)}class mc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Cg(s){return s&&s.ngErrorLogger||s_}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&uo(o);for(;a&&uo(a);)a=uo(a);return a||null}}const Lf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function Ds(s){return s instanceof Function?s():s}var S=(()=>((S=S||{})[S.Important=1]="Important",S[S.DashCase=2]="DashCase",S))();function Z(s,o){return undefined(s,o)}function qe(s){const o=s[3];return ki(o)?o[3]:o}function Un(s){return wa(s[13])}function fi(s){return wa(s[4])}function wa(s){for(;null!==s&&!ki(s);)s=s[4];return s}function Bo(s,o,a,l,d){if(null!=l){let g,v=!1;ki(l)?g=l:Kr(l)&&(v=!0,l=l[0]);const b=nn(l);0===s&&null!==a?null==d?dl(o,a,b):bn(o,a,b,d||null,!0):1===s&&null!==a?bn(o,a,b,d||null,!0):2===s?function mE(s,o,a){const l=Ct(s,o);l&&function it(s,o,a,l){an(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,b,v):3===s&&o.destroyNode(b),null!=g&&function _E(s,o,a,l,d){const g=a[7];g!==nn(a)&&Bo(o,s,l,g,d);for(let b=10;b<a.length;b++){const I=a[b];jf(I[1],I,s,o,l,g)}}(o,s,g,a,d)}}function Zd(s,o,a){if(an(s))return s.createElement(o,a);{const l=null!==a?function Gl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function fE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,ua(d,-1)),a.splice(l,1)}function xg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&fE(d,l),o>0&&(s[a-1][4]=l[4]);const g=Mo(s,10+o);!function Yd(s,o){jf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Er(s,o){if(!(256&o[2])){const a=o[11];an(a)&&a.destroyNode&&jf(s,o,a,3,null,null),function Ag(s){let o=s[13];if(!o)return ll(s[1],s);for(;o;){let a=null;if(Kr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Kr(o)&&ll(o[1],o),o=o[3];null===o&&(o=s),Kr(o)&&ll(o[1],o),a=o&&o[4]}o=a}}(o)}}function ll(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function o_(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Uu)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const b=d[g[v]],I=g[v+1];try{I.call(b)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function cl(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],b="function"==typeof v?v(o):nn(o[v]),I=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?b.removeEventListener(a[g],I,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&an(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ki(o[3])){a!==o[3]&&fE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function pE(s,o,a){return function Pe(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return ur(l,a)}(s,o.parent,a)}function bn(s,o,a,l,d){an(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function dl(s,o,a){an(s)?s.appendChild(o,a):o.appendChild(a)}function Mg(s,o,a,l,d){null!==l?bn(s,o,a,l,d):dl(s,o,a)}function Ct(s,o){return an(s)?s.parentNode(o):o.parentNode}let Re=function he(s,o,a){return 40&s.type?ur(s,a):null};function Rg(s,o,a,l){const d=pE(s,l,o),g=o[11],b=function Ye(s,o,a){return Re(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Mg(g,d,a[I],b,!1);else Mg(g,d,a,b,!1)}function Og(s,o){if(null!==o){const a=o.type;if(3&a)return ur(o,s);if(4&a)return u_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Og(s,l);{const d=s[o.index];return ki(d)?u_(-1,d):nn(d)}}if(32&a)return Z(o,s)()||nn(s[o.index]);{const l=gE(s,o);return null!==l?Array.isArray(l)?l[0]:Og(qe(s[16]),l):Og(s,o.next)}}return null}function gE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function u_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Og(l,d)}return o[7]}function Pg(s,o,a,l,d,g,v){for(;null!=a;){const b=l[a.index],I=a.type;if(v&&0===o&&(b&&ir(nn(b),l),a.flags|=4),64!=(64&a.flags))if(8&I)Pg(s,o,a.child,l,d,g,!1),Bo(o,s,d,b,g);else if(32&I){const A=Z(a,l);let M;for(;M=A();)Bo(o,s,d,M,g);Bo(o,s,d,b,g)}else 16&I?yE(s,o,l,a,d,g):Bo(o,s,d,b,g);a=v?a.projectionNext:a.next}}function jf(s,o,a,l,d,g){Pg(a,l,s.firstChild,o,d,g,!1)}function yE(s,o,a,l,d,g){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Bo(o,s,d,I[A],g);else Pg(s,o,I,v[3],d,g,!0)}function _c(s,o,a){an(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Ng(s,o,a){an(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function On(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const Jd="ng-template";function Qt(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==On(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function vE(s){return 4===s.type&&s.value!==Jd}function Qn(s,o,a){return o===(4!==s.type||a?s.value:Jd)}function ze(s,o,a){let l=4;const d=s.attrs||[],g=function kg(s){for(let o=0;o<s.length;o++)if(Yt(s[o]))return o;return s.length}(d);let v=!1;for(let b=0;b<o.length;b++){const I=o[b];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!Qn(s,I,a)||""===I&&1===o.length){if(Xi(l))return!1;v=!0}}else{const A=8&l?I:o[++b];if(8&l&&null!==s.attrs){if(!Qt(s.attrs,A,a)){if(Xi(l))return!1;v=!0}continue}const F=l_(8&l?"class":I,d,vE(s),a);if(-1===F){if(Xi(l))return!1;v=!0;continue}if(""!==A){let G;G=F>g?"":d[F+1].toLowerCase();const J=8&l?G:null;if(J&&-1!==On(J,A,0)||2&l&&A!==G){if(Xi(l))return!1;v=!0}}}}else{if(!v&&!Xi(l)&&!Xi(I))return!1;if(v&&Xi(I))continue;v=!1,l=I|1&l}}return Xi(l)||v}function Xi(s){return 0==(1&s)}function l_(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let b=o[++d];for(;"string"==typeof b;)b=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function wC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function hl(s,o,a=!1){for(let l=0;l<o.length;l++)if(ze(s,o[l],a))return!0;return!1}function c_(s,o){return s?":not("+o.trim()+")":o}function EE(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const b=s[++a];d+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Xi(v)&&(o+=c_(g,d),d=""),l=v,g=g||!Xi(l);a++}return""!==d&&(o+=c_(g,d)),o}const kt={};function h_(s){fu(Lt(),Se(),tr()+s,Ga())}function fu(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Za(o,g,a)}else{const g=s.preOrderHooks;null!==g&&vs(o,g,0,a)}$i(a)}function se(s,o){return s<<17|o<<2}function es(s){return s>>17&32767}function vc(s){return 2|s}function pi(s){return(131068&s)>>2}function f_(s,o){return-131069&s|o<<2}function Lg(s){return 1|s}function v_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Wa(d),v.contentQueries(2,o[g],g)}}}function nh(s,o,a,l,d,g,v,b,I,A){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,ji(M),M[3]=M[15]=s,M[8]=a,M[10]=v||s&&s[10],M[11]=b||s&&s[11],M[12]=I||s&&s[12]||null,M[9]=A||s&&s[9]||null,M[6]=g,M[16]=2==o.type?s[16]:M,M}function Cc(s,o,a,l,d){let g=s.data[o];if(null===g)g=function br(s,o,a,l,d){const g=ca(),v=$a(),I=s.data[o]=function ME(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,a,l,d),function Jl(){return yt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Io(){const s=yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ui(g,!0),g}function Dc(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function dn(s,o,a){ha(o);try{const l=s.viewQuery;null!==l&&xn(1,l,a);const d=s.template;null!==d&&ml(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&v_(s,o),s.staticViewQueries&&xn(2,s.viewQuery,a);const g=s.components;null!==g&&function TC(s,o){for(let a=0;a<o.length;a++)Ac(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,pa()}}function rh(s,o,a,l){const d=o[2];if(256==(256&d))return;ha(o);const g=Ga();try{ji(o),function qa(s){return yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&ml(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Za(o,A,null)}else{const A=s.preOrderHooks;null!==A&&vs(o,A,0,null),ga(o,0)}if(function OC(s){for(let o=Un(s);null!==o;o=fi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&ua(g,1),d[2]|=1024}}}(o),function RC(s){for(let o=Un(s);null!==o;o=fi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ys(l)&&rh(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&v_(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&Za(o,A)}else{const A=s.contentHooks;null!==A&&vs(o,A,1),ga(o,1)}!function qf(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)$i(~d);else{const g=d,v=a[++l],b=a[++l];Xl(v,g),b(2,o[g])}}}finally{$i(-1)}}(s,o);const b=s.components;null!==b&&function DC(s,o){for(let a=0;a<o.length;a++)LE(s,o[a])}(o,b);const I=s.viewQuery;if(null!==I&&xn(2,I,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&Za(o,A)}else{const A=s.viewHooks;null!==A&&vs(o,A,2),ga(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,ua(o[3],-1))}finally{pa()}}function DE(s,o,a,l){const d=o[10],g=!Ga(),v=bo(o);try{g&&!v&&d.begin&&d.begin(),v&&dn(s,o,l),rh(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function ml(s,o,a,l,d){const g=tr(),v=2&l;try{$i(-1),v&&o.length>20&&fu(s,o,20,Ga()),a(l,d)}finally{$i(g)}}function Tc(s,o,a){!Ha()||(function I_(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Xa(a,o),ir(l,o);const v=a.initialInputs;for(let b=d;b<g;b++){const I=s.data[b],A=Li(I);A&&NE(o,a,I);const M=So(o,s,b,a);ir(M,o),null!==v&&kE(0,b-d,M,I,0,v),A&&(lr(a.index,o)[8]=M)}}(s,o,a,ur(a,o)),128==(128&a.flags)&&function C_(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,b=function Vu(){return yt.lFrame.currentDirectiveIndex}();try{$i(v);for(let I=l;I<d;I++){const A=s.data[I],M=o[I];za(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Sc(A,M)}}finally{$i(-1),za(b)}}(s,o,a))}function ih(s,o,a=ur){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],b=-1===v?a(o,s):s[v];s[d++]=b}}}function zf(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Wf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Wf(s,o,a,l,d,g,v,b,I,A){const M=20+l,F=M+d,G=function SE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:kt);return a}(M,F),J="function"==typeof A?A():A;return G[1]={type:s,blueprint:G,template:a,queries:null,viewQuery:b,declTNode:o,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function xE(s,o,a,l){const d=S_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&UE(s).push(l,d.length-1))}function RE(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Ss(s,o,a,l,d,g,v,b){const I=ur(o,a);let M,A=o.inputs;!b&&null!=A&&(M=A[l])?(A_(s,a,M,l,d),ad(o)&&function yl(s,o){const a=lr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function AC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,an(g)?g.setProperty(I,l,d):To(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}function vl(s,o,a,l){let d=!1;if(Ha()){const g=function ns(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];hl(a,v.selectors,!1)&&(d||(d=[]),ma(Xa(a,o),s,v.type),Li(v)?(Kf(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,$g(a,s.data.length,g.length);for(let M=0;M<g.length;M++){const F=g[M];F.providersResolver&&F.providersResolver(F)}let b=!1,I=!1,A=Dc(s,o,g.length,null);for(let M=0;M<g.length;M++){const F=g[M];a.mergedAttrs=st(a.mergedAttrs,F.hostAttrs),Gg(s,a,o,A,F),PE(A,F,v),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const G=F.type.prototype;!b&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),b=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function SC(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let b=null,I=null;for(let A=o.directiveStart;A<l;A++){const M=d[A],F=M.inputs,G=null===g||vE(o)?null:FE(F,g);v.push(G),b=RE(F,A,b),I=RE(M.outputs,A,I)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=b,o.outputs=I}(s,a)}v&&function Zf(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Oe(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=st(a.mergedAttrs,a.attrs),d}function w_(s,o,a,l,d,g){const v=g.hostBindings;if(v){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const I=~o.index;(function b_(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(b)!=I&&b.push(I),b.push(l,d,v)}}function Sc(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Kf(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function PE(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Li(o)&&(a[""]=s)}}function $g(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Gg(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=yr(d.type)),v=new Uu(g,Li(d),null);s.blueprint[l]=v,a[l]=v,w_(s,o,0,l,Dc(s,a,d.hostVars,kt),d)}function NE(s,o,a){const l=ur(o,s),d=zf(a),g=s[10],v=Ia(s,nh(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function jo(s,o,a,l,d,g){const v=ur(s,o);!function D_(s,o,a,l,d,g,v){if(null==g)an(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const b=null==v?fe(g):v(g,l||"",d);an(s)?s.setAttribute(o,d,b,a):a?o.setAttributeNS(a,d,b):o.setAttribute(d,b)}}(o[11],v,g,s.value,a,l,d)}function kE(s,o,a,l,d,g){const v=g[o];if(null!==v){const b=l.setInput;for(let I=0;I<v.length;){const A=v[I++],M=v[I++],F=v[I++];null!==b?l.setInput(a,F,A,M):a[M]=F}}}function FE(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Yf(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function LE(s,o){const a=lr(o,s);if(ys(a)){const l=a[1];80&a[2]?rh(l,a,l.template,a[8]):a[5]>0&&El(a)}}function El(s){for(let l=Un(s);null!==l;l=fi(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];rh(v,g,v.template,g[8])}else g[5]>0&&El(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=lr(a[l],s);ys(d)&&d[5]>0&&El(d)}}function Ac(s,o){const a=lr(o,s),l=a[1];(function VE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),dn(l,a,a[8])}function Ia(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function qg(s){for(;s;){s[2]|=64;const o=qe(s);if(jl(s)&&!o)return s;s=o}return null}function Wg(s,o,a){const l=o[10];l.begin&&l.begin();try{rh(s,o,s.template,a)}catch(d){throw BE(o,d),d}finally{l.end&&l.end()}}function ah(s){!function zg(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=qd(a),d=l[1];DE(d,l,d.template,a)}}(s[8])}function xn(s,o,a){Wa(0),o(s,a)}const Kg=(()=>Promise.resolve(null))();function S_(s){return s[7]||(s[7]=[])}function UE(s){return s.cleanup||(s.cleanup=[])}function BE(s,o){const a=s[9],l=a?a.get(mc,null):null;l&&l.handleError(o)}function A_(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],b=a[g++],I=o[v],A=s.data[v];null!==A.setInput?A.setInput(I,d,l,b):I[b]=d}}function rs(s,o,a){const l=zs(o,s);!function ba(s,o,a){an(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function fo(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const b=o[v];"number"==typeof b?g=b:1==g?d=ge(d,b):2==g&&(l=ge(l,b+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const wl=new En("INJECTOR",-1);class Zg{get(o,a=No){if(a===No){const l=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw l.name="NullInjectorError",l}return a}}const x_=new En("Set Injector scope."),jn={},Jt={};let Yg;function M_(){return void 0===Yg&&(Yg=new Zg),Yg}function yu(s,o=null,a=null,l){const d=$E(s,o,a,l);return d._resolveInjectorDefTypes(),d}function $E(s,o=null,a=null,l){return new is(s,a,o||M_(),l)}class is{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Qr(a,b=>this.processProvider(b,o,a)),Qr([o],b=>this.processInjectorType(b,[],g)),this.records.set(wl,xc(void 0,this));const v=this.records.get(x_);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=No,l=Et.Default){this.assertNotDestroyed();const d=Pd(this),g=Kn(void 0);try{if(!(l&Et.SkipSelf)){let b=this.records.get(o);if(void 0===b){const I=function Xf(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&Ut(o);b=I&&this.injectableDefInScope(I)?xc(Qg(o),jn):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(l&Et.Self?M_():this.parent).get(o,a=l&Et.Optional&&a===No?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[to]=v[to]||[]).unshift(ue(o)),d)throw v;return function $e(s,o,a,l){const d=s[to];throw o[ou]&&d.unshift(o[ou]),s.message=function pt(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let b=o[v];g.push(v+":"+("string"==typeof b?JSON.stringify(b):ue(b)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Rd,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[to]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Kn(g),Pd(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=ne(o)))return!1;let d=Hr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,b=-1!==l.indexOf(v);if(void 0!==g&&(d=Hr(g)),null==d)return!1;if(null!=d.imports&&!b){let M;l.push(v);try{Qr(d.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:G,providers:J}=M[F];Qr(J,Ee=>this.processProvider(Ee,G,J||ft))}}this.injectorDefTypes.add(v);const I=yr(v)||(()=>new v);this.records.set(v,xc(I,jn));const A=d.providers;if(null!=A&&!b){const M=o;Qr(A,F=>this.processProvider(F,M,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=Rt(o=ne(o))?o:ne(o&&o.provide);const g=function GE(s,o,a){return lh(s)?xc(void 0,s.useValue):xc(Ho(s),jn)}(o);if(Rt(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=xc(void 0,jn,!0),v.factory=()=>Y(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===jn&&(a.value=Jt,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Jf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ne(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Qg(s){const o=Ut(s),a=null!==o?o.factory:yr(s);if(null!==a)return a;if(s instanceof En)throw new Oe(204,!1);if(s instanceof Function)return function Qf(s){const o=s.length;if(o>0)throw function Ro(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Oe(204,!1);const a=function ii(s){const o=s&&(s[xi]||s[$r]);if(o){const a=function fr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function Ho(s,o,a){let l;if(Rt(s)){const d=ne(s);return yr(d)||Qg(d)}if(lh(s))l=()=>ne(s.useValue);else if(function LC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Y(s.deps||[]));else if(function FC(s){return!(!s||!s.useExisting)}(s))l=()=>D(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function Jg(s){return!!s.deps}(s))return yr(d)||Qg(d);l=()=>new d(...Y(s.deps))}return l}function xc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function lh(s){return null!==s&&"object"==typeof s&&rc in s}function Rt(s){return"function"==typeof s}let ss=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return yu({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return yu({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=No,s.NULL=new Zg,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>D(wl)}),s.__NG_ELEMENT_ID__=-1,s})();function zC(s,o){bd(qd(s)[1],mn())}function nm(s){let o=function L_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Li(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=rm(s.inputs),v.declaredInputs=rm(s.declaredInputs),v.outputs=rm(s.outputs);const b=d.hostBindings;b&&fh(s,b);const I=d.viewQuery,A=d.contentQueries;if(I&&ZC(s,I),A&&YC(s,A),de(s.inputs,d.inputs),de(s.declaredInputs,d.declaredInputs),de(s.outputs,d.outputs),Li(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const b=g[v];b&&b.ngInherit&&b(s),b===nm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function KC(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=st(d.hostAttrs,a=st(a,d.hostAttrs))}}(l)}function rm(s){return s===Ar?{}:s===ft?[]:s}function ZC(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function YC(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function fh(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let im=null;function Mc(){if(!im){const s=jt.Symbol;if(s&&s.iterator)im=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(im=l)}}}return im}function ep(s){return!!sm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Mc()in s)}function sm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gi(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function V_(s,o,a,l){const d=Se();return gi(d,Ws(),o)&&(Lt(),jo(Mn(),d,s,o,a,l)),V_}function yh(s,o,a,l){return gi(s,Ws(),a)?o+fe(a)+l:kt}function lm(s,o,a,l,d,g,v,b){const I=Se(),A=Lt(),M=s+20,F=A.firstCreatePass?function H_(s,o,a,l,d,g,v,b,I){const A=o.consts,M=Cc(o,s,4,v||null,bi(A,b));vl(o,a,M,bi(A,I)),bd(o,M);const F=M.tViews=Wf(2,M,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,A,I,o,a,l,d,g,v):A.data[M];ui(F,!1);const G=I[11].createComment("");Rg(A,I,G,F),ir(G,I),Ia(I,I[M]=Yf(G,I,G,F)),Fi(F)&&Tc(A,I,F),null!=v&&ih(I,F,b)}function Ah(s,o=Et.Default){const a=Se();return null===a?D(s,o):Ci(mn(),a,ne(s),o)}function _u(){throw new Error("invalid")}function Sl(s,o,a){const l=Se();return gi(l,Ws(),o)&&Ss(Lt(),Mn(),l,s,o,l[11],a,!1),Sl}function _m(s,o,a,l,d){const v=d?"class":"style";A_(s,a,o.inputs[v],v,l)}function vm(s,o,a,l){const d=Se(),g=Lt(),v=20+s,b=d[11],I=d[v]=Zd(b,o,function wd(){return yt.lFrame.currentNamespace}()),A=g.firstCreatePass?function Pc(s,o,a,l,d,g,v){const b=o.consts,A=Cc(o,s,2,d,bi(b,g));return vl(o,a,A,bi(b,v)),null!==A.attrs&&fo(A,A.attrs,!1),null!==A.mergedAttrs&&fo(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];ui(A,!0);const M=A.mergedAttrs;null!==M&&fn(b,I,M);const F=A.classes;null!==F&&Ng(b,I,F);const G=A.styles;return null!==G&&_c(b,I,G),64!=(64&A.flags)&&Rg(g,d,I,A),0===function Nu(){return yt.lFrame.elementDepthCount}()&&ir(I,d),function ja(){yt.lFrame.elementDepthCount++}(),Fi(A)&&(Tc(g,d,A),function TE(s,o,a){if(Ru(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&ih(d,A),vm}function vu(){let s=mn();$a()?function Ql(){yt.lFrame.isParent=!1}():(s=s.parent,ui(s,!1));const o=s;!function Wl(){yt.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(bd(a,s),Ru(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Cd(s){return 0!=(16&s.flags)}(o)&&_m(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function og(s){return 0!=(32&s.flags)}(o)&&_m(a,o,Se(),o.stylesWithoutHost,!1),vu}function Em(s,o,a,l){return vm(s,o,a,l),vu(),Em}function xh(s){return!!s&&"function"==typeof s.then}function Y_(s){return!!s&&"function"==typeof s.subscribe}const dw=Y_;function wm(s,o,a,l){const d=Se(),g=Lt(),v=mn();return function Al(s,o,a,l,d,g,v,b){const I=Fi(l),M=s.firstCreatePass&&UE(s),F=o[8],G=S_(o);let J=!0;if(3&l.type||b){const We=ur(l,o),nt=b?b(We):We,Me=G.length,vt=b?zt=>b(nn(zt[l.index])):l.index;if(an(a)){let zt=null;if(!b&&I&&(zt=function fw(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const b=o[7],I=d[g+2];return b.length>I?b[I]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=g,zt.__ngLastListenerFn__=g,J=!1;else{g=bm(l,o,F,g,!1);const hn=a.listen(nt,d,g);G.push(g,hn),M&&M.push(d,vt,Me,Me+1)}}else g=bm(l,o,F,g,!0),nt.addEventListener(d,g,v),G.push(g),M&&M.push(d,vt,Me,v)}else g=bm(l,o,F,g,!1);const Ee=l.outputs;let ke;if(J&&null!==Ee&&(ke=Ee[d])){const We=ke.length;if(We)for(let nt=0;nt<We;nt+=2){const Ps=o[ke[nt]][ke[nt+1]].subscribe(g),Jh=G.length;G.push(g,Ps),M&&M.push(d,l.index,Jh,-(Jh+1))}}}(g,d,d[11],v,s,o,!!a,l),wm}function Mh(s,o,a,l){try{return!1!==a(l)}catch(d){return BE(s,d),!1}}function bm(s,o,a,l,d){return function g(v){if(v===Function)return l;const b=2&s.flags?lr(s.index,o):o;0==(32&o[2])&&qg(b);let I=Mh(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)I=Mh(o,0,A,v)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Q_(s=1){return function Hi(s){return(yt.lFrame.contextLView=function gf(s,o){for(;s>0;)o=o[15],s--;return o}(s,yt.lFrame.contextLView))[8]}(s)}function J_(s,o,a){return ip(s,"",o,"",a),J_}function ip(s,o,a,l,d){const g=Se(),v=yh(g,o,a,l);return v!==kt&&Ss(Lt(),Mn(),g,s,v,g[11],d,!1),ip}function Im(s,o,a,l,d){const g=s[a+1],v=null===o;let b=l?es(g):pi(g),I=!1;for(;0!==b&&(!1===I||v);){const M=s[b+1];op(s[b],o)&&(I=!0,s[b+1]=l?Lg(M):vc(M)),b=l?es(M):pi(M)}I&&(s[a+1]=l?vc(g):Lg(g))}function op(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Jr(s,o)>=0}function Oh(s,o){return function Ms(s,o,a,l){const d=Se(),g=Lt(),v=function Ii(s){const o=yt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);g.firstUpdatePass&&function iv(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[tr()],v=function Sm(s,o){return o>=s.expandoStartIndex}(s,a);(function Mw(s,o){return 0!=(s.flags&(o?16:32))})(g,l)&&null===o&&!v&&(o=!1),o=function Sw(s,o,a,l){const d=function da(s){const o=yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Fc(a=Ph(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Ph(d,s,o,a,l),null===g){let I=function sv(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==pi(l))return s[es(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=Ph(null,s,o,I[1],l),I=Fc(I,o.attrs,l),function Am(s,o,a,l){s[es(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else g=function up(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Fc(l,s[g].hostAttrs,a);return Fc(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function Ew(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,b=es(v),I=pi(v);s[l]=a;let M,A=!1;if(Array.isArray(a)){const F=a;M=F[1],(null===M||Jr(F,M)>0)&&(A=!0)}else M=a;if(d)if(0!==I){const G=es(s[b+1]);s[l+1]=se(G,b),0!==G&&(s[G+1]=f_(s[G+1],l)),s[b+1]=function bC(s,o){return 131071&s|o<<17}(s[b+1],l)}else s[l+1]=se(b,0),0!==b&&(s[b+1]=f_(s[b+1],l)),b=l;else s[l+1]=se(I,0),0===b?b=l:s[I+1]=f_(s[I+1],l),I=l;A&&(s[l+1]=vc(s[l+1])),Im(s,M,l,!0),Im(s,M,l,!1),function ev(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Jr(g,o)>=0&&(a[l+1]=Lg(a[l+1]))}(o,M,s,l,g),v=se(b,I),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}(g,s,v,l),o!==kt&&gi(d,v,o)&&function xw(s,o,a,l,d,g,v,b){if(!(3&o.type))return;const I=s.data,A=I[b+1];Mm(function fl(s){return 1==(1&s)}(A)?av(I,o,a,d,pi(A),v):void 0)||(Mm(g)||function co(s){return 2==(2&s)}(A)&&(g=av(I,null,a,d,b,v)),function Nt(s,o,a,l,d){const g=an(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:S.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const b="string"==typeof d&&d.endsWith("!important");b&&(d=d.slice(0,-10),v|=S.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,b?"important":"")}}}(l,v,zs(tr(),a),d,g))}(g,g.data[tr()],d,d[11],s,d[v+1]=function cD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ue(Fo(s)))),s}(o,a),l,v)}(s,o,null,!0),Oh}function Ph(s,o,a,l,d){let g=null;const v=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<v&&(g=o[b],l=Fc(l,g.hostAttrs,d),g!==s);)b++;return null!==s&&(a.directiveStylingLast=b),l}function Fc(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),cr(s,v,!!a||o[++g]))}return void 0===s?null:s}function av(s,o,a,l,d,g){const v=null===o;let b;for(;d>0;){const I=s[d],A=Array.isArray(I),M=A?I[1]:I,F=null===M;let G=a[d+1];G===kt&&(G=F?ft:void 0);let J=F?Po(G,l):M===l?G:void 0;if(A&&!Mm(J)&&(J=Po(I,l)),Mm(J)&&(b=J,v))return b;const Ee=s[d+1];d=v?es(Ee):pi(Ee)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(b=Po(I,l))}return b}function Mm(s){return void 0!==s}function uv(s,o=""){const a=Se(),l=Lt(),d=s+20,g=l.firstCreatePass?Cc(l,d,1,o,null):l.data[d],v=a[d]=function yc(s,o){return an(s)?s.createText(o):s.createTextNode(o)}(a[11],o);Rg(l,a,v,g),ui(g,!1)}function Nh(s){return Lc("",s,""),Nh}function Lc(s,o,a){const l=Se(),d=yh(l,s,o,a);return d!==kt&&rs(l,tr(),d),Lc}const Eu=void 0;var wv=["en",[["a","p"],["AM","PM"],Eu],[["AM","PM"],Eu,Eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eu,"{1} 'at' {0}",Eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pD(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Lh={};function Lm(s){const o=function bv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Um(o);if(a)return a;const l=o.split("-")[0];if(a=Um(l),a)return a;if("en"===l)return wv;throw new Error(`Missing locale data for the locale "${s}".`)}function Vm(s){return Lm(s)[dt.PluralCase]}function Um(s){return s in Lh||(Lh[s]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[s]),Lh[s]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const dp="en-US";let Hm=dp;function gp(s,o,a,l,d){if(s=ne(s),Array.isArray(s))for(let g=0;g<s.length;g++)gp(s[g],o,a,l,d);else{const g=Lt(),v=Se();let b=Rt(s)?s:ne(s.provide),I=Ho(s);const A=mn(),M=1048575&A.providerIndexes,F=A.directiveStart,G=A.providerIndexes>>20;if(Rt(s)||!s.multi){const J=new Uu(I,d,Ah),Ee=ry(b,o,d?M:M+G,F);-1===Ee?(ma(Xa(A,v),g,b),ny(g,s,o.length),o.push(b),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(J),v.push(J)):(a[Ee]=J,v[Ee]=J)}else{const J=ry(b,o,M+G,F),Ee=ry(b,o,M,M+G),ke=J>=0&&a[J],We=Ee>=0&&a[Ee];if(d&&!We||!d&&!ke){ma(Xa(A,v),g,b);const nt=function MD(s,o,a,l,d){const g=new Uu(s,a,Ah);return g.multi=[],g.index=o,g.componentProviders=0,mp(g,d,l&&!a),g}(d?qh:Wv,a.length,d,l,I);!d&&We&&(a[Ee].providerFactory=nt),ny(g,s,o.length,0),o.push(b),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(nt),v.push(nt)}else ny(g,s,J>-1?J:Ee,mp(a[d?Ee:J],I,!d&&l));!d&&l&&We&&a[Ee].componentProviders++}}}function ny(s,o,a,l){const d=Rt(o),g=function VC(s){return!!s.useClass}(o);if(d||g){const I=(g?ne(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,I]):A[M+1].push(l,I)}else A.push(a,I)}}}function mp(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function ry(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Wv(s,o,a,l){return yp(this.multi,[])}function qh(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=So(a,a[1],this.providerFactory.index,l);g=b.slice(0,v),yp(d,g);for(let I=v;I<b.length;I++)g.push(b[I])}else g=[],yp(d,g);return g}function yp(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function cb(s,o=[]){return a=>{a.providersResolver=(l,d)=>function ty(s,o,a){const l=Lt();if(l.firstCreatePass){const d=Li(s);gp(a,l.data,l.blueprint,d,!0),gp(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Kv{}class PD{resolveComponentFactory(o){throw function OD(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let iy=(()=>{class s{}return s.NULL=new PD,s})();function ND(){return Bc(mn(),Se())}function Bc(s,o){return new jc(ur(s,o))}let jc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=ND,s})();function db(s){return s instanceof jc?s.nativeElement:s}class Yv{}let sy=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function hb(){const s=Se(),a=lr(mn().index,s);return function Zt(s){return s[11]}(Kr(a)?a:s)}(),s})(),fb=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class zh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const pb=new zh("13.2.7"),In={};function Dr(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(nn(g)),ki(g))for(let b=10;b<g.length;b++){const I=g[b],A=I[1].firstChild;null!==A&&Dr(I[1],I,A,l)}const v=a.type;if(8&v)Dr(s,o,a.child,l);else if(32&v){const b=Z(a,o);let I;for(;I=b();)l.push(I)}else if(16&v){const b=gE(o,a);if(Array.isArray(b))l.push(...b);else{const I=qe(o[16]);Dr(I[1],I,b,l,!0)}}a=d?a.projectionNext:a.next}return l}class os{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Dr(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(xg(o,l),Mo(a,l))}this._attachedToViewContainer=!1}Er(this._lView[1],this._lView)}onDestroy(o){xE(this._lView[1],this._lView,null,o)}markForCheck(){qg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function PC(s,o,a){Fu(!0);try{Wg(s,o,a)}finally{Fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sg(s,o){jf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class gb extends os{constructor(o){super(o),this._view=o}detectChanges(){ah(this._view)}checkNoChanges(){!function NC(s){Fu(!0);try{ah(s)}finally{Fu(!1)}}(this._view)}get context(){return null}}class mb extends iy{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Zn(o);return new Qv(a,this.ngModule)}}function _p(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Qv extends Kv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ts(s){return s.map(EE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return _p(this.componentDef.inputs)}get outputs(){return _p(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function _b(s,o){return{get:(a,l,d)=>{const g=s.get(a,In,d);return g!==In||l===In?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Yv,Va),b=g.get(fb,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function AE(s,o,a){if(an(s))return s.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Zd(v.createRenderer(null,this.componentDef),A,function yb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),F=this.componentDef.onPush?576:528,G=function tm(s,o){return{components:[],scheduler:s||Lf,clean:Kg,playerHandler:o||null,flags:0}}(),J=Wf(0,null,null,1,0,null,null,null,null,null),Ee=nh(null,J,G,F,null,null,v,I,b,g);let ke,We;ha(Ee);try{const nt=function KE(s,o,a,l,d,g){const v=a[1];a[20]=s;const I=Cc(v,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(fo(I,A,!0),null!==s&&(fn(d,s,A),null!==I.classes&&Ng(d,s,I.classes),null!==I.styles&&_c(d,s,I.styles)));const M=l.createRenderer(s,o),F=nh(a,zf(o),null,o.onPush?64:16,a[20],I,l,M,g||null,null);return v.firstCreatePass&&(ma(Xa(I,a),v,o.type),Kf(v,I),$g(I,a.length,1)),Ia(a,F),a[20]=F}(M,this.componentDef,Ee,v,I);if(M)if(l)fn(I,M,["ng-version",pb.full]);else{const{attrs:Me,classes:vt}=function d_(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!Xi(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&fn(I,M,Me),vt&&vt.length>0&&Ng(I,M,vt.join(" "))}if(We=Cn(J,20),void 0!==a){const Me=We.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const zt=a[vt];Me.push(null!=zt?Array.from(zt):null)}}ke=function hh(s,o,a,l,d){const g=a[1],v=function OE(s,o,a){const l=mn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Gg(s,l,o,Dc(s,o,1,null),a));const d=So(o,s,l.directiveStart,l);ir(d,o);const g=ur(l,o);return g&&ir(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=mn();o.contentQueries(1,v,I.directiveStart)}const b=mn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||($i(b.index),w_(a[1],b,0,b.directiveStart,b.directiveEnd,o),Sc(o,v)),v}(nt,this.componentDef,Ee,G,[zC]),dn(J,Ee,null)}finally{pa()}return new FD(this.componentType,ke,Bc(We,Ee),Ee,We)}}class FD extends class RD{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new gb(d),this.componentType=o}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class vp{}class LD{}const Pn=new Map;class wb extends vp{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mb(this);const l=Yn(o);this._bootstrapComponents=Ds(l.bootstrap),this._r3Injector=$E(o,a,[{provide:vp,useValue:this},{provide:iy,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ss.THROW_IF_NOT_FOUND,l=Et.Default){return o===ss||o===vp||o===wl?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xv extends LD{constructor(o){super(),this.moduleType=o,null!==Yn(o)&&function UD(s){const o=new Set;!function a(l){const d=Yn(l,!0),g=d.id;null!==g&&(function vb(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(g,Pn.get(g),l),Pn.set(g,l));const v=Ds(d.imports);for(const b of v)o.has(b)||(o.add(b),a(b))}(s)}(o)}create(o){return new wb(this.moduleType,o)}}function uy(s){return o=>{setTimeout(s,void 0,o)}}const mi=class r0 extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let b=o,I=a||(()=>null),A=l;if(o&&"object"==typeof o){const F=o;b=null===(d=F.next)||void 0===d?void 0:d.bind(F),I=null===(g=F.error)||void 0===g?void 0:g.bind(F),A=null===(v=F.complete)||void 0===v?void 0:v.bind(F)}this.__isAsync&&(I=uy(I),b&&(b=uy(b)),A&&(A=uy(A)));const M=super.subscribe({next:b,error:I,complete:A});return o instanceof ee.w0&&o.add(M),M}};function Db(){return this._results[Mc()]()}class ly{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Mc(),l=ly.prototype;l[a]||(l[a]=Db)}get changes(){return this._changes||(this._changes=new mi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Pr(o);(this._changesDetected=!function zu(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Gc=(()=>{class s{}return s.__NG_ELEMENT_ID__=cy,s})();const s0=Gc,WD=class extends s0{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=nh(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),dn(a,l,o),new os(l)}};function cy(){return qc(mn(),Se())}function qc(s,o){return 4&s.type?new WD(o,s,Bc(s,o)):null}let Ip=(()=>{class s{}return s.__NG_ELEMENT_ID__=Cp,s})();function Cp(){return Wh(mn(),Se())}const KD=Ip,Dp=class extends KD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Bc(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){const o=yn(this._hostTNode,this._hostLView);if(Ya(o)){const a=Vt(o,this._hostLView),l=Gi(o);return new Wi(a[1].data[l+8],a)}return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Rl(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function Xs(s){return"function"==typeof s}(o);let b;if(v)b=a;else{const F=a||{};b=F.index,l=F.injector,d=F.projectableNodes,g=F.ngModuleRef}const I=v?o:new Qv(Zn(o)),A=l||this.parentInjector;if(!g&&null==I.ngModule){const G=(v?A:this.parentInjector).get(vp,null);G&&(g=G)}const M=I.create(A,d,void 0,g);return this.insert(M.hostView,b),M}insert(o,a){const l=o._lView,d=l[1];if(function Ba(s){return ki(s[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=l[3],G=new Dp(F,F[6],F[3]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Bf(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],nu(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Qd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(d,l,v,g);const b=u_(g,v),I=l[11],A=Ct(I,v[7]);return null!==A&&function Uf(s,o,a,l,d,g){l[0]=d,l[6]=o,jf(s,l,a,1,d,g)}(d,v[6],I,l,A,b),o.attachToViewContainerRef(),nu(qo(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Rl(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=xg(this._lContainer,a);l&&(Mo(qo(this._lContainer),a),Er(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=xg(this._lContainer,a);return l&&null!=Mo(qo(this._lContainer),a)?new os(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Rl(s){return s[8]}function qo(s){return s[8]||(s[8]=[])}function Wh(s,o){let a;const l=o[s.index];if(ki(l))a=l;else{let d;if(8&s.type)d=nn(l);else{const g=o[11];d=g.createComment("");const v=ur(s,o);bn(g,Ct(g,v),d,function vC(s,o){return an(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=Yf(l,o,d,s),Ia(o,a)}return new Dp(a,s,o)}class dy{constructor(o){this.queryList=o,this.matches=null}clone(){return new dy(this.queryList)}setDirty(){this.queryList.setDirty()}}class zc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new zc(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==d0(o,a).matches&&this.queries[a].setDirty()}}class Iu{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class o0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new o0(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class a0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new a0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,QD(a,g)),this.matchTNodeWithReadOption(o,a,rt(a,o,g,!1,!1))}else l===Gc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,rt(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===jc||d===Ip||d===Gc&&4&a.type)this.addMatch(a.index,-2);else{const g=rt(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function QD(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Tb(s,o,a,l){return-1===a?function JD(s,o){return 11&s.type?Bc(s,o):4&s.type?qc(s,o):null}(o,s):-2===a?function XD(s,o,a){return a===jc?Bc(o,s):a===Gc?qc(o,s):a===Ip?Wh(o,s):void 0}(s,o,l):So(s,s[1],a,o)}function Sb(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,b=[];for(let I=0;I<v.length;I+=2){const A=v[I];b.push(A<0?null:Tb(o,g[A],v[I+1],a.metadata.read))}d.matches=b}return d.matches}function hy(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=Sb(s,o,d,a);for(let b=0;b<g.length;b+=2){const I=g[b];if(I>0)l.push(v[b/2]);else{const A=g[b+1],M=o[-I];for(let F=10;F<M.length;F++){const G=M[F];G[17]===G[3]&&hy(G[1],G,A,l)}if(null!==M[9]){const F=M[9];for(let G=0;G<F.length;G++){const J=F[G];hy(J[1],J,A,l)}}}}}return l}function Ab(s){const o=Se(),a=Lt(),l=ec();Wa(l+1);const d=d0(a,l);if(s.dirty&&bo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?hy(a,o,l,[]):Sb(a,o,d,l);s.reset(g,db),s.notifyOnChanges()}return!0}return!1}function u0(s,o,a,l){const d=Lt();if(d.firstCreatePass){const g=mn();(function c0(s,o,a){null===s.queries&&(s.queries=new o0),s.queries.track(new a0(o,a))})(d,new Iu(o,a,l),g.index),function Mb(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function l0(s,o,a){const l=new ly(4==(4&a));xE(s,o,l,l.destroy),null===o[19]&&(o[19]=new zc),o[19].queries.push(new dy(l))}(d,Se(),a)}function xb(){return function tT(s,o){return s[19].queries[o].queryList}(Se(),ec())}function d0(s,o){return s.queries.getByIndex(o)}function Du(...s){}const wy=new En("Application Initializer");let Tu=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Du,this.reject=Du,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(xh(g))a.push(g);else if(dw(g)){const v=new Promise((b,I)=>{g.subscribe({complete:b,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(D(wy,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const $b=new En("AppId",{providedIn:"root",factory:function Gb(){return`${Aa()}${Aa()}${Aa()}`}});function Aa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qb=new En("Platform Initializer"),xp=new En("Platform ID"),Mp=new En("appBootstrapListener");let zb=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();const E0=new En("LocaleId",{providedIn:"root",factory:()=>V(E0,Et.Optional|Et.SkipSelf)||function hT(){return"undefined"!=typeof $localize&&$localize.locale||dp}()}),Wb=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class b0{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Kb=(()=>{class s{compileModuleSync(a){return new Xv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=Ds(Yn(a).declarations).reduce((v,b)=>{const I=Zn(b);return I&&v.push(new Qv(I)),v},[]);return new b0(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Yc=(()=>Promise.resolve(0))();function Rp(s){"undefined"==typeof Zone?Yc.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mi(!1),this.onMicrotaskEmpty=new mi(!1),this.onStable=new mi(!1),this.onError=new mi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Yb(){let s=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function HA(s){const o=()=>{!function fT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,I0(s),s.isCheckStableRunning=!0,Qh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),I0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,b)=>{try{return by(s),a.invokeTask(d,g,v,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),pT(s)}},onInvoke:(a,l,d,g,v,b,I)=>{try{return by(s),a.invoke(d,g,v,b,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),pT(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,I0(s),Qh(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Qb,Du,Du);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Qb={};function Qh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function I0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function by(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pT(s){s._nesting--,Qh(s)}class $A{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mi,this.onMicrotaskEmpty=new mi,this.onStable=new mi,this.onError=new mi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Jb=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Os.assertNotInAngularZone(),Rp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Rp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(D(Os))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),Xb=(()=>{class s{constructor(){this._applications=new Map,eI.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return eI.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();class GA{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function qA(s){eI=s}let xa,eI=new GA;const gT=new En("AllowMultipleToken");class tI{constructor(o,a){this.name=o,this.token=a}}function nI(s,o,a=[]){const l=`Platform: ${o}`,d=new En(l);return(g=[])=>{let v=Op();if(!v||v.injector.get(gT,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const b=a.concat(g).concat({provide:d,useValue:!0},{provide:x_,useValue:"platform"});!function mT(s){if(xa&&!xa.destroyed&&!xa.injector.get(gT,!1))throw new Oe(400,"");xa=s.get(Iy);const o=s.get(qb,null);o&&o.forEach(a=>a())}(ss.create({providers:b,name:l}))}return function Br(s){const o=Op();if(!o)throw new Oe(401,"");return o}()}}function Op(){return xa&&!xa.destroyed?xa:null}let Iy=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const b=function yT(s,o){let a;return a="noop"===s?new $A:("zone.js"===s?void 0:s)||new Os({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Os,useValue:b}];return b.run(()=>{const A=ss.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(A),F=M.injector.get(mc,null);if(!F)throw new Oe(402,"");return b.runOutsideAngular(()=>{const G=b.onError.subscribe({next:J=>{F.handleError(J)}});M.onDestroy(()=>{C0(this._modules,M),G.unsubscribe()})}),function _T(s,o,a){try{const l=a();return xh(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(F,b,()=>{const G=M.injector.get(Tu);return G.runInitializers(),G.donePromise.then(()=>(function Iv(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(Hm=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(E0,dp)||dp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=rI({},l);return function zA(s,o,a){const l=new Xv(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Cy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(D(ss))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();function rI(s,o){return Array.isArray(o)?o.reduce(rI,s):Object.assign(Object.assign({},s),o)}let Cy=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new k.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new k.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Os.assertNotInAngularZone(),Rp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ce.T)(b,I.pipe((0,oe.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof Kv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function WA(s){return s.isBoundToModule}(d)?void 0:this._injector.get(vp),b=d.create(ss.NULL,[],l||d.selector,g),I=b.location.nativeElement,A=b.injector.get(Jb,null),M=A&&b.injector.get(Xb);return A&&M&&M.registerApplication(I,A),b.onDestroy(()=>{this.detachView(b.hostView),C0(this.components,b),M&&M.unregisterApplication(I)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;C0(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Mp,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(D(Os),D(ss),D(mc),D(iy),D(Tu))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function C0(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let sI=!0,_i=!1;function Dy(){return _i=!0,sI}function oI(){if(_i)throw new Error("Cannot enable prod mode after platform setup.");sI=!1}let T0=(()=>{class s{}return s.__NG_ELEMENT_ID__=ET,s})();function ET(s){return function wT(s,o,a){if(ad(s)&&!a){const l=lr(s.index,o);return new os(l,l)}return 47&s.type?new os(o[16],o):null}(mn(),Se(),16==(16&s))}class x0{constructor(){}supports(o){return ep(o)}create(o){return new M0(o)}}const dI=(s,o)=>o;class M0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||dI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<kp(l,d,g)?a:l,b=kp(v,d,g),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=b-d,M=I-d;if(A!=M){for(let G=0;G<A;G++){const J=G<g.length?g[G]:g[G]=0,Ee=J+G;M<=Ee&&Ee<A&&(g[G]=J+1)}g[v.previousIndex]=M-A}}b!==I&&o(v,b,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!ep(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)g=o[b],v=this._trackByFn(b,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,b)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,b),l=!0),a=a._next}else d=0,function Ca(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Mc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,b=>{v=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,b,v,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new TT(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new hI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class TT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ST{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class hI{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ST,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kp(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Oy{constructor(){}supports(o){return o instanceof Map||sm(o)}create(){return new R0}}class R0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||sm(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new O0(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class O0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function P0(){return new N0([new x0])}let N0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||P0()),deps:[[s,new An,new At]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:P0}),s})();function Fp(){return new k0([new Oy])}let k0=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Fp()),deps:[[s,new An,new At]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Fp}),s})();const RT=nI(null,"core",[{provide:xp,useValue:"unknown"},{provide:Iy,deps:[ss]},{provide:Xb,deps:[]},{provide:zb,deps:[]}]);let OT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(D(Cy))},s.\u0275mod=Ft({type:s}),s.\u0275inj=Kt({}),s})()},3942:(tt,be,P)=>{P.d(be,{Z:()=>Oe});var m=P(2090),ee=P(4859),k=P(9681),ce=P(1877);class oe{constructor(fe,Ie){this._delegate=fe,this.firebase=Ie,(0,k._addComponent)(fe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,Ie=k._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(fe);return!et.isInitialized()&&"EXPLICIT"===(null===(Ke=et.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&et.initialize(),et.getImmediate({identifier:Ie})}_removeServiceInstance(fe,Ie=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ie)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ge(){const Be=function ue(Be){const fe={},Ie={__esModule:!0,initializeApp:function xe(je,K={}){const we=k.initializeApp(je,K);if((0,m.r3)(fe,we.name))return fe[we.name];const Q=new Be(we,Ie);return fe[we.name]=Q,Q},app:et,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(je){const K=je.name,we=K.replace("-compat","");if(k._registerComponent(je)&&"PUBLIC"===je.type){const Q=(ie=et())=>{if("function"!=typeof ie[we])throw de.create("invalid-app-argument",{appName:K});return ie[we]()};void 0!==je.serviceProps&&(0,m.ZB)(Q,je.serviceProps),Ie[we]=Q,Be.prototype[we]=function(...ie){return this._getService.bind(this,K).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?Ie[we]:null},removeApp:function Ke(je){delete fe[je]},useAsService:function Ue(je,K){return"serverAuth"===K?null:K},modularAPIs:k}};function et(je){if(!(0,m.r3)(fe,je=je||k._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return fe[je]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function ve(){return Object.keys(fe).map(je=>fe[je])}}),et.App=Be,Ie}(oe);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function fe(Ie){(0,m.ZB)(Be,Ie)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Be}(),q=new ce.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function Te(Be){(0,k.registerVersion)("@firebase/app-compat","0.1.34",Be)}()},9681:(tt,be,P)=>{P.r(be),P.d(be,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>ln,_addOrOverwriteComponent:()=>tn,_apps:()=>rn,_clearComponents:()=>hs,_components:()=>Nn,_getProvider:()=>Kt,_registerComponent:()=>Sr,_removeServiceInstance:()=>Ut,deleteApp:()=>Et,getApp:()=>$r,getApps:()=>Mi,initializeApp:()=>Vs,onLog:()=>Kn,registerVersion:()=>kn,setLogLevel:()=>Ri});var m=P(5861),ee=P(4859),k=P(1877),ce=P(2090),oe=P(8766);class pe{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function de(U){const $=U.getComponent();return"VERSION"===(null==$?void 0:$.type)}(z)){const Ae=z.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(z=>z).join(" ")}}const ue="@firebase/app",H=new k.Yd("@firebase/app"),Bt="[DEFAULT]",Je={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,Nn=new Map;function ln(U,$){try{U.container.addComponent($)}catch(z){H.debug(`Component ${$.name} failed to register with FirebaseApp ${U.name}`,z)}}function tn(U,$){U.container.addOrOverwriteComponent($)}function Sr(U){const $=U.name;if(Nn.has($))return H.debug(`There were multiple attempts to register component ${$}.`),!1;Nn.set($,U);for(const z of rn.values())ln(z,U);return!0}function Kt(U,$){const z=U.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),U.container.getProvider($)}function Ut(U,$,z=Bt){Kt(U,$).clearInstance(z)}function hs(){Nn.clear()}const fr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hr{constructor($,z,Ae){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const xi="9.10.0";function Vs(U,$={}){"object"!=typeof $&&($={name:$});const z=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},$),Ae=z.name;if("string"!=typeof Ae||!Ae)throw fr.create("bad-app-name",{appName:String(Ae)});const Ve=rn.get(Ae);if(Ve){if((0,ce.vZ)(U,Ve.options)&&(0,ce.vZ)(z,Ve.config))return Ve;throw fr.create("duplicate-app",{appName:Ae})}const ut=new ee.H0(Ae);for(const qt of Nn.values())ut.addComponent(qt);const sn=new Hr(U,z,ut);return rn.set(Ae,sn),sn}function $r(U=Bt){const $=rn.get(U);if(!$)throw fr.create("no-app",{appName:U});return $}function Mi(){return Array.from(rn.values())}function Et(U){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(U){const $=U.name;rn.has($)&&(rn.delete($),yield Promise.all(U.container.getProviders().map(z=>z.delete())),U.isDeleted=!0)})).apply(this,arguments)}function kn(U,$,z){var Ae;let Ve=null!==(Ae=Je[U])&&void 0!==Ae?Ae:U;z&&(Ve+=`-${z}`);const ut=Ve.match(/\s|\//),sn=$.match(/\s|\//);if(ut||sn){const qt=[`Unable to register library "${Ve}" with version "${$}":`];return ut&&qt.push(`library name "${Ve}" contains illegal characters (whitespace or "/")`),ut&&sn&&qt.push("and"),sn&&qt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void H.warn(qt.join(" "))}Sr(new ee.wA(`${Ve}-version`,()=>({library:Ve,version:$}),"VERSION"))}function Kn(U,$){if(null!==U&&"function"!=typeof U)throw fr.create("invalid-log-argument");(0,k.Am)(U,$)}function Ri(U){(0,k.Ub)(U)}const Gn="firebase-heartbeat-store";let Ei=null;function Xo(){return Ei||(Ei=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(U,$)=>{0===$&&U.createObjectStore(Gn)}}).catch(U=>{throw fr.create("idb-open",{originalErrorMessage:U.message})})),Ei}function ot(){return(ot=(0,m.Z)(function*(U){var $;try{return(yield Xo()).transaction(Gn).objectStore(Gn).get(si(U))}catch(z){if(z instanceof ce.ZR)H.warn(z.message);else{const Ae=fr.create("idb-get",{originalErrorMessage:null===($=z)||void 0===$?void 0:$.message});H.warn(Ae.message)}}})).apply(this,arguments)}function It(U,$){return pr.apply(this,arguments)}function pr(){return(pr=(0,m.Z)(function*(U,$){var z;try{const Ve=(yield Xo()).transaction(Gn,"readwrite");return yield Ve.objectStore(Gn).put($,si(U)),Ve.done}catch(Ae){if(Ae instanceof ce.ZR)H.warn(Ae.message);else{const Ve=fr.create("idb-set",{originalErrorMessage:null===(z=Ae)||void 0===z?void 0:z.message});H.warn(Ve.message)}}})).apply(this,arguments)}function si(U){return`${U.name}!${U.options.appId}`}class gr{constructor($){this.container=$,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new Bs(z),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var $=this;return(0,m.Z)(function*(){const Ae=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ve=Ar();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ve&&!$._heartbeatsCache.heartbeats.some(ut=>ut.date===Ve))return $._heartbeatsCache.heartbeats.push({date:Ve,agent:Ae}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(ut=>{const sn=new Date(ut.date).valueOf();return Date.now()-sn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,m.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const z=Ar(),{heartbeatsToSend:Ae,unsentEntries:Ve}=function ft(U,$=1024){const z=[];let Ae=U.slice();for(const Ve of U){const ut=z.find(sn=>sn.agent===Ve.agent);if(ut){if(ut.dates.push(Ve.date),j(z)>$){ut.dates.pop();break}}else if(z.push({agent:Ve.agent,dates:[Ve.date]}),j(z)>$){z.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:z,unsentEntries:Ae}}($._heartbeatsCache.heartbeats),ut=(0,ce.L)(JSON.stringify({version:2,heartbeats:Ae}));return $._heartbeatsCache.lastSentHeartbeatDate=z,Ve.length>0?($._heartbeatsCache.heartbeats=Ve,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),ut})()}}function Ar(){return(new Date).toISOString().substring(0,10)}class Bs{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,m.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function Gt(U){return ot.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var z=this;return(0,m.Z)(function*(){var Ae;if(yield z._canUseIndexedDBPromise){const ut=yield z.read();return It(z.app,{lastSentHeartbeatDate:null!==(Ae=$.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ut.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var z=this;return(0,m.Z)(function*(){var Ae;if(yield z._canUseIndexedDBPromise){const ut=yield z.read();return It(z.app,{lastSentHeartbeatDate:null!==(Ae=$.lastSentHeartbeatDate)&&void 0!==Ae?Ae:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...$.heartbeats]})}})()}}function j(U){return(0,ce.L)(JSON.stringify({version:2,heartbeats:U})).length}!function W(U){Sr(new ee.wA("platform-logger",$=>new pe($),"PRIVATE")),Sr(new ee.wA("heartbeat",$=>new gr($),"PRIVATE")),kn(ue,"0.7.33",U),kn(ue,"0.7.33","esm2017"),kn("fire-js","")}("")},4859:(tt,be,P)=>{P.d(be,{wA:()=>k,H0:()=>ue});var m=P(5861),ee=P(2090);class k{constructor(H,q,ne){this.name=H,this.instanceFactory=q,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ce="[DEFAULT]";class oe{constructor(H,q){this.name=H,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const q=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(q)){const ne=new ee.BH;if(this.instancesDeferred.set(q,ne),this.isInitialized(q)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:q});He&&ne.resolve(He)}catch(He){}}return this.instancesDeferred.get(q).promise}getImmediate(H){var q;const ne=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),He=null!==(q=null==H?void 0:H.optional)&&void 0!==q&&q;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function de(ge){return"EAGER"===ge.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(q){}for(const[q,ne]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(q);try{const Te=this.getOrInitializeService({instanceIdentifier:He});ne.resolve(Te)}catch(Te){}}}}clearInstance(H=ce){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,m.Z)(function*(){const q=Array.from(H.instances.values());yield Promise.all([...q.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...q.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ce){return this.instances.has(H)}getOptions(H=ce){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:q={}}=H,ne=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ne,options:q});for(const[Te,Oe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Te)&&Oe.resolve(He);return He}onInit(H,q){var ne;const He=this.normalizeInstanceIdentifier(q),Te=null!==(ne=this.onInitCallbacks.get(He))&&void 0!==ne?ne:new Set;Te.add(H),this.onInitCallbacks.set(He,Te);const Oe=this.instances.get(He);return Oe&&H(Oe,He),()=>{Te.delete(H)}}invokeOnInitCallbacks(H,q){const ne=this.onInitCallbacks.get(q);if(ne)for(const He of ne)try{He(H,q)}catch(Te){}}getOrInitializeService({instanceIdentifier:H,options:q={}}){let ne=this.instances.get(H);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=H,ge===ce?void 0:ge),options:q}),this.instances.set(H,ne),this.instancesOptions.set(H,q),this.invokeOnInitCallbacks(ne,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ne)}catch(He){}var ge;return ne||null}normalizeInstanceIdentifier(H=ce){return this.component?this.component.multipleInstances?H:ce:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const q=this.getProvider(H.name);if(q.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);q.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const q=new oe(H,this);return this.providers.set(H,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(tt,be,P)=>{P.d(be,{in:()=>ee,Yd:()=>de,Ub:()=>ue,Am:()=>ge});const m=[];var ee=(()=>{return(H=ee||(ee={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",ee;var H})();const k={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,oe={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},pe=(H,q,...ne)=>{if(q<H.logLevel)return;const He=(new Date).toISOString(),Te=oe[q];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Te](`[${He}]  ${H.name}:`,...ne)};class de{constructor(q){this.name=q,this._logLevel=ce,this._logHandler=pe,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in ee))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?k[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...q),this._logHandler(this,ee.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...q),this._logHandler(this,ee.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...q),this._logHandler(this,ee.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...q),this._logHandler(this,ee.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...q),this._logHandler(this,ee.ERROR,...q)}}function ue(H){m.forEach(q=>{q.setLogLevel(H)})}function ge(H,q){for(const ne of m){let He=null;q&&q.level&&(He=k[q.level]),ne.userLogHandler=null===H?null:(Te,Oe,...Be)=>{const fe=Be.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(Ke){return null}}).filter(Ie=>Ie).join(" ");Oe>=(null!=He?He:Te.logLevel)&&H({level:ee[Oe].toLowerCase(),message:fe,args:Be,type:Te.name})}}}},8766:(tt,be,P)=>{P.d(be,{Lj:()=>xe,X3:()=>et});var m=P(5861);let k,ce;const de=new WeakMap,ue=new WeakMap,ge=new WeakMap,H=new WeakMap,q=new WeakMap;let Te={get(K,we,Q){if(K instanceof IDBTransaction){if("done"===we)return ue.get(K);if("objectStoreNames"===we)return K.objectStoreNames||ge.get(K);if("store"===we)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Ie(K[we])},set:(K,we,Q)=>(K[we]=Q,!0),has:(K,we)=>K instanceof IDBTransaction&&("done"===we||"store"===we)||we in K};function fe(K){return"function"==typeof K?function Be(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...we){return K.apply(Ke(this),we),Ie(de.get(this))}:function(...we){return Ie(K.apply(Ke(this),we))}:function(we,...Q){const ie=K.call(Ke(this),we,...Q);return ge.set(ie,we.sort?we.sort():[we]),Ie(ie)}}(K):(K instanceof IDBTransaction&&function He(K){if(ue.has(K))return;const we=new Promise((Q,ie)=>{const te=()=>{K.removeEventListener("complete",ye),K.removeEventListener("error",ae),K.removeEventListener("abort",ae)},ye=()=>{Q(),te()},ae=()=>{ie(K.error||new DOMException("AbortError","AbortError")),te()};K.addEventListener("complete",ye),K.addEventListener("error",ae),K.addEventListener("abort",ae)});ue.set(K,we)}(K),((K,we)=>we.some(Q=>K instanceof Q))(K,function oe(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,Te):K)}function Ie(K){if(K instanceof IDBRequest)return function ne(K){const we=new Promise((Q,ie)=>{const te=()=>{K.removeEventListener("success",ye),K.removeEventListener("error",ae)},ye=()=>{Q(Ie(K.result)),te()},ae=()=>{ie(K.error),te()};K.addEventListener("success",ye),K.addEventListener("error",ae)});return we.then(Q=>{Q instanceof IDBCursor&&de.set(Q,K)}).catch(()=>{}),q.set(we,K),we}(K);if(H.has(K))return H.get(K);const we=fe(K);return we!==K&&(H.set(K,we),q.set(we,K)),we}const Ke=K=>q.get(K);function et(K,we,{blocked:Q,upgrade:ie,blocking:te,terminated:ye}={}){const ae=indexedDB.open(K,we),Ne=Ie(ae);return ie&&ae.addEventListener("upgradeneeded",ht=>{ie(Ie(ae.result),ht.oldVersion,ht.newVersion,Ie(ae.transaction))}),Q&&ae.addEventListener("blocked",()=>Q()),Ne.then(ht=>{ye&&ht.addEventListener("close",()=>ye()),te&&ht.addEventListener("versionchange",()=>te())}).catch(()=>{}),Ne}function xe(K,{blocked:we}={}){const Q=indexedDB.deleteDatabase(K);return we&&Q.addEventListener("blocked",()=>we()),Ie(Q).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ue=new Map;function je(K,we){if(!(K instanceof IDBDatabase)||we in K||"string"!=typeof we)return;if(Ue.get(we))return Ue.get(we);const Q=we.replace(/FromIndex$/,""),ie=we!==Q,te=Ce.includes(Q);if(!(Q in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!ve.includes(Q))return;const ye=function(){var ae=(0,m.Z)(function*(Ne,...ht){const $t=this.transaction(Ne,te?"readwrite":"readonly");let Bt=$t.store;return ie&&(Bt=Bt.index(ht.shift())),(yield Promise.all([Bt[Q](...ht),te&&$t.done]))[0]});return function(ht){return ae.apply(this,arguments)}}();return Ue.set(we,ye),ye}!function Oe(K){Te=K(Te)}(K=>NP(PP({},K),{get:(we,Q,ie)=>je(we,Q)||K.get(we,Q,ie),has:(we,Q)=>!!je(we,Q)||K.has(we,Q)}))},5861:(tt,be,P)=>{function m(k,ce,oe,pe,de,ue,ge){try{var H=k[ue](ge),q=H.value}catch(ne){return void oe(ne)}H.done?ce(q):Promise.resolve(q).then(pe,de)}function ee(k){return function(){var ce=this,oe=arguments;return new Promise(function(pe,de){var ue=k.apply(ce,oe);function ge(q){m(ue,pe,de,ge,H,"next",q)}function H(q){m(ue,pe,de,ge,H,"throw",q)}ge(void 0)})}}P.d(be,{Z:()=>ee})}},tt=>{tt(tt.s=4525)}]);